if (self.CavalryLogger) { CavalryLogger.start_js(["qPjMT"]); }

__d("LitestandComposer",["csx","Arbiter","Bootloader","Parent","ReactComposerEvents","ReactComposerIDGenerator","Run","SubscriptionsHandler","ge"],(function(a,b,c,d,e,f,g){__p&&__p();var h=600,i={};function j(a,c,d,e){__p&&__p();b("Bootloader").loadModules(["Animation","ComposerXController","ComposerXMarauderLogger","DOM","LitestandStream"],function(f,g,k,l,m){__p&&__p();if(!m.isReady()){m.addReadyListener(function(){j(a,c,d,e)});return}b("ReactComposerIDGenerator").isComposerID(a)||g.reset(a);if(!m||!c)return;if(i[a]){l.insertAfter(i[a],c);g=i[a].parentNode;g&&g.removeChild(i[a]);delete i[a]}else d===null?l.prependContent(m.getStreamRoot(),c):l.insertAfter(d,c);new f(c).from("opacity",0).to("opacity",1).duration(h).go();k.logCompleted(a);e&&e();b("Arbiter").inform("LitestandComposer/publishCompleted",{story:c})},"LitestandComposer")}var k={},l={initComposer:function(a){__p&&__p();k[a]&&l.destructComposer(a),k[a]=new(b("SubscriptionsHandler"))(),k[a].addSubscriptions(b("Arbiter").subscribe("LitestandComposer/publish",function(c,d){__p&&__p();if(d.composer_id===a){c=b("ge")(a);c=c!==null?b("Parent").bySelector(c,"._l2u"):null;j(a,d.markup,c,function(){var a=d.markup;if(a){var c=a.id;c||(c="random_id_for_litestand_context_"+Math.random(),a.id=c);b("Arbiter").inform("LitestandComposer/attachedToDOM",c)}})}}),b("Arbiter").subscribe("LitestandComposer/publishTemp",function(b,c){c.composer_id===a&&j(a,c.markup,null,function(){c.markup&&(i[a]=c.markup)})}),b("Arbiter").subscribe(b("ReactComposerEvents").COMPOSER_UNMOUNT+a,l.destructComposer.bind(null,a))),b("Run").onLeave(l.destructComposer.bind(null,a))},destructComposer:function(a){var b=k[a];b!=null&&(b.release(),delete k[a])}};e.exports=l}),null);
__d("FeedReactComposerBootloadPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:FeedReactComposerBootloadPerfLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:FeedReactComposerBootloadPerfLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FeedReactComposerBootloadPerfLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBootloadDurationMillis=function(a){this.$1.bootload_duration_millis=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={bootload_duration_millis:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FeedReactComposerLazyLoadPerfTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:FeedReactComposerLazyLoadPerfLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:FeedReactComposerLazyLoadPerfLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:FeedReactComposerLazyLoadPerfLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setInteractionDelay=function(a){this.$1.interaction_delay=a;return this};c.setLazyLoadDuration=function(a){this.$1.lazy_load_duration=a;return this};c.setPropsLoadDuration=function(a){this.$1.props_load_duration=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={interaction_delay:!0,lazy_load_duration:!0,props_load_duration:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("FBStoriesPrivacySelectorLoadingPlaceholder.react",["fbt","React","XUIButton.react","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";a=function(){return b("React").createElement("div",null,b("React").createElement(b("XUIButton.react"),{size:"medium",haschevron:!1,label:g._("Loading..."),image:b("React").createElement(b("XUISpinner.react"),null),onClick:function(a){a.stopPropagation()}}))};e.exports=a}),null);
__d("FBStoriesPrivacySelectorLoadingContainerBootloader.react",["FBStoriesGating","FBStoriesPrivacySelectorLoadingPlaceholder.react","JSResource","React","WebFunnelLogger","lazyLoadComponent","uuid"],(function(a,b,c,d,e,f){"use strict";var g=b("lazyLoadComponent")(b("JSResource")("FBStoriesPrivacySelectorLoadingContainer.react").__setRef("FBStoriesPrivacySelectorLoadingContainerBootloader.react")),h=b("lazyLoadComponent")(b("JSResource")("FBStoriesPrivacyRelaySelectorLoadingContainer.react").__setRef("FBStoriesPrivacySelectorLoadingContainerBootloader.react"));a=function(a){var c=b("uuid")();new(b("WebFunnelLogger"))("FBStoriesWebPrivacySelectorFunnelDefinition").markStart().setSessionKey(c).setAction("Loading privacy selector").log();var d=b("FBStoriesGating").shouldUseRelayPrivacySelector();return b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("FBStoriesPrivacySelectorLoadingPlaceholder.react"),null)},d?b("React").createElement(h,babelHelpers["extends"]({},a,{sessionKey:c})):b("React").createElement(g,babelHelpers["extends"]({},a,{sessionKey:c})))};e.exports=a}),null);
__d("FeedComposerIDStore",["Arbiter","ReactComposerEvents","SubscriptionsHandler"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={_composerID:null,_subscriptions:b("SubscriptionsHandler"),set:function(a){this._subscriptions=new(b("SubscriptionsHandler"))(),this._composerID=a,this._subscribeComposerResetEvent()},get:function(){if(!this._composerID)throw new Error("ID Store has not yet been initialized via set()");return this._composerID},_subscribeComposerResetEvent:function(){var a=this;if(!this._composerID)throw new Error("Composer ID cannot be null");var c=b("Arbiter").subscribeOnce(b("ReactComposerEvents").COMPOSER_RESET+this._composerID,function(b,c){c&&c.newComposerID&&(a._composerID=c.newComposerID,a._subscribeComposerResetEvent())});this._subscriptions.addSubscriptions(c)}};e.exports=a}),null);
__d("ReactComposerAttachmentSelector.react",["cx","Image.react","Link.react","React","TooltipData","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_4-h7"+(this.props.selected?" _5qtn":""),"fbReactComposerAttachmentSelector_"+this.props.attachmentID),c="overflow";this.props.enableDisplayTooltip&&(c=null);return b("React").createElement(b("Link.react"),babelHelpers["extends"]({onClick:this.props.onSelected,className:a,role:"tab","aria-selected":this.props.selected,"data-tooltip-delay":"500","data-tooltip-display":c},b("TooltipData").propsFor(this.props.label),this.props),b("React").createElement("span",{className:"_4-fs"},this.props.icon?b("React").createElement(b("Image.react"),{src:this.props.icon,className:"_5qto"}):null,b("React").createElement("span",{className:"_5qtp"},this.props.label),b("React").createElement("span",{className:"_4-h8"})))};return c}(b("React").PureComponent);c.propTypes={selected:a.bool,label:a.string.isRequired,icon:a.object,onSelected:a.func.isRequired,enableDisplayTooltip:a.bool};c.defaultProps={selected:!1,enableDisplayTooltip:!1};e.exports=c}),null);
__d("ReactComposerFocusInit",["csx","invariant","DOM","DOMContainer.react","Parent","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a={handler:function(a,c,d,e,f,g,i){var j=b("DOM").create("div"),k=a.parentNode;if(g){g=b("Parent").bySelector(a,"._3u13");g&&(k=g.parentNode.parentNode)}b("ReactDOM").render(b("React").createElement(f,{composerID:c,actorID:d,gks:e,ReactComposerFocusExtraConfigData:i,enableFocusBehavior:!0},b("React").createElement(b("DOMContainer.react"),{display:"block"},a)),j);k||h(0,3645);k.firstChild?k.replaceChild(j,k.firstChild):k.appendChild(j)},preload:function(){}};e.exports=a}),null);
__d("XReactFeedSproutsComposerXBootloadController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/feedx_sprouts/bootload/",{composer_id:{type:"String",required:!0},composer_type:{type:"Enum",required:!0,enumType:1},friend_list_id:{type:"String"},target_id:{type:"String",required:!0}})}),null);
__d("ReactFeedSproutsComposerX",["csx","cx","invariant","Arbiter","AsyncRequest","Bootloader","Button","CSS","DOM","Event","FeedComposerIDStore","FeedReactComposerBootloadPerfTypedLogger","LitestandComposer","React","ReactComposerAttachmentType","ReactComposerEvents","ReactComposerFocusInit","ReactComposerStoryArchiveIntroductionDialogGatedModule","ReactDOM","Run","SharesheetDestination","SubscriptionsHandler","XReactFeedSproutsComposerXBootloadController","$"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactComposerStoryArchiveIntroductionDialogGatedModule").module,k=!0;a=function(){__p&&__p();function a(a){__p&&__p();var c=this;this.$38=function(a){if(!c.$11)return;c.$22&&b("Button").setEnabled(c.$22,c.$20.size!=0&&c.$18.value.length!=0);if(!c.$11.textEligibleForStory)return;a=c.$18.value.match(/\n/g)||[];c.$11.maxTextLengthForStory&&c.$18.value.length>c.$11.maxTextLengthForStory||c.$11.maxLinesForStory&&a.length>=c.$11.maxLinesForStory?(c.$26&&b("CSS").addClass(c.$26,"_3560"),c.$20["delete"](b("SharesheetDestination").STORIES)&&(c.$26&&b("CSS").removeClass(c.$26,"_1sfg"),c.$21.add(b("SharesheetDestination").STORIES))):(c.$26&&b("CSS").removeClass(c.$26,"_3560"),c.$21["delete"](b("SharesheetDestination").STORIES)&&(c.$26&&b("CSS").addClass(c.$26,"_1sfg"),c.$20.add(b("SharesheetDestination").STORIES)));c.$22&&b("Button").setEnabled(c.$22,c.$20.size!=0&&c.$18.value.length!=0)};this.$39=function(a){a.preventDefault(),b("CSS").addClass(c.$12,"_1qf9")};this.$31=function(a){if(!c.$11||!c.$11.sharingSpacesDestinationPicker&&!c.$11.oneStepDestinationPicker)return!0;c.$22&&b("Button").setEnabled(c.$22,!1);if(c.$20&&c.$20.has(b("SharesheetDestination").STORIES)&&c.$23){a={composerID:c.$4,targetID:c.$17,actorID:c.$1,text:c.$18.value,successHandler:c.$30};c.$23.postToStory(a)}return c.$20&&c.$20.has(b("SharesheetDestination").TIMELINE)?!0:!1};this.$35=function(a){__p&&__p();a=a.getTarget();var d=null;while(a){if(a.nodeType===1&&a.nodeName==="A"){d=a;break}a=a.parentNode}d!==null||i(0,2217);a=b("CSS").hasClass(d,"._5qtn");if(a)return;c.$13.forEach(function(a){return b("CSS").removeClass(a,"_5qtn")});b("CSS").addClass(d,"_5qtn");a=b("DOM").find(c.$12,"._559p");var e=b("DOM").find(c.$12,"._559q");switch(d.getAttribute("data-attachment-type")){case b("ReactComposerAttachmentType").STATUS:b("CSS").hide(e);b("CSS").show(a);break;case b("ReactComposerAttachmentType").MEDIA:case b("ReactComposerAttachmentType").LIVE_VIDEO:b("CSS").show(e);b("CSS").hide(a);break;case b("ReactComposerAttachmentType").ALBUM:c.$11&&c.$11.albumTabUsesSelector&&c.$40();break;case b("ReactComposerAttachmentType").POST_TO_GROUP:b("Bootloader").loadModules(["XReactComposerPostToGroupLoggingODSController","ReactComposerPostToGroupLoggingEvent"],function(a,c){a=a.getURIBuilder().setString("event",c.CLICK_OUTER_TAB).getURI();new(b("AsyncRequest"))(a).send()},"ReactFeedSproutsComposerX");break}};this.$29=function(a){c.$11&&c.$11.lazySproutsExpand||c.$41();if(c.$3||!c.$27)return;c.$23&&c.$23.bootload();c.$19=Date.now();c.$3=!0;a=b("XReactFeedSproutsComposerXBootloadController").getURIBuilder().setString("composer_id",c.$4).setString("target_id",c.$17).setEnum("composer_type",c.$5).setString("friend_list_id",c.$8).getURI();new(b("AsyncRequest"))(a).send()};this.$34=function(){b("CSS").removeClass(c.$12,"_4qr4"),b("CSS").addClass(c.$12,"_4a8c")};this.$33=function(){c.$34(),c.$18.value="",b("CSS").removeClass(c.$12,"_2-q9")};this.$32=function(){c.$16.release()};this.$30=function(){c.$22&&b("Button").setEnabled(c.$22,!0),b("Arbiter").inform(b("ReactComposerEvents").POST_SUCCEEDED+c.$4),c.$33(),c.$20&&c.$20.has(b("SharesheetDestination").STORIES)&&k&&(j&&(b("ReactDOM").render(b("React").createElement(j,null),b("DOM").create("div")),k=!1))};this.$24=!1;this.$1=a.actorID;this.$12=a.root;this.$4=a.composerID;this.$17=a.targetID;this.$5=a.composerType;this.$8=a.friendListID;this.$9=a.largeTextThreshold;this.$11=a.gks;this.$23=a.jsModules.postModule;this.$27=a.loadReact;this.$10=!1;this.$3=!1;this.$7=b("DOM").find(this.$12,"form");this.$18=b("DOM").find(this.$12,"._3en1");this.$15=b("DOM").find(this.$12,"._16ve");this.$20=new Set();this.$21=new Set();b("FeedComposerIDStore").set(this.$4);b("LitestandComposer").initComposer(a.composerID);this.$16=new(b("SubscriptionsHandler"))();this.$16.addSubscriptions(b("Event").listen(this.$18,"focus",this.$29),b("Event").listen(this.$12,"click",this.$29),b("Event").listen(this.$7,"success",this.$30),b("Event").listen(this.$7,"submit",this.$31),b("Arbiter").subscribeOnce("ReactFeedComposerXBootloader/bootload/"+this.$4,function(){new(b("FeedReactComposerBootloadPerfTypedLogger"))().setBootloadDurationMillis(Date.now()-c.$19).log(),c.$32()}),b("Arbiter").subscribeOnce("ReactFeedComposerXBootloader/selectcomposer/"+this.$4,this.$29),b("Arbiter").subscribe("ReactComposerFocus/reset/"+this.$4,this.$33),b("Arbiter").subscribe("ReactComposerFocus/collapse/"+this.$4,this.$34),b("Arbiter").subscribe(b("ReactComposerEvents").TEXT_PREFILL_BEFORE_BOOTLOAD+this.$4,function(a,b){c.$18.value=b,c.$18.selectionEnd=0}),b("Arbiter").subscribe("ReactFeedSproutsComposerXBody/onDrop",this.$29));this.$13=b("DOM").scry(this.$12,"._4-h7");this.$13.forEach(function(a){return c.$16.addSubscriptions(b("Event").listen(a,"click",c.$35))});this.$14=b("DOM").scry(this.$12,"._m_1");this.$14.forEach(function(a){return c.$16.addSubscriptions(b("Event").listen(a,"click",function(){c.$36(a)}))});var d=b("DOM").scry(this.$12,"._2mo4");d.length===1&&this.$16.addSubscriptions(b("Event").listen(d[0],"click",function(){if(c.$10)return;c.$10=!0;b("Arbiter").subscribeOnce("ReactFeedComposerXBootloader/bootload/"+c.$4,function(a,d){b("Bootloader").loadModules(["LiveVideoBroadcastUtils"],function(a){a.startPreviewUI(d.contextConfig,d.config),c.$10=!1},"ReactFeedSproutsComposerX")});b("Bootloader").loadModules(["LiveVideoBroadcastUtils"],function(){},"ReactFeedSproutsComposerX")}));this.$11&&(this.$11.sharingSpacesDestinationPicker||this.$11.oneStepDestinationPicker)&&this.$37();d=a.reactComposerFocusExtraConfigData;d&&d.showDialogForP2PAdminsMetadata&&d.showDialogForP2PAdminsMetadata.showDialogForP2PAdmins&&a.jsModules.P2PNewAdminComposerFocus?b("ReactComposerFocusInit").handler(b("$")("feedx_sprouts_container"),this.$4,this.$1,this.$11,a.jsModules.P2PNewAdminComposerFocus,!1,a.reactComposerFocusExtraConfigData):a.jsModules&&a.jsModules.composerFocus&&b("ReactComposerFocusInit").handler(b("$")("feedx_sprouts_container"),this.$4,this.$1,this.$11,a.jsModules.composerFocus,!1,a.reactComposerFocusExtraConfigData);b("Run").onLeave(this.$32)}var c=a.prototype;c.$40=function(){var a=this,c=b("DOM").find(this.$12,"._559p"),d=b("DOM").find(this.$12,"._559q");b("Arbiter").subscribeOnce("ReactFeedComposerXBootloader/bootload/"+this.$4,function(){b("Bootloader").loadModules(["ReactComposerCollectionsActions","ReactComposerLoggingName"],function(b,c){b.showCollectionsSelector(a.$4,c.ALBUM_TAB_SELECTOR)},"ReactFeedSproutsComposerX"),a.$32()});b("CSS").show(d);b("CSS").hide(c)};c.$36=function(a,c){c=a.getAttribute("data-sprout-tagger-id");if(c){var d=b("DOM").find(this.$15,"._16vl");d=b("DOM").find(d,'*[data-sprout-tagger-id="'+c+'"]');b("CSS").addClass(d,"_30lm");this.$15.setAttribute("data-selected-sprout-id",c)}else b("CSS").matchesSelector(a,"._1gr3")&&(this.$11&&this.$11.lazySproutsExpand&&this.$41())};c.$37=function(){__p&&__p();var a=this;this.$25=b("DOM").find(this.$12,"._3h0d");this.$16.addSubscriptions(b("Event").listen(this.$18,"input",this.$38));this.$22=b("DOM").find(this.$12,"._ej1");this.$22&&b("Button").setEnabled(this.$22,!1);this.$11&&this.$11.showMessengerSection&&this.$11.oneStepDestinationPicker&&(this.$28=b("DOM").find(this.$12,"._1qfa"),this.$16.addSubscriptions(b("Event").listen(this.$28,"click",this.$39)));var c=b("DOM").scry(this.$12,"._66-n");c.forEach(function(b){return a.$42(b)});this.$25&&this.$16.addSubscriptions(b("Event").listen(this.$25,"click",function(){a.$43()}));this.$11&&this.$11.defaultDestination===b("SharesheetDestination").STORIES?this.$20.add(b("SharesheetDestination").STORIES):this.$20.add(b("SharesheetDestination").TIMELINE)};c.$43=function(a){this.$24=!0};c.$42=function(a){var c=this;a.getAttribute("data-destination")==b("SharesheetDestination").STORIES&&(this.$26=a,this.$11&&!this.$11.textEligibleForStory&&b("CSS").addClass(a,"_3560"));this.$16.addSubscriptions(b("Event").listen(a,"click",function(){c.$44(a)}))};c.$44=function(a,c){if(this.$24){this.$24=!1;return}b("CSS").toggleClass(a,"_1sfg");c=a.dataset.destination;this.$20.has(c)?this.$20["delete"](c):this.$20.add(c);this.$22&&b("Button").setEnabled(this.$22,this.$20.size!=0&&this.$18.value.length!=0)};c.$41=function(){b("CSS").addClass(this.$12,"_4qr4"),b("CSS").removeClass(this.$12,"_4a8c")};return a}();e.exports=a}),null);
__d("ReactComposerBody.react",["cx","ErrorBoundary.react","React","XUICardSection.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_4zoz",this.props.className);return b("React").createElement(b("XUICardSection.react"),{className:a},b("React").Children.map(this.props.children,function(a){return a?b("React").createElement(b("ErrorBoundary.react"),null,a):null}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("ReactComposerFocusHandleScrollAway",["Event","getActiveElement","throttle"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=-400,h=300;a={handler:function(a,c){var d=b("Event").listen(window,"scroll",b("throttle")(function(){var e=a.getBoundingClientRect().bottom;if(e<g){c();e=b("getActiveElement")();e&&e.blur();d.remove()}},h))}};e.exports=a}),null);
__d("ReactComposerFocusWrapperCore.react",["ix","cssVar","cx","fbt","Arbiter","Bootloader","CurrentUser","DOM","DOMTraverser","Event","Focus","Image.react","Keys","Link.react","React","ReactComponentWithPureRenderMixin","ReactComposerEvents","ReactComposerFocusActions","ReactComposerMediaUploadType","ReactDOM","Run","ShimButton.react","SubscriptionsHandler","TabbableElements","TabIsolation","TrackingNodes","URI","fbglyph","ifRequired","isKeyActivation","ReactComposerFocusStore"],(function(a,b,c,d,e,f,g,h,i,j){__p&&__p();a=b("React").PropTypes;b("ReactComposerFocusStore");var k=parseInt("10px",10);c=b("React").createClass({displayName:"ReactComposerFocusWrapperCore",_composerID:"",_fixedHeight:0,_subscriptions:b("SubscriptionsHandler"),_firstFocus:!0,_onLeaveHandle:null,_root:null,_tabIsolation:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{composerID:a.string.isRequired,ariaLabel:a.string,onDismiss:a.func.isRequired,onFocus:a.func.isRequired,focused:a.bool.isRequired,gks:a.object,onFirstFocus:a.func,fixHeight:a.bool,ReactComposerFocusExtraConfigData:a.object},getDefaultProps:function(){return{focused:!1,fixHeight:!1}},UNSAFE_componentWillMount:function(){this._composerID=this.props.composerID},UNSAFE_componentWillReceiveProps:function(a){if(this.props.fixHeight&&!this.props.focused&&a.focused){a=b("ReactDOM").findDOMNode(this.refs.container);this._fixedHeight=a.offsetHeight+k}},componentDidMount:function(){this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscribeComposerEvents(),this._onLeaveHandle=b("Run").onLeave(this._onLeave),this._root&&(this._tabIsolation=new(b("TabIsolation"))(this._root),this.props.focused&&this._tabIsolation.enable())},componentDidUpdate:function(a){if(!a.focused&&this.props.focused){try{var c=document.createEvent("HTMLEvents");c.initEvent&&(c.initEvent("resize",!0,!1),window.dispatchEvent(new(b("Event"))("resize")))}catch(a){}this._tabIsolation&&this._tabIsolation.enable()}else a.focused&&!this.props.focused&&(this._tabIsolation&&this._tabIsolation.disable())},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),this._onLeave(),this._onLeaveHandle&&this._onLeaveHandle.remove(),this._tabIsolation&&this._tabIsolation.disable(),this._tabIsolation=null},render:function(){var a=this,c=this.props.fixHeight&&this.props.focused?{height:this._fixedHeight}:null,d=this.props.focused?this._renderDismissButton():null,e=this.props.focused?this._renderBugNub():null,f=this.props.label||j._("Create a post");return b("React").createElement("div",{role:this.props.focused?"dialog":"region","aria-label":f,className:(this.props.ReactComposerFocusExtraConfigData&&this.props.ReactComposerFocusExtraConfigData.removeDarkFocus?"_6apc":"")+" _3u13 _3e9r"+(this.props.focused?" _3u14":"")+(this.props.focused?" _1b3n":""),"data-ft":b("TrackingNodes").getTrackingInfo(b("TrackingNodes").types.FEED_COMPOSER),ref:function(b){a._root=b},style:c,onKeyDown:this._onKeyDown},b("React").createElement("div",{className:"_3u15",onClick:this._onDismiss,role:"presentation"}),b("React").createElement("div",{className:"_3u16",ref:"container",onFocus:this._onFocus},this.props.children,d),e)},getComposerID:function(){return this._composerID},getComposer:function(){return this.refs.container},_renderDismissButton:function(){return b("React").createElement(b("ShimButton.react"),{className:"_3u17"+(this.props.gks&&this.props.gks.hasHeader?" _356d":"")+(this.props.gks&&this.props.gks.isSproutsComposer?" _3_fz":"")+(this.props.gks&&this.props.gks.wideHeader?" _37nh":"")+(this.props.gks&&this.props.gks.hideFocusDismissButton?" _1rbv":""),onClick:this._onClickDismissButton,onKeyDown:this._onDismissKeyDown,role:"button","aria-label":j._("Dismiss"),tabIndex:"0"},b("React").createElement(b("Image.react"),{src:g("125922")}))},_renderBugNub:function(){if(!b("CurrentUser").isEmployee())return null;var a=new(b("URI"))("/ajax/bugs/report");return b("React").createElement("div",{className:"_t95"},b("React").createElement(b("Link.react"),{href:"#",ajaxify:a,className:"_t97",rel:"dialog"}))},_subscribeComposerEvents:function(){var a=this,c=b("Arbiter").subscribe(b("ReactComposerEvents").OPTIMISTIC_POSTING_STARTED+this._composerID,function(){a.props.onDismiss(!0)}),d=b("Arbiter").subscribe(b("ReactComposerEvents").POST_SUCCEEDED+this._composerID,function(){a.props.onDismiss(!0)}),e=b("Arbiter").subscribe("ReactFeedComposerXBootloader/focuscomposer/"+this._composerID,function(){return a._onFocus(null)}),f=b("Arbiter").subscribe(b("ReactComposerEvents").COMPOSER_RESET+this._composerID,function(c,d){d&&d.newComposerID&&(a.props.onDismiss(),a._composerID=d.newComposerID,a._subscriptions.release(),a._subscriptions=new(b("SubscriptionsHandler"))(),a._subscribeComposerEvents())});this._subscriptions.addSubscriptions(c,d,e,f)},_onFocus:function(a){if(this.props.focused||a&&a.nativeEvent.composerPropagationStopped)return;this._firstFocus&&(this.props.onFirstFocus&&this.props.onFirstFocus(),this._firstFocus=!1);this.props.onFocus();b("ReactComposerFocusActions").notifyFocusAcquired(this.getComposerID())},_onKeyDown:function(a){a.keyCode===b("Keys").ESC&&!a.nativeEvent.composerPropagationStopped&&this._onDismiss()},_onDismissKeyDown:function(a){b("isKeyActivation")(a)&&this._onDismiss()},_onClickDismissButton:function(){var a=this;b("ifRequired")("ReactComposerMediaUploadStore",function(c){var d=c.getUploadsCount(a._composerID,b("ReactComposerMediaUploadType").VIDEO);c=c.getUploadsCount(a._composerID,b("ReactComposerMediaUploadType").PHOTO);d>0&&c===0&&b("Bootloader").loadModules(["ReactComposerVideoSurvey"],function(b){return b.showDismissalSurvey(a._composerID,d)},"ReactComposerFocusWrapperCore.react")});this._onDismiss()},_onDismiss:function(){var a=this;this._onLeave();if(this._root&&document.body){var c=b("DOMTraverser").nextFilteredNode(document.body,this._root,function(c){return!b("DOM").contains(a._root,c)&&b("TabbableElements").isTabbable(c)});b("Focus").set(c)}},_onLeave:function(){this.props.onDismiss(),b("ReactComposerFocusActions").notifyFocusLost(this.props.composerID)}});e.exports=c}),null);
__d("ReactComposerFocusInline.react",["Arbiter","React","ReactComposerFocusHandleScrollAway","ReactComposerFocusWrapperCore.react","ReactComposerTaggerType","ReactDOM","ifRequired"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={focused:!1},d.$3=function(){var a=b("ReactDOM").findDOMNode(d.refs.focus.getComposer());b("ReactComposerFocusHandleScrollAway").handler(a,d.$1);b("ifRequired")("ReactComposerActions",function(a){d.props.gks&&d.props.gks.lazySproutsExpand||a.expandSprouts(d.$2())});b("ifRequired")("ReactComposerGroupPostTagsTaggerActions",function(a){a.setShowState(d.$2(),!0)});b("ifRequired")("ReactComposerTaggerActions",function(a){a.handleSetTaggerShowNUX(d.$2(),b("ReactComposerTaggerType").GROUP_MEET_UP,!1),a.handleSetTaggerShowNUX(d.$2(),b("ReactComposerTaggerType").VISUAL_POLL,!1)});d.setState({focused:!0})},d.$1=function(){b("Arbiter").inform("ReactComposerFocus/collapse/"+d.$2()),window.setTimeout(function(){d.refs.focus&&(b("ifRequired")("ReactComposerFocusActions",function(a){a.notifyFocusLost(d.$2())}),b("ifRequired")("ReactComposerActions",function(a){a.collapseSprouts(d.$2())}),b("ifRequired")("ReactComposerGroupPostTagsTaggerActions",function(a){a.setShowState(d.$2(),!1)}),b("ifRequired")("ReactComposerTaggerActions",function(a){b("ifRequired")("ReactComposerLoggingName",function(b){a.deselectCurrentTagger(d.$2(),b.INLINE_COMPOSER)})}))},0),d.setState({focused:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){this.$1()};d.componentDidMount=function(){b("Arbiter").inform("ReactComposerFocus/initialized"+this.$2())};d.render=function(){return b("React").createElement(b("ReactComposerFocusWrapperCore.react"),{composerID:this.props.composerID,focused:this.state.focused&&this.props.enableFocusBehavior,onFocus:this.$3,onDismiss:this.$1,gks:this.props.gks,ReactComposerFocusExtraConfigData:this.props.ReactComposerFocusExtraConfigData,ref:"focus"},this.props.children)};d.$2=function(){return this.refs.focus&&this.refs.focus.getComposerID()};return c}(b("React").PureComponent);c.propTypes={composerID:a.string.isRequired,gks:a.object};e.exports=c}),null);
__d("ReactComposerProfilePhotoBlock.react",["cx","Layout.react","ReactComposerProfilePhoto.react","React","emptyFunction"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("Layout.react").Column,i=b("Layout.react").FillColumn;a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.onClick||b("emptyFunction");return b("React").createElement(b("Layout.react"),null,b("React").createElement(h,{className:"_q-v"},b("React").createElement(b("ReactComposerProfilePhoto.react"),{src:this.props.profilePicSrc,profileName:this.props.profileName,profileURI:this.props.profileURI,profileDialogURI:this.props.profileDialogURI,onClick:a})),b("React").createElement(i,null,this.props.children))};return c}(b("React").PureComponent);c.propTypes={profileName:a.string,profilePicSrc:a.string.isRequired,profileURI:a.string,profileDialogURI:a.string,onClick:a.func};e.exports=c}),null);
__d("ReactComposerSproutItem.react",["cx","Focus","Image.react","JSResource","Link.react","React","lazyLoadComponent","TooltipData","XUISpinner.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;var h=b("lazyLoadComponent")(b("JSResource")("ReactComposerSproutItemNewBadge.react").__setRef("ReactComposerSproutItem.react"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={hasBeenClicked:!1},c.$1=function(){c.setState({hasBeenClicked:!0}),c.props.onClick&&c.props.onClick()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.props.loading?b("React").createElement(b("XUISpinner.react"),{className:"_20j1",background:"dark",size:"small"}):null,c=this.props.uiConfig,d=!this.context.hasFinishedSproutPromotion&&this.context.promotedSprout&&this.props.uiConfig.sprout&&this.context.promotedSprout===this.props.uiConfig.sprout?b("React").createElement(b("React").Suspense,{fallback:null},b("React").createElement(h,{composerID:this.context.composerID,hasSproutBeenClicked:this.state.hasBeenClicked,promotionID:this.context.promotionID,title:this.context.subtitle&&this.context.subtitle})):null;return b("React").createElement(b("Link.react"),{"data-testid":c.webDriverTestID,role:this.props.linkRole||"button","aria-pressed":this.props.highlighted},b("React").createElement("div",babelHelpers["extends"]({},this.props,{className:b("joinClasses")("_m_1"+(this.props.loading?" _20jn":"")+(d!==null?" _4c9w":""),c&&c.className),onClick:this.$1,onMouseDown:function(a){return a.preventDefault()},ref:"sproutItemRoot",style:this.props.highlighted?{background:c.highlightedColor}:null,"data-tooltip-delay":"500"},b("TooltipData").propsFor(c.tooltip)),b("React").createElement(b("Image.react"),{className:"_4a0a",src:c.icon}),b("React").createElement("div",{className:"_2aha"},c.label),d,a))};d.focus=function(){b("Focus").set(this.refs.sproutItemRoot)};return c}(b("React").PureComponent);c.contextTypes={hasFinishedSproutPromotion:a.bool.isRequired,promotionID:a.number,promotedSprout:a.string,subtitle:a.string,composerID:a.string};c.defaultProps={highlighted:!1};e.exports=c}),null);
__d("XReactFeedSproutsComposerXPropsController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/react_composer/lazy_load_composer/props/",{composer_id:{type:"String",required:!0}})}),null);
__d("ReactLazyLoadFeedSproutsComposerX.react",["cx","fbt","ix","Arbiter","AsyncRequest","ExtensibleSproutsItemType","FeedComposerIDStore","FeedReactComposerLazyLoadPerfTypedLogger","JSResource","React","ReactComposerAttachmentSelector.react","ReactComposerBody.react","ReactComposerFocusInline.react","ReactComposerProfilePhotoBlock.react","ReactComposerSproutItem.react","ReactComposerSproutsDefaultUIConfigTyped","SubscriptionsHandler","XReactFeedSproutsComposerXPropsController","XUICard.react","XUISpinner.react","emptyFunction","fbglyph","gkx","joinClasses","lazyLoadComponent","qex"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j=b("lazyLoadComponent")(b("JSResource")("ReactFeedSproutsComposerX.react").__setRef("ReactLazyLoadFeedSproutsComposerX.react"));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={hadUserInteraction:!1,hasBeenHovered:!1,jsLoadingDuration:null,prefillAdditions:null,propsLoaded:!1,propsLoadingDuration:null},d.$4=null,d.firstInteractionTime=0,d.lazyLoadStartTime=0,d.lazyLoadEndTime=0,d.propsLoadStartTime=0,d.propsLoadEndTime=0,d.hasLoggedPerf=!1,d.$5=new(b("SubscriptionsHandler"))(),d.$6=function(){d.setState({hadUserInteraction:!0}),d.$7()},d.$8=function(){d.$7(),d.setState({hasBeenHovered:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$7=function(){var a=this;this.$4===null&&(this.propsLoadStartTime=Date.now(),this.$5.addSubscriptions(b("Arbiter").subscribe("ReactLazyLoadFeedSproutsComposerX/propsLoaded/"+this.props.composerID,function(b,c){a.$1=c.contextConfig,a.$2=c.config,a.$3=c.prefillConfig,a.propsLoadEndTime=Date.now(),a.setState({propsLoaded:!0,propsLoadingDuration:a.propsLoadEndTime-a.propsLoadStartTime})})),this.$4=b("XReactFeedSproutsComposerXPropsController").getURIBuilder().setString("composer_id",this.props.composerID).getRequest(new(b("AsyncRequest"))()),this.$4.send())};d.componentDidMount=function(){var a=this;b("FeedComposerIDStore").set(this.props.composerID);this.$5.addSubscriptions(b("Arbiter").subscribe("ReactFeedComposerXBootloader/selectcomposer/"+this.props.composerID,function(b,c){c&&c.prefillAdditions&&a.setState({prefillAdditions:c.prefillAdditions}),a.$6()}))};d.componentDidUpdate=function(a,c){var d=this;this.state.hasBeenHovered&&!c.hasBeenHovered&&(this.lazyLoadStartTime=Date.now(),b("JSResource")("ReactFeedSproutsComposerX.react").__setRef("ReactLazyLoadFeedSproutsComposerX.react").load().done(function(a){d.lazyLoadEndTime=Date.now(),d.setState({jsLoadingDuration:d.lazyLoadEndTime-d.lazyLoadStartTime})}));this.state.hadUserInteraction&&!c.hadUserInteraction&&(this.firstInteractionTime=Date.now());this.state.hadUserInteraction&&!this.hasLoggedPerf&&this.state.jsLoadingDuration!==null&&this.state.propsLoadingDuration!==null&&(this.hasLoggedPerf=!0,new(b("FeedReactComposerLazyLoadPerfTypedLogger"))().setLazyLoadDuration(this.lazyLoadEndTime-this.lazyLoadStartTime).setPropsLoadDuration(this.propsLoadEndTime-this.propsLoadStartTime).setInteractionDelay(Math.max(Math.max(this.lazyLoadEndTime,this.propsLoadEndTime)-this.firstInteractionTime,0)).log())};d.componentWillUnmount=function(){this.$5&&this.$5.release()};c.propsLoaded=function(a,c,d){b("Arbiter").inform("ReactLazyLoadFeedSproutsComposerX/propsLoaded/"+a.composerID,{contextConfig:a,config:c,prefillConfig:d})};d.render=function(){var a=b("React").createElement(k,babelHelpers["extends"]({},this.props,{actorID:this.props.actorID,albumTab:this.props.albumTab,hideHeader:b("qex")._("780493"),liveVideoTab:!(b("qex")._("730782")||b("gkx")("796190")),loading:this.state.hadUserInteraction,onMouseOver:this.$8,onInteraction:this.$6,qAndATab:this.props.qAndATab,sproutsConfig:this.props.sproutsConfig,statusAttachmentConfig:this.props.statusAttachmentConfig,suppressHeaderIcons:b("qex")._("760895")||b("gkx")("796190")}));return b("React").createElement(b("ReactComposerFocusInline.react"),{composerID:this.props.composerID,actorID:this.props.actorID,gks:{lazySproutsExpand:b("gkx")("678359"),topPostButton:!1,hasHeader:!1,isSproutsComposer:!0,wideHeader:!1,hideFocusDismissButton:!1},enableFocusBehavior:!0},this.state.propsLoaded&&this.state.hadUserInteraction&&this.$1&&this.$2?b("React").createElement(b("React").Suspense,{fallback:a},b("React").createElement(j,{contextConfig:this.$1,config:this.$2,prefillConfig:Object.assign({},this.$3,this.state.prefillAdditions),wasStubbed:!0})):a)};return c}(b("React").Component);function k(a){var c=b("qex")._("730783")||b("gkx")("796190");return b("React").createElement("div",{className:"_1cx1 _4a8c _4aay _4ab3"+(b("qex")._("730784")?" _2qma":""),onFocus:a.onInteraction,onMouseOver:a.onMouseOver,onClick:a.onInteraction,role:"presentation"},b("React").createElement(b("XUICard.react"),{className:"_5n2b _36bx"+(a.loading?" _6rv6":""),"data-testid":"react-composer-root","data-test-actorid":a.actorID,id:a.composerID},a.hideHeader?null:b("React").createElement(l,{albumTab:a.albumTab&&!c,liveVideoTab:a.liveVideoTab,photoTab:a.liveVideoTab&&c,qAndATab:a.qAndATab,statusTab:a.statusAttachmentConfig.enabled,statusTabTitle:a.statusAttachmentConfig.defaultTabTitle,suppressIcons:a.suppressHeaderIcons}),b("React").createElement(b("ReactComposerBody.react"),a,b("React").createElement(n,a.statusAttachmentConfig)),a.sproutsConfig?b("React").createElement(o,{sproutsConfig:a.sproutsConfig}):null),a.loading?b("React").createElement("div",{className:"_6rv7"},b("React").createElement(b("XUISpinner.react"),{background:"dark",size:"large"})):null)}function l(a){var c=[];a.statusTab&&c.push(b("React").createElement(m,{icon:a.suppressIcons?null:i("123350"),key:"status_tab_selector",label:a.statusTabTitle,selected:!0}));a.photoTab&&c.push(b("React").createElement(m,{icon:a.suppressIcons?null:i("122530"),key:"media_tab_selector",label:h._("Photo\/Video"),selected:!1}));a.albumTab&&c.push(b("React").createElement(m,{icon:a.suppressIcons?null:i("123370"),key:"album",label:h._("Photo\/Video Album"),selected:!1}));a.liveVideoTab&&c.push(b("React").createElement(m,{icon:a.suppressIcons?null:i("123206"),key:"live_video_tab_selector",label:h._("Live Video"),selected:!1}));a.qAndATab&&c.push(b("React").createElement(m,{icon:a.suppressIcons?null:i("123482"),key:"qanda_tab_selector",label:h._("Q&A"),selected:!1}));return b("React").createElement("div",{className:"_3ubp _sg2"+(c.length<=1?" _76ge":"")+(a.suppressIcons?" _776n":"")},c)}function m(a){return b("React").createElement("span",{"data-testid":a.dataTestID,className:"_sg1"},b("React").createElement(b("ReactComposerAttachmentSelector.react"),babelHelpers["extends"]({onSelected:b("emptyFunction")},a)))}function n(a){return b("React").createElement("div",{className:"_i-o"},b("React").createElement("div",{className:"_3eny"},b("React").createElement(b("ReactComposerProfilePhotoBlock.react"),a,b("React").createElement("div",{className:b("joinClasses")("_1mwp"+(a.showProfilePic?" _5bu_":"")+" _17nh","navigationFocus")},b("React").createElement("div",{className:"_1p1t"},a.placeholderText)))))}function o(a){return b("React").createElement("div",{className:"_1j2v"},b("React").createElement(p,{sproutsConfig:a.sproutsConfig}))}var p=function(c){__p&&__p();babelHelpers.inheritsLoose(a,c);function a(){return c.apply(this,arguments)||this}var d=a.prototype;d.getChildContext=function(){return{hasFinishedSproutPromotion:!!this.props.hasFinishedSproutPromotion,promotedSprout:this.props.sproutsPromotionConfig&&this.props.sproutsPromotionConfig.sprout,subtitle:this.props.sproutsPromotionConfig&&this.props.sproutsPromotionConfig.subtitle,promotionID:this.props.sproutsPromotionConfig&&this.props.sproutsPromotionConfig.promotionID}};d.render=function(){__p&&__p();var a=[];for(var c in this.props.sproutsConfig){var d=b("ExtensibleSproutsItemType")[c];if(!this.props.sproutsConfig[d].enabled===!0)continue;a.push(b("React").createElement(q,{key:c},b("React").createElement(b("ReactComposerSproutItem.react"),{uiConfig:b("ReactComposerSproutsDefaultUIConfigTyped").sproutsUIConfigMap[d]})));if(a.length==3)break}return b("React").createElement("div",{className:"_16ve _7i31"},b("React").createElement("ul",{className:"_16vg"+(a.length===3?" _1oxv":"")},a,b("React").createElement(q,{key:"ELLIPSIS"},b("React").createElement(b("ReactComposerSproutItem.react"),{uiConfig:{label:"",icon:i("28705"),iconSrc:"/images/composer/sprouts/composer_sprout_ellipsis.png",className:"_1gr3",loggingName:"ellipsis_sprout",webDriverTestID:"ellipsis-sprout"}}))))};return a}(b("React").PureComponent);p.childContextTypes={hasFinishedSproutPromotion:a.bool.isRequired,promotionID:a.number,promotedSprout:a.string,subtitle:a.string};function q(a){return b("React").createElement("li",{className:"_5xmp"},a.children)}e.exports=c}),null);