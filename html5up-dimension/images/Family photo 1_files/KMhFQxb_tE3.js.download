if (self.CavalryLogger) { CavalryLogger.start_js(["xAwsc"]); }

__d("InstagramMessageGraphQLThreadItemFetcher",["Promise","BanzaiODS","InstagramMessageThreadItemWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadItemFetcher"}),function(a){b("BanzaiODS").bumpEntityKey("Instagram_message_webgraphql","InstagramMessageGraphQLThreadItemFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey("Instagram_message_webgraphql","InstagramMessageGraphQLThreadItemFetcher.failure");e(a)})})}}}),null);
__d("InstagramMessageGraphQLThreadItemsFetcher",["Promise","BanzaiODS","InstagramMessageThreadItemsWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadItemsWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadItemsFetcher"}),function(a){b("BanzaiODS").bumpEntityKey("instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey("instagram_message_webgraphql","InstagramMessageGraphQLThreadItemsFetcher.failure");e(a)})})}}}),null);
__d("InstagramMessageGraphQLThreadsFetcher",["Promise","BanzaiODS","InstagramMessageThreadsWebGraphQLQuery","WebGraphQL","promiseDone"],(function(a,b,c,d,e,f){"use strict";e.exports={fetch:function(a,c){return new(b("Promise"))(function(d,e){b("promiseDone")(b("WebGraphQL").exec(new(b("InstagramMessageThreadsWebGraphQLQuery"))(c),{actorID:a,batchName:"InstagramMessageGraphQLThreadsFetcher"}),function(a){b("BanzaiODS").bumpEntityKey("instagram_message_webgraphql","InstagramMessageGraphQLThreadsFetcher.success"),d(a)},function(a){a=a.errors;b("BanzaiODS").bumpEntityKey("instagram_message_webgraphql","InstagramMessageGraphQLThreadsFetcher.failure");e(a)})})}}}),null);
__d("IGMessageInboxStore",["invariant","FBLogger","FluxLoadObjectStore","IGMessageDataDispatcher","IGMessageDataMutateActionTypes","InstagramMessageGraphQLThreadItemFetcher","InstagramMessageGraphQLThreadItemsFetcher","InstagramMessageGraphQLThreadsFetcher","LoadObject","gkx","immutable","keyMirror","nullthrows"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="1",i="IGMessageID",j={INBOX:"INBOX",THREAD:"THREAD",ITEM:"ITEM"},k=b("keyMirror")({LOADED:""}),l=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$IGMessageInboxStore1=new Map(),c.$IGMessageInboxStore2=new Map(),b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.getItemToken=function(a,b,c){a=[h,i,a,b,c];return a.join(":")};d.getInbox=function(a,c,d){__p&&__p();var e;if(!a)return b("LoadObject").empty();c=(c=c)!=null?c:1;c>=1||g(0,11872);var f=this.$IGMessageInboxStore3({type:j.INBOX,inboxID:a,limit:c,cursor:d}),h=this.get(f);if(h.isDeleting())return b("LoadObject").deleting();else if(!h.hasValue()){if(h.hasError()){b("FBLogger")("pages_messaging_www").mustfix("Encounter error when loading IG inbox: %s",a);this.$IGMessageInboxStore4(this.$IGMessageInboxStore3({type:j.INBOX,inboxID:a,limit:c}));return b("LoadObject").loading().setError(h.getError())}d&&g(0,3361);return b("LoadObject").loading()}e=(e=h.value)!=null?e:{};e=e.inbox;if(e===null||e===void 0)return b("LoadObject").withValue(null);var i=this.$IGMessageInboxStore1.get(f);if(i&&i.stateData.inbox===e){i.isLoading!==h.isLoading()&&(i={stateData:b("nullthrows")(h.value),returnedData:i.returnedData,isLoading:h.isLoading(),error:h.getError()},this.$IGMessageInboxStore1.set(f,i));if(i.isLoading)return b("LoadObject").withValue(i.returnedData.inbox).loading().setError(i.error);else if(!(i.error instanceof Error))return b("LoadObject").withValue(i.returnedData.inbox)}i=(i=e.nodes)!=null?i:[];var k=0;if(d!==null&&d!==void 0){var l=-1;for(var m=i.length-1;m>=0;m--)if(i[m].token===d.lastEntityToken){l=m;break}else if(this.largeNumberCompare(d.lastEntityTime,b("nullthrows")(i[m].last_activity_at))===-1)break;if(l===-1)return b("LoadObject").withValue(null);k=l+1}d=Object.assign({},e);m=!1;if(k+c<=i.length)d.nodes=i.slice(k,k+c),d.page_info={has_next_page:k+c<i.length||e.page_info&&e.page_info.has_next_page};else if(!e.page_info&&!e.nodes)this.$IGMessageInboxStore4(this.$IGMessageInboxStore3({type:j.INBOX,inboxID:a,limit:c})),m=!0;else if(!e.page_info||!b("nullthrows")(e.page_info).has_next_page)d.nodes=i.slice(k,i.length),d.page_info={has_next_page:!1};else{l=null;i.length>0&&(l={lastEntityTime:b("nullthrows")(i[i.length-1].last_activity_at),lastEntityToken:b("nullthrows")(i[i.length-1].token)});this.$IGMessageInboxStore4(this.$IGMessageInboxStore3({type:j.INBOX,inboxID:a,limit:k+c-i.length,cursor:l,graphqlCursor:b("nullthrows")(e.page_info).end_cursor}));d.nodes=i.slice(k,i.length);d.page_info={has_next_page:!0};m=!0}this.$IGMessageInboxStore1.set(f,{stateData:b("nullthrows")(h.value),returnedData:{inbox:d},isLoading:m,error:h.getError()});if(m)return b("LoadObject").withValue(d).loading().setError(h.getError());else return b("LoadObject").withValue(d).setError(h.getError())};d.getThread=function(a,c,d,e){__p&&__p();var f,h;if(!a||c==="")return b("LoadObject").empty();d=(d=d)!=null?d:1;d>=1||g(0,11872);var i=this.$IGMessageInboxStore3({type:j.THREAD,inboxID:a,token:c,limit:d,cursor:e}),k=this.get(i);if(k.isDeleting())return b("LoadObject").deleting();else if(!k.hasValue()){if(k.hasError()){b("FBLogger")("pages_messaging_www").mustfix("Encounter error when loading IG thread: %s, $s",a,c);return b("LoadObject").empty().setError(k.getError())}e&&g(0,3361);return b("LoadObject").loading()}f=(f=k.value)!=null?f:{};f=f.thread;if(f===null||f===void 0)return b("LoadObject").withValue(null);var l=this.$IGMessageInboxStore1.get(i);if(l&&l.stateData.thread===f){l.isLoading!==k.isLoading()&&(l={stateData:b("nullthrows")(k.value),returnedData:l.returnedData,isLoading:k.isLoading(),error:k.getError()},this.$IGMessageInboxStore1.set(i,l));if(l.isLoading)return b("LoadObject").withValue(l.returnedData.thread).loading().setError(l.error);else if(!(l.error instanceof Error))return b("LoadObject").withValue(l.returnedData.thread)}l=(l=f.thread_items)!=null?l:{};h=(h=l.nodes)!=null?h:[];var m=0;if(e!==null&&e!==void 0){var n=-1;for(var o=h.length-1;o>=0;o--)if(h[o].token===e.lastEntityToken){n=o;break}else if(this.largeNumberCompare(e.lastEntityTime,b("nullthrows")(h[o].time_stamp))===-1)break;if(n===-1)return b("LoadObject").withValue(null);m=n+1}e=Object.assign({},f);o=Object.assign({},l);n=!1;e.thread_items=o;if(m+d<=h.length)o.nodes=h.slice(m,m+d),o.page_info={has_next_page:m+d<h.length||l.page_info&&l.page_info.has_next_page};else if(!l.page_info&&!l.nodes)this.$IGMessageInboxStore4(this.$IGMessageInboxStore3({type:j.THREAD,inboxID:a,token:c,limit:d})),n=!0;else if(!l.page_info||!b("nullthrows")(l.page_info).has_next_page)o.nodes=h.slice(m,h.length),o.page_info={has_next_page:!1};else{f=null;h.length>0&&(f={lastEntityTime:b("nullthrows")(h[h.length-1].time_stamp),lastEntityToken:b("nullthrows")(h[h.length-1].token)});this.$IGMessageInboxStore4(this.$IGMessageInboxStore3({type:j.THREAD,inboxID:a,token:c,limit:m+d-h.length,cursor:f,graphqlCursor:b("nullthrows")(l.page_info).end_cursor}));o.nodes=h.slice(m,h.length);o.page_info={has_next_page:!0};n=!0}this.$IGMessageInboxStore1.set(i,{stateData:b("nullthrows")(k.value),returnedData:{thread:e},isLoading:n,error:k.getError()});if(n)return b("LoadObject").withValue(e).loading().setError(k.getError());else return b("LoadObject").withValue(e).setError(k.getError())};d.getThreadItem=function(a,c){__p&&__p();if(!a||c==="")return b("LoadObject").empty();a=this.get(this.$IGMessageInboxStore3({type:j.ITEM,inboxID:a,token:c}));if(a.isDeleting())return b("LoadObject").deleting();else if(!a.hasValue())return b("LoadObject").loading();else if(a.isCreating())return b("LoadObject").withValue(a.getValueEnforcing().item).creating();return b("LoadObject").withValue(a.getValueEnforcing().item)};d.__load=function(a){a=this.$IGMessageInboxStore5(a);switch(a.type){case j.INBOX:this.$IGMessageInboxStore6(a);break;case j.THREAD:this.$IGMessageInboxStore7(a);break;case j.ITEM:this.$IGMessageInboxStore8(a);break}};d.$IGMessageInboxStore6=function(a){b("InstagramMessageGraphQLThreadsFetcher").fetch(a.inboxID,{limit:a.limit,after:a.graphqlCursor,loadThreads:!0}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{inbox:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.$IGMessageInboxStore7=function(a){b("InstagramMessageGraphQLThreadItemsFetcher").fetch(a.inboxID,{token:b("nullthrows")(a.token),item_limit:a.limit,item_after:a.graphqlCursor,load_items:!0,width:480,height:480}).then(function(c){c.instagram_message_thread===null?b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error("Failed to fetch thread"),type:k.LOADED}):b("IGMessageDataDispatcher").dispatch({request:a,payload:{thread:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.$IGMessageInboxStore8=function(a){b("InstagramMessageGraphQLThreadItemFetcher").fetch(a.inboxID,{token:b("nullthrows")(a.token),width:480,height:480}).then(function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:{item:c},type:k.LOADED})})["catch"](function(c){b("IGMessageDataDispatcher").dispatch({request:a,payload:new Error(c),type:k.LOADED})})};d.__getActionTypes=function(){return l?[this.getActionTypeStartLoad(),k.LOADED,b("IGMessageDataMutateActionTypes").CREATE,b("IGMessageDataMutateActionTypes").CREATING,b("IGMessageDataMutateActionTypes").DELETE,b("IGMessageDataMutateActionTypes").DELETING,b("IGMessageDataMutateActionTypes").FORCE_FETCH,b("IGMessageDataMutateActionTypes").UPDATE]:null};d.reduce=function(a,c){__p&&__p();var d;switch(c.type){case k.LOADED:var e=c.payload;this.$IGMessageInboxStore2.set(this.$IGMessageInboxStore3(c.request),!1);if(e instanceof Error)return this.$IGMessageInboxStore9(a,c.request,e);switch(c.request.type){case j.INBOX:return this.$IGMessageInboxStore10(a,c.request,b("nullthrows")(e.inbox));case j.THREAD:return this.$IGMessageInboxStore11(a,c.request,b("nullthrows")(e.thread));case j.ITEM:return this.$IGMessageInboxStore12(a,c.request,b("nullthrows")(e.item))}return a;case b("IGMessageDataMutateActionTypes").FORCE_FETCH:this.$IGMessageInboxStore4(this.$IGMessageInboxStore3(c.request));return a;case b("IGMessageDataMutateActionTypes").DELETING:return this.__setDeleting(a,b("immutable").List.of(this.$IGMessageInboxStore13(c.request)));case b("IGMessageDataMutateActionTypes").DELETE:e=a;switch(c.request.type){case j.THREAD:e=this.$IGMessageInboxStore14(a,c.request.inboxID,b("nullthrows")(c.request.token));break;case j.ITEM:e=this.$IGMessageInboxStore15(a,c.request.inboxID,b("nullthrows")((d=c)!=null?(d=d.extraData)!=null?d.threadToken:d:d),b("nullthrows")(c.request.token));break}return this.__setEmpty(e,b("immutable").List.of(this.$IGMessageInboxStore13(c.request)));case b("IGMessageDataMutateActionTypes").CREATING:if(c.request.type===j.ITEM){var f,g;e=b("nullthrows")((d=c)!=null?(d=d.payload)!=null?d.item:d:d);d=b("nullthrows")(e.client_context);e=Object.assign({},e,{token:d});g=b("nullthrows")((g=c)!=null?(g=g.extraData)!=null?g.threadToken:g:g);var h=this.$IGMessageInboxStore16(a,c.request.inboxID,g,null,e),i=this.$IGMessageInboxStore13({type:j.THREAD,inboxID:c.request.inboxID,token:g}),l=this.$IGMessageInboxStore17(h,i);l=(l=l)!=null?(l=l.value)!=null?l.thread:l:l;f=(f=l)!=null?f.last_activity_at:f;h=this.$IGMessageInboxStore18(h,c.request.inboxID,g,{token:g,last_activity_at:f});var m=this.getInboxIGID(c.request.inboxID);f=(((g=l)!=null?g.last_seen_at:g)||[]).find(function(a){return a.user_id==m});if(this.largeNumberCompare(((g=f)!=null?g.timestamp:g)||"0",((f=e)!=null?f.time_stamp:f)||this.getNowTimestamp())==-1){f=(((g=l)!=null?g.last_seen_at:g)||[]).filter(function(a){return a.user_id!==m});f.push({item_id:d,timestamp:e.time_stamp,user_id:m});g=Object.assign({},l,{last_seen_at:f});h=this.$IGMessageInboxStore19(h,i,{thread:g})}return h.set(this.$IGMessageInboxStore13({type:j.ITEM,inboxID:c.request.inboxID,token:d}),b("LoadObject").withValue({item:e}).creating())}return a;case b("IGMessageDataMutateActionTypes").CREATE:switch(c.request.type){case j.THREAD:f=b("nullthrows")((l=c)!=null?(l=l.payload)!=null?l.thread:l:l);i=this.$IGMessageInboxStore18(a,c.request.inboxID,null,{token:b("nullthrows")(f.token),last_activity_at:b("nullthrows")(f.last_activity_at)});d=(h=(g=f)!=null?(g=g.thread_items)!=null?g.nodes:g:g)!=null?h:[];e=d.map(function(a){return{token:a.token,time_stamp:a.time_stamp}});l=Object.assign({},f.thread_items,{nodes:e});g=Object.assign({},f,{thread_items:l});return this.$IGMessageInboxStore19(i,this.$IGMessageInboxStore13({type:j.THREAD,inboxID:c.request.inboxID,token:b("nullthrows")(f.token)}),{thread:g});case j.ITEM:d=b("nullthrows")((h=c)!=null?(h=h.payload)!=null?h.item:h:h);e=this.$IGMessageInboxStore13({type:j.ITEM,inboxID:c.request.inboxID,token:b("nullthrows")(d.token)});if(!this.$IGMessageInboxStore17(a,e).isEmpty())return a;i=b("nullthrows")((l=c)!=null?(l=l.extraData)!=null?l.threadToken:l:l);f=this.$IGMessageInboxStore16(a,c.request.inboxID,i,d.client_context,d);g=this.$IGMessageInboxStore13({type:j.THREAD,inboxID:c.request.inboxID,token:i});h=this.$IGMessageInboxStore17(f,g);l=(e=h)!=null?(e=e.value)!=null?e.thread:e:e;h=(e=(h=l)!=null?h.last_activity_at:h)!=null?e:d.time_stamp;e=this.$IGMessageInboxStore18(f,c.request.inboxID,i,{token:i,last_activity_at:h});if(l!==null&&l!==void 0){var n=this.getInboxIGID(c.request.inboxID);i=(((f=l)!=null?f.last_seen_at:f)||[]).find(function(a){return a.user_id==n});if(i!==null&&i!==void 0&&(i.item_id===d.client_context||d.sender_id===n)){f=(((h=l)!=null?h.last_seen_at:h)||[]).filter(function(a){return a.user_id!==n});f.push({item_id:d.token,timestamp:d.time_stamp,user_id:n});i=Object.assign({},l,{last_seen_at:f});e=this.$IGMessageInboxStore19(e,g,{thread:i})}}return this.$IGMessageInboxStore20(e,c.request.inboxID,d.client_context,d)}return a;case b("IGMessageDataMutateActionTypes").UPDATE:switch(c.request.type){case j.INBOX:l=b("nullthrows")((h=c)!=null?(h=h.payload)!=null?h.inbox:h:h);f=this.$IGMessageInboxStore13(c.request);g=this.$IGMessageInboxStore17(a,f);e=(i=g)!=null?(i=i.value)!=null?i.inbox:i:i;if(e===null||e===void 0)return a;d=Object.assign({},e,l);return this.$IGMessageInboxStore19(a,f,{inbox:d});case j.THREAD:g=b("nullthrows")((h=c)!=null?(h=h.payload)!=null?h.thread:h:h);i=this.$IGMessageInboxStore13(c.request);e=this.$IGMessageInboxStore17(a,i);f=(l=e)!=null?(l=l.value)!=null?l.thread:l:l;if(f===null||f===void 0)return a;d=Object.assign({},f,g);var o=g.last_seen_at||[];if(o.length>0){var p=o.slice();(f.last_seen_at||[]).map(function(a){o.find(function(b){return b.user_id===a.user_id})||p.push(a)});d.last_seen_at=p}else d.last_seen_at=f.last_seen_at;return this.$IGMessageInboxStore19(a,i,{thread:d});case j.ITEM:e=b("nullthrows")((h=c)!=null?(h=h.payload)!=null?h.item:h:h);l=this.$IGMessageInboxStore13(c.request);g=this.$IGMessageInboxStore17(a,l);i=(f=g)!=null?(f=f.value)!=null?f.item:f:f;if(i===null||i===void 0)return a;d=Object.assign({},i,e);if(d.time_stamp===i.time_stamp&&d.raven_media===i.raven_media)return this.$IGMessageInboxStore19(a,l,{item:d});g=b("nullthrows")((h=c)!=null?(h=h.extraData)!=null?h.threadToken:h:h);f=this.$IGMessageInboxStore16(a,c.request.inboxID,g,d.token,d);e=this.$IGMessageInboxStore17(f,this.$IGMessageInboxStore13({type:j.THREAD,inboxID:c.request.inboxID,token:g})).getValue();h=(i=e)!=null?(i=i.thread)!=null?i.last_activity_at:i:i;e=this.$IGMessageInboxStore18(f,c.request.inboxID,g,{token:g,last_activity_at:h});return this.$IGMessageInboxStore19(e,l,{item:d})}return a;default:return a}};d.$IGMessageInboxStore10=function(a,c,d){__p&&__p();var e=this;d=(d=d.viewer)!=null?d:{};d=d.instagram_message_threads;if(!d)return this.$IGMessageInboxStore9(a,c,{inbox:null});var f=Object.assign({},d),g=a,h=d.nodes;if(h){var i=new Map(),k=c.cursor;if(!k)f.nodes=h.filter(function(a){return a.token!==null&&a.token!==void 0}).map(function(f){var d=b("nullthrows")(f.token);d=e.$IGMessageInboxStore3({type:j.THREAD,inboxID:c.inboxID,token:d});e.$IGMessageInboxStore17(a,d);i.set(d,{thread:Object.assign({},f)});return{token:f.token,last_activity_at:f.last_activity_at}});else{var l,m,n;m=(m=this.$IGMessageInboxStore17(a,this.$IGMessageInboxStore13(c)).value)!=null?m:{};m=(m=m.inbox)!=null?m:{};n=(n=m.nodes)!=null?n:[];var o=-1;if(b("nullthrows")(c.graphqlCursor)===((l=m)!=null?(l=l.page_info)!=null?l.end_cursor:l:l))o=n.length-1;else for(var l=n.length-1;l>=0;l--){var p=this.largeNumberCompare(k.lastEntityTime,b("nullthrows")(n[l].last_activity_at));if(p===0){o=l;break}else if(p===-1)break}if(o===-1)return a;p=o+1;k=0;l=m.page_info;o=n.slice(0,p);while(k<h.length&&p<n.length){m=h[k];var q=m.token;if(q===null||q===void 0){k++;continue}var r=n[p];q===r.token?(o.push(r),p++,k++):this.largeNumberCompare(b("nullthrows")(r.last_activity_at),b("nullthrows")(m.last_activity_at))===1?p++:k++}if(k<h.length){l=d.page_info;while(k<h.length){q=h[k];r=q.token;if(r===null||r===void 0){k++;continue}m=this.$IGMessageInboxStore3({type:j.THREAD,inboxID:c.inboxID,token:r});p=this.$IGMessageInboxStore17(a,m);p.hasValue()||i.set(m,{thread:Object.assign({},q)});o.push({token:q.token,last_activity_at:q.last_activity_at});k++}}f=Object.assign({},d,{nodes:o,page_info:l})}g=this.__handleMap(a,i)}return this.$IGMessageInboxStore9(g,c,{inbox:f})};d.$IGMessageInboxStore11=function(a,c,d){__p&&__p();var e=this;d=d.instagram_message_thread;if(!d)return this.$IGMessageInboxStore9(a,c,{thread:null});var f=Object.assign({},d),g=a;d=d.thread_items;if(d){var h=Object.assign({},d),i=new Map(),k=c.cursor;if(!k)h.nodes=d.nodes.map(function(d){var b=d.token;if(b!==null&&b!==void 0){b=e.$IGMessageInboxStore3({type:j.ITEM,inboxID:c.inboxID,token:b});var f=e.$IGMessageInboxStore17(a,b);f.hasValue()||i.set(b,{item:Object.assign({},d)})}return{token:d.token,time_stamp:d.time_stamp}});else{var l,m,n;m=(m=this.$IGMessageInboxStore17(a,this.$IGMessageInboxStore13(c)).value)!=null?m:{};m=(m=m.thread)!=null?m:{};m=(m=m.thread_items)!=null?m:{};var o=d.nodes;n=(n=m.nodes)!=null?n:[];var p=-1;if(b("nullthrows")(c.graphqlCursor)===((l=m)!=null?(l=l.page_info)!=null?l.end_cursor:l:l))p=n.length-1;else for(var l=n.length-1;l>=0;l--){var q=this.largeNumberCompare(k.lastEntityTime,b("nullthrows")(n[l].time_stamp));if(q===0){p=l;break}else if(q===-1)break}if(p===-1)return a;q=p+1;k=0;l=m.page_info;p=n.slice(0,q);while(k<o.length&&q<n.length){m=o[k];var r=m.token;if(r===null||r===void 0){k++;continue}var s=n[q];r===s.token?(p.push(s),q++,k++):this.largeNumberCompare(b("nullthrows")(s.time_stamp),b("nullthrows")(m.time_stamp))===1?q++:k++}if(k<o.length){l=d.page_info;while(k<o.length){r=o[k];s=r.token;if(s===null||s===void 0){k++;continue}m=this.$IGMessageInboxStore3({type:j.ITEM,inboxID:c.inboxID,token:s});q=this.$IGMessageInboxStore17(a,m);q.hasValue()||i.set(m,{item:Object.assign({},r)});p.push({token:r.token,time_stamp:r.time_stamp});k++}}h=Object.assign({},d,{nodes:p,page_info:l})}f.thread_items=h;g=this.__handleMap(a,i)}return this.$IGMessageInboxStore9(g,c,{thread:f})};d.$IGMessageInboxStore12=function(a,b,c){return this.$IGMessageInboxStore9(a,b,{item:c.instagram_message_thread_item})};d.$IGMessageInboxStore14=function(a,b,c){__p&&__p();var d;b=this.$IGMessageInboxStore13({type:j.INBOX,inboxID:b});var e=this.$IGMessageInboxStore17(a,b);e=(e=e)!=null?(e=e.value)!=null?e.inbox:e:e;if(e===null||e===void 0)return a;d=(d=e.nodes)!=null?d:[];if(d.length>0&&d.find(function(a){return a.token===c})){e=Object.assign({},e,{nodes:d.filter(function(a){return a.token!==c})});return this.$IGMessageInboxStore19(a,b,{inbox:e})}return a};d.$IGMessageInboxStore15=function(a,b,c,d){__p&&__p();var e;b=this.$IGMessageInboxStore13({type:j.THREAD,inboxID:b,token:c});c=this.$IGMessageInboxStore17(a,b);c=(c=c)!=null?(c=c.value)!=null?c.thread:c:c;if(c===null||c===void 0)return a;e=(e=(e=c)!=null?(e=e.thread_items)!=null?e.nodes:e:e)!=null?e:[];if(e.length>0&&e.find(function(a){return a.token===d})){e=Object.assign({},c.thread_items,{nodes:e.filter(function(a){return a.token!==d})});c=Object.assign({},c,{thread_items:e});return this.$IGMessageInboxStore19(a,b,{thread:c})}return a};d.$IGMessageInboxStore18=function(a,c,d,e){__p&&__p();var f;c=this.$IGMessageInboxStore13({type:j.INBOX,inboxID:c});var g=this.$IGMessageInboxStore17(a,c);g=(g=g)!=null?(g=g.value)!=null?g.inbox:g:g;if(g===null||g===void 0)return a;f=(f=g.nodes)!=null?f:[];if(d===e.token){var h=f.find(function(a){return a.token===d});if(h!==null&&h!==void 0&&h.last_activity_at===e.last_activity_at)return a}h=d!==null&&d!==void 0?f.filter(function(a){return d!==a.token}):f;for(f=0;f<h.length;f++)if(this.largeNumberCompare(b("nullthrows")(e.last_activity_at),b("nullthrows")(h[f].last_activity_at))!==-1)break;var i=h.slice(0,f);i.push({token:e.token,last_activity_at:e.last_activity_at});e=Object.assign({},g,{nodes:i.concat(h.slice(f))});return this.$IGMessageInboxStore19(a,c,{inbox:e})};d.$IGMessageInboxStore16=function(a,c,d,e,f){__p&&__p();var g,h,i;d=this.$IGMessageInboxStore13({type:j.THREAD,inboxID:c,token:d});var k=this.$IGMessageInboxStore17(a,d);k=(k=k)!=null?(k=k.value)!=null?k.thread:k:k;if(k===null||k===void 0)return a;i=(i=(i=k)!=null?(i=i.thread_items)!=null?i.nodes:i:i)!=null?i:[];i=e!==null&&e!==void 0?i.filter(function(a){return e!==a.token}):i;var l;for(l=0;l<i.length;l++)if(this.largeNumberCompare(b("nullthrows")(f.time_stamp),b("nullthrows")(i[l].time_stamp))!==-1)break;var m=i.slice(0,l);h=(h=(h=k)!=null?(h=h.direct_story)!=null?h.unseen_count:h:h)!=null?h:0;g=(g=k)!=null?g.direct_story:g;c=this.getInboxIGID(c);if(f.ig_item_type==="RAVEN_MEDIA"&&c!==f.sender_id){var n;if(this.isRavenSeenByInbox(f,(n=(n=k)!=null?n.is_group:n)!=null?n:!1,c)){g={unseen_count:h-1,media_type:(n=f)!=null?(n=n.raven_media)!=null?n.media_type:n:n}}else{g={unseen_count:h+1,media_type:(c=f)!=null?(c=c.raven_media)!=null?c.media_type:c:c}}}m.push({token:f.token,time_stamp:f.time_stamp});n=Object.assign({},k.thread_items,{nodes:m.concat(i.slice(l))});h=Object.assign({},k,{thread_items:n,last_activity_at:n.nodes[0].time_stamp,direct_story:g});return this.$IGMessageInboxStore19(a,d,{thread:h})};d.$IGMessageInboxStore20=function(a,c,d,e){var f=this.$IGMessageInboxStore13({type:j.ITEM,inboxID:c,token:b("nullthrows")(e.token)});if(d===null||d===void 0)return this.$IGMessageInboxStore19(a,f,{item:e});c=this.$IGMessageInboxStore13({type:j.ITEM,inboxID:c,token:d});d=this.$IGMessageInboxStore17(a,c);e=b("LoadObject").withValue({item:e});d.isDeleting()&&(e=e.deleting());d=this.__setEmpty(a,b("immutable").List.of(c));return d.set(f,e)};d.getCached=function(b){return a.prototype.getCached.call(this,this.$IGMessageInboxStore13(this.$IGMessageInboxStore5(b)))};d.$IGMessageInboxStore17=function(a,c){return a.get(c)||b("LoadObject").empty()};d.__setLoading=function(b,c){__p&&__p();var d=[];for(var c=c,e=Array.isArray(c),f=0,c=e?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=c.length)break;g=c[f++]}else{f=c.next();if(f.done)break;g=f.value}g=g;d.push(this.$IGMessageInboxStore13(this.$IGMessageInboxStore5(g)))}return a.prototype.__setLoading.call(this,b,d)};d.$IGMessageInboxStore9=function(a,b,c){b=this.$IGMessageInboxStore13(b);return this.$IGMessageInboxStore19(a,b,c)};d.$IGMessageInboxStore19=function(b,c,d){var e=a.prototype.getCached.call(this,c);if(d instanceof Error)return b.set(c,e.setError(d).done());else return b.set(c,e.setValue(d).removeError().done())};d.$IGMessageInboxStore3=function(a){return JSON.stringify(a)};d.$IGMessageInboxStore13=function(a){return JSON.stringify({type:a.type,inboxID:a.inboxID,token:a.token})};d.$IGMessageInboxStore5=function(a){return JSON.parse(a)};d.largeNumberCompare=function(a,b){if(a.length>b.length)return 1;return a.length<b.length?-1:a===b?0:a>b?1:-1};d.convertTimestamp=function(a){return parseInt(a.slice(0,a.length-3),10)};d.getNowTimestamp=function(){return Date.now().toString()+"000"};d.getInboxIGID=function(a){a=this.getInbox(a).getValue();return(a=a)!=null?(a=a.ig_user)!=null?a.instagram_user_id:a:a};d.getInboxProfilePic=function(a){a=this.getInbox(a).getValue();return(a=a)!=null?(a=a.ig_user)!=null?(a=a.profile_picture)!=null?a.uri:a:a:a};d.getItemType=function(a,b){a=this.getThreadItem(a,b).getValue();return(b=a)!=null?b.ig_item_type:b};d.$IGMessageInboxStore4=function(a){this.$IGMessageInboxStore2.get(a)||(this.$IGMessageInboxStore2.set(a,!0),this.__queueLoadAll(b("immutable").List.of(a)))};d.isMessageExpired=function(a){a=this.largeNumberCompare(a+"000",Date.now().toString());return a<0?!0:!1};d.isRavenSeenByInbox=function(a,b,c){var d;if(c===null||c===void 0)return!1;d=(d=(d=a)!=null?(d=d.raven_media)!=null?d.seen_count:d:d)!=null?d:0;a=(a=(a=a)!=null?(a=a.raven_media)!=null?a.seen_user_ids:a:a)!=null?a:[];if(b)return a.some(function(a){return a===c});else return d>0};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("IGMessageDataDispatcher"))}),null);
__d("CRMEventsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:CRMEventsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setBusinessPresenceID=function(a){this.$1.business_presence_id=a;return this};c.setCrmReminderID=function(a){this.$1.crm_reminder_id=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setIsServerLog=function(a){this.$1.is_server_log=a;return this};c.setPageContactID=function(a){this.$1.page_contact_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReferrerUIComponent=function(a){this.$1.referrer_ui_component=a;return this};c.setReferrerUISurface=function(a){this.$1.referrer_ui_surface=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setUIComponent=function(a){this.$1.ui_component=a;return this};c.setUISurface=function(a){this.$1.ui_surface=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={business_presence_id:!0,crm_reminder_id:!0,error_message:!0,error_trace:!0,event:!0,is_server_log:!0,page_contact_id:!0,page_id:!0,referrer_ui_component:!0,referrer_ui_surface:!0,time:!0,ui_component:!0,ui_surface:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MessengerAdsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerAdsLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdID=function(a){this.$1.ad_id=a;return this};c.setAdType=function(a){this.$1.ad_type=a;return this};c.setAdfinderAccountsReturned=function(a){this.$1.adfinder_accounts_returned=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setAdfinderAdsReturned=function(a){this.$1.adfinder_ads_returned=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setAdsReturnedCount=function(a){this.$1.ads_returned_count=a;return this};c.setAppID=function(a){this.$1.app_id=a;return this};c.setAsyncSource=function(a){this.$1.async_source=a;return this};c.setClientUserID=function(a){this.$1.client_userid=a;return this};c.setConversationLength=function(a){this.$1.conversation_length=a;return this};c.setErrorCode=function(a){this.$1.error_code=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFailedRules=function(a){this.$1.failed_rules=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setGkStatus=function(a){this.$1.gk_status=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setImpGenerationTime=function(a){this.$1.imp_generation_time=a;return this};c.setImpressionPrice=function(a){this.$1.impression_price=a;return this};c.setIsSubsequent=function(a){this.$1.is_subsequent=a;return this};c.setMessageFolder=function(a){this.$1.message_folder=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setPassedRules=function(a){this.$1.passed_rules=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setRulesPassed=function(a){this.$1.rules_passed=a;return this};c.setSkippedRules=function(a){this.$1.skipped_rules=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setTime=function(a){this.$1.time=a;return this};c.setUserEventName=function(a){this.$1.user_event_name=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};c.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};return a}();var g={ad_id:!0,ad_type:!0,adfinder_accounts_returned:!0,adfinder_ads_returned:!0,ads_returned_count:!0,app_id:!0,async_source:!0,client_userid:!0,conversation_length:!0,error_code:!0,error_message:!0,event:!0,failed_rules:!0,gk_status:!0,imp_generation_time:!0,impression_price:!0,is_subsequent:!0,message_folder:!0,message_id:!0,page_id:!0,passed_rules:!0,rules_passed:!0,skipped_rules:!0,time:!0,user_event_name:!0,weight:!0};e.exports=a}),null);
__d("MessengerPollGroupCreateTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:MessengerPollGroupCreateLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:MessengerPollGroupCreateLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:MessengerPollGroupCreateLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setEvent=function(a){this.$1.event=a;return this};c.setGroupMembers=function(a){this.$1.group_members=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setOption=function(a){this.$1.option=a;return this};c.setQuestionID=function(a){this.$1.question_id=a;return this};c.setThreadIDChild=function(a){this.$1.thread_id_child=a;return this};c.setThreadIDParent=function(a){this.$1.thread_id_parent=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={event:!0,group_members:!0,option:!0,question_id:!0,thread_id_child:!0,thread_id_parent:!0,time:!0,weight:!0};e.exports=a}),null);
__d("PagesCommsInboxTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:PagesCommsInboxLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setClientTime=function(a){this.$1.client_time=a;return this};c.setCustomerID=function(a){this.$1.customer_id=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setFunnel=function(a){this.$1.funnel=a;return this};c.setMessageID=function(a){this.$1.message_id=a;return this};c.setMessagingPlatform=function(a){this.$1.messaging_platform=a;return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={client_time:!0,customer_id:!0,event:!0,funnel:!0,message_id:!0,messaging_platform:!0,page_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("ServicesLeadGenBookableTasksSurveyTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1={}}var c=a.prototype;c.log=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,b("Banzai").BASIC)};c.logVital=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,b("Banzai").VITAL)};c.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:ServicesLeadGenBookableTasksSurveyLoggerConfig",this.$1,{signal:!0})};c.clear=function(){this.$1={};return this};c.getData=function(){return babelHelpers["extends"]({},this.$1)};c.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};c.setAdditionalData=function(a){this.$1.additional_data=b("GeneratedLoggerUtils").serializeMap(a);return this};c.setCurrentView=function(a){this.$1.current_view=a;return this};c.setErrorMessage=function(a){this.$1.error_message=a;return this};c.setErrorTrace=function(a){this.$1.error_trace=a;return this};c.setEvent=function(a){this.$1.event=a;return this};c.setOtherBookableTasks=function(a){this.$1.other_bookable_tasks=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setPageID=function(a){this.$1.page_id=a;return this};c.setReferrer=function(a){this.$1.referrer=a;return this};c.setSelectedBookableTasks=function(a){this.$1.selected_bookable_tasks=b("GeneratedLoggerUtils").serializeVector(a);return this};c.setServicesCategory=function(a){this.$1.services_category=a;return this};c.setSessionID=function(a){this.$1.session_id=a;return this};c.setTime=function(a){this.$1.time=a;return this};c.setVC=function(a){this.$1.vc=a;return this};c.setWeight=function(a){this.$1.weight=a;return this};return a}();c={additional_data:!0,current_view:!0,error_message:!0,error_trace:!0,event:!0,other_bookable_tasks:!0,page_id:!0,referrer:!0,selected_bookable_tasks:!0,services_category:!0,session_id:!0,time:!0,vc:!0,weight:!0};e.exports=a}),null);
__d("MercuryShareLinkUploader",["ArbiterMixin","AsyncRequest","CSS","DOM","Event","Form","URLScraper","isEmpty","mixin"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.__initialize.apply(babelHelpers.assertThisInitialized(b),arguments);return b}var d=c.prototype;d.__initialize=function(a,c,d,e,f){this.$MercuryShareLinkUploader1=a,this.$MercuryShareLinkUploader2=c,this.$MercuryShareLinkUploader3=d,this.$MercuryShareLinkUploader4=f,this.$MercuryShareLinkUploader5=!1,this.$MercuryShareLinkUploader6=null,this.$MercuryShareLinkUploader7=null,b("Event").listen(e,"click",this.close.bind(this)),b("Event").listen(f,"keyup",function(){f.value.length||this.$MercuryShareLinkUploader8.enable()}.bind(this)),this.$MercuryShareLinkUploader8=new(b("URLScraper"))(f),this.$MercuryShareLinkUploader8.subscribe("match",function(a,b){this.loadShare(b&&b.url)}.bind(this))};d.getAttachData=function(){return this.loadAttachData(this.$MercuryShareLinkUploader5,this.$MercuryShareLinkUploader1,this.$MercuryShareLinkUploader4)};d.getShareDataFromStage=function(a,c){__p&&__p();a=b("Form").serialize(c);c=a.attachment&&a.attachment.params;if(!c)return null;if(c instanceof Object){var d=[];d.push(c[0]);d.push(c[1]);c=d}return{params:c,type:a.attachment.type}};d.loadAttachData=function(a,c,d){__p&&__p();if(!a)return null;a=b("Form").serialize(c);c=a.attachment&&a.attachment.params;var e=a.attachment&&a.attachment.type;a=a.link_metrics?a.link_metrics.no_image:!0;if(!c||b("isEmpty")(c)||!e)return null;d=d.value;if(d.indexOf(c.url)===-1)return{share_params:c,share_type:e};return!c.summary&&!c.favicon&&a&&c.title&&c.url&&c.url.substr(0,c.title.length)===c.title?null:{share_params:c,share_type:e}};d.check=function(){this.$MercuryShareLinkUploader8.check()};d.close=function(){this.$MercuryShareLinkUploader9(),this.$MercuryShareLinkUploader8.disable(),this.inform("closed")};d.clear=function(){this.$MercuryShareLinkUploader9(),this.$MercuryShareLinkUploader8.enable()};d.enable=function(){this.$MercuryShareLinkUploader8.enable()};d.disable=function(){this.$MercuryShareLinkUploader8.disable()};d.loadShare=function(a){this.$MercuryShareLinkUploader6=a,this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort(),this.$MercuryShareLinkUploader7=new(b("AsyncRequest"))().setMethod("POST").setURI("/ajax/share_scrape.php").setData({u:a}).setHandler(this.$MercuryShareLinkUploader10.bind(this).bind(null,a)).setStatusElement(this.$MercuryShareLinkUploader3),this.$MercuryShareLinkUploader7.send(),this.inform("link-detected")};d.$MercuryShareLinkUploader10=function(a,c){__p&&__p();if(this.$MercuryShareLinkUploader6!==a)return;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;b("CSS").show(this.$MercuryShareLinkUploader1);b("DOM").empty(this.$MercuryShareLinkUploader2);b("DOM").setContent(this.$MercuryShareLinkUploader2,c.payload);this.$MercuryShareLinkUploader5=!0;if(!this.getAttachData()){this.close();return}};d.$MercuryShareLinkUploader9=function(){b("CSS").hide(this.$MercuryShareLinkUploader1),this.$MercuryShareLinkUploader5=!1,this.$MercuryShareLinkUploader6=null,this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort(),this.$MercuryShareLinkUploader7=null,this.$MercuryShareLinkUploader8.reset()};return c}(b("mixin")(b("ArbiterMixin")));e.exports=a}),null);
__d("ChatShareLinkUploader",["AsyncRequest","CSS","DOM","Event","MercuryAttachmentTemplates","MercuryShareLinkUploader","URLScraper","XShareScrapeAsyncController"],(function(a,b,c,d,e,f){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__initialize=function(a,c,d){this.$ChatShareLinkUploader1=a,this.$ChatShareLinkUploader2=c,this.$ChatShareLinkUploader3=d,this.$ChatShareLinkUploader4=!1,this.$ChatShareLinkUploader5=null,this.$ChatShareLinkUploader6=!1,b("Event").listen(c,"keyup",function(){this.getInputValue().length||this.$ChatShareLinkUploader7.enable()}.bind(this)),this.$ChatShareLinkUploader7=new(b("URLScraper"))(c,null),this.$ChatShareLinkUploader7.subscribe("match",function(a,b){this.loadShare(b&&b.url)}.bind(this)),this.$ChatShareLinkUploader8=1337,this.$ChatShareLinkUploader9=null};d.getInputValue=function(){return this.$ChatShareLinkUploader2.value};d.getAttachData=function(){return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2)};d.getShareData=function(){return!this.$ChatShareLinkUploader4?null:this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1)};d.close=function(){this.$ChatShareLinkUploader10(),this.$ChatShareLinkUploader7.disable(),this.inform("closed")};d.clear=function(){this.$ChatShareLinkUploader10(),this.$ChatShareLinkUploader7.enable()};d.$ChatShareLinkUploader10=function(){var a=this.$ChatShareLinkUploader9;delete this.$ChatShareLinkUploader9;a&&(b("DOM").remove(a),this.inform("dom-updated"));this.$ChatShareLinkUploader11();this.$ChatShareLinkUploader4=!1;this.$ChatShareLinkUploader6=!1;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader7&&this.$ChatShareLinkUploader7.reset()};d.loadShareFromParams=function(a,c){this.$ChatShareLinkUploader6=!0,this.$ChatShareLinkUploader12(new(b("AsyncRequest"))().setMethod("POST").setURI("/ajax/share_params.php").setData({chat:!0,share_type:a,share_params:c}))};d.__getLoadShareURI=function(){return b("XShareScrapeAsyncController").getURIBuilder().getURI()};d.loadShare=function(a,c){this.$ChatShareLinkUploader12(new(b("AsyncRequest"))(this.__getLoadShareURI()).setMethod("POST").setData({chat:!0,extra_params:JSON.stringify(c),u:a}),a)};d.loadedFromFeed=function(){return this.$ChatShareLinkUploader6};d.$ChatShareLinkUploader11=function(){return++this.$ChatShareLinkUploader8};d.$ChatShareLinkUploader13=function(){return this.$ChatShareLinkUploader8};d.$ChatShareLinkUploader12=function(a,c){__p&&__p();var d=this;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var e=b("MercuryAttachmentTemplates")[":fb:mercury:share-link-row"].build();this.$ChatShareLinkUploader9&&b("DOM").remove(this.$ChatShareLinkUploader9);this.$ChatShareLinkUploader9=e.getRoot();b("Event").listen(e.getNode("closeFileUpload"),"click",function(a){d.close(),a.kill()});b("DOM").appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader9);b("CSS").show(this.$ChatShareLinkUploader1);this.inform("dom-updated");var f=this.$ChatShareLinkUploader11();this.$ChatShareLinkUploader5=a.setHandler(function(a){return d.$ChatShareLinkUploader14(f,a,c)});this.$ChatShareLinkUploader5.send();this.inform("link-detected")};d.$ChatShareLinkUploader14=function(a,c,d){__p&&__p();if(this.$ChatShareLinkUploader13()!==a)return;this.$ChatShareLinkUploader5=null;b("DOM").appendContent(this.$ChatShareLinkUploader9,c.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=!0;this.inform("share-loaded");if(!this.getAttachData()){this.close();return}b("CSS").addClass(this.$ChatShareLinkUploader9,"done")};return c}(b("MercuryShareLinkUploader"));e.exports=a}),null);
__d("ChatFileUploaderMixin",["React","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c={propTypes:{attachmentsShelf:a.object,onFileUploaderMounted:a.func,onUploadFinished:a.func,onUpdateAttachmentsShelf:a.func,onSubmit:a.func},setUpSubscriptionsHandler:function(a){this._uploader=a,this._subscriptions=new(b("SubscriptionsHandler"))(),this._subscriptions.addSubscriptions(this._uploader.subscribe(["all-uploads-completed","upload-canceled"],this._handleUploadFinished),this._uploader.subscribe("dom-updated",this._handleUpdateAttachmentsShelf),this._uploader.subscribe("submit",this._handleSubmit)),this.props.onFileUploaderMounted(this._uploader)},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release(),this.props.uploaderIsFromHigherLevel||this._uploader&&this._uploader.destroy()},isUploading:function(){return this._uploader.isUploading()},getAttachments:function(){return this._uploader.getAttachments()},getImageFiles:function(){return this._uploader.getImageFiles()},getVideoFiles:function(){return this._uploader.getVideoFiles()},getAudioFiles:function(){return this._uploader.getAudioFiles()},getFiles:function(){return this._uploader.getFiles()},removeAttachments:function(){return this._uploader.removeAttachments()},_handleUploadFinished:function(){if(this.props.onUploadFinished){var a;(a=this.props).onUploadFinished.apply(a,arguments)}},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf){var a;(a=this.props).onUpdateAttachmentsShelf.apply(a,arguments)}},_handleSubmit:function(){if(this.props.onSubmit){var a;(a=this.props).onSubmit.apply(a,arguments)}}};e.exports=c}),null);
__d("MercuryLWARenderer",["MercuryConfig","MessengerLightweightActionUtils","MessengerTextWithEntities.react","React","TextWithEntities.react"],(function(a,b,c,d,e,f){"use strict";a={renderCollapsedText:function(a){var c=null;b("MercuryConfig").MessengerNewEmojiGK?c=b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("MessengerLightweightActionUtils").getCollapsedLWAText(a)}):c=b("React").createElement(b("TextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:b("MessengerLightweightActionUtils").getCollapsedLWAText(a)});return b("React").createElement("span",null,c)}};e.exports=a}),null);
__d("MNCommerceLoggingConstants",[],(function(a,b,c,d,e,f){a={DIALOG_SURFACE:{CHECKOUT_ORDER_CONFIG:"checkout_order_config",SHIPMENT:"shipment",RECEIPT:"receipt",UNLINK:"unlink",UNLINK_ERROR:"unlink_error",MANAGE:"manage"}};e.exports=a}),null);
__d("MNCommercePromotionStateActions",["MessengerDispatcher","MNCommerceActionTypes"],(function(a,b,c,d,e,f){"use strict";a={stateLoaded:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.LOADED,state:a})},stateLoadError:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR,pageID:a})},stateReload:function(a){b("MessengerDispatcher").dispatch({type:b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD,pageID:a})}};e.exports=a}),null);
__d("MNCommercePromotionBlockDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionBlockController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.block=function(a,c){a=b("XMNCommercePromotionBlockController").getURIBuilder().setString("page_id",a).setString("type",c).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};c.$1=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateReload(a)};c.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};return a}();e.exports=new a()}),null);
__d("MNCommerceButton.react",["MessengerDialogButton.react","MessengerEnvironment","React","XUIButton.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogButton.react"):b("XUIButton.react"),d=this.props.type;d||(d=this.props.type==="confirm"?"primary":"secondary");a=a?"default":this.props.use;d=babelHelpers["extends"]({},this.props,{type:d,use:a});return b("React").createElement(c,d,this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceAttachmentConstants",[],(function(a,b,c,d,e,f){a={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:"subTotal",SHIPPING:"shippingCost",TAX:"tax",TOTAL:"totalCost"}};e.exports=a}),null);
__d("MNCommerceDialog.react",["cx","LayerFadeOnHide","LayerHideOnEscape","MessengerDialog.react","MessengerEnvironment","MNCommerceAttachmentConstants","React","XUIDialog.react","emptyFunction","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";a=b("React").PropTypes;c=b("React").createClass({displayName:"MNCommerceDialog",propTypes:{onToggle:a.func,shown:a.bool,width:a.number.isRequired},getDefaultProps:function(){return{onToggle:b("emptyFunction"),repositionOnUpdate:!0,shown:!0,width:b("MessengerEnvironment").messengerui?b("MNCommerceAttachmentConstants").MDOTCOMDIALOG.WIDTH:b("MNCommerceAttachmentConstants").DIALOG.WIDTH}},componentDidUpdate:function(){this.props.repositionOnUpdate&&setTimeout(function(){this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer&&this.refs.dialog.layer.updatePosition()}.bind(this),0)},render:function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialog.react"):b("XUIDialog.react");return b("React").createElement(c,babelHelpers["extends"]({behaviors:{LayerFadeOnHide:b("LayerFadeOnHide"),LayerHideOnEscape:b("LayerHideOnEscape")}},this.props,{className:b("joinClasses")(this.props.className,a?"_3rx0":""),ref:"dialog"}),this.props.children)}});e.exports=c}),null);
__d("MNCommerceDialogBody.react",["MessengerDialogBody.react","MessengerEnvironment","React","XUIDialogBody.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?b("MessengerDialogBody.react"):b("XUIDialogBody.react");return b("React").createElement(a,this.props,this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceDialogTitle.react",["MessengerDialogHeaderReact.re","MessengerEnvironment","React","XUIDialogTitle.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MessengerDialogHeaderReact.re").component;a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;a=a?g:b("XUIDialogTitle.react");return b("React").createElement(a,this.props,this.props.children)};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceDetailsDialog.react",["cx","fbt","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogTitle.react","React","XUIButton.react","XUISpinner.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){return b("React").createElement("div",{className:"_4y9b"},b("React").createElement("p",{className:"_4y9c"},h._("Sorry, Something Went Wrong")),b("React").createElement("p",{className:"_4y9d"},d.props.errorMessage),b("React").createElement(b("XUIButton.react"),{onClick:d.props.onTryAgain,label:h._("Try Again")}))},d.$1=function(){return b("React").createElement("div",{className:"_4y9e"},b("React").createElement(b("XUISpinner.react"),{background:"light",size:"large",paused:!1}))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=null;this.props.loading?a=this.$1():this.props.error?a=this.$2():a=this.props.children;return b("React").createElement(b("MNCommerceDialog.react"),{className:this.props.className,modal:!0,onToggle:this.props.onToggle,shown:this.props.shown},this.$3(),b("React").createElement(b("MNCommerceDialogBody.react"),{useCustomPadding:!0},a))};d.$3=function(){return this.props.title?b("React").createElement(b("MNCommerceDialogTitle.react"),null,this.props.title):null};return c}(b("React").Component);c.propTypes={error:a.object,errorMessage:a.node,loading:a.bool.isRequired,onToggle:a.func,onTryAgain:a.func,title:a.node,shown:a.bool.isRequired};c.defaultProps={shown:!1};e.exports=c}),null);
__d("MNCommerceDialogFooter.react",["cx","MessengerDialogFooter.react","MessengerEnvironment","React","XUIDialogFooter.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerDialogFooter.react"):b("XUIDialogFooter.react"),d,e=this.props.children;a&&(d=b("React").Children.count(this.props.children),e=b("React").Children.map(this.props.children,function(a,c){return!a?null:b("React").cloneElement(a,{className:b("joinClasses")(a.props.className,"_4ec0"),type:c===0&&d===2?"secondary":"primary"})}));return b("React").createElement(c,this.props,e)};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommercePromotionManageBlockDialog.react",["fbt","Link.react","MessengerEnvironment","MessengerRadioList.react","MNCommerceButton.react","MNCommerceDetailsDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceBlockTypeJSInstance","React","URI","WorkModeConfig","XUIRadioList.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("MessengerRadioList.react").Item,i=b("XUIRadioList.react").Item;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){__p&&__p();var d;d=a.call(this,b,c)||this;d.onTypeChange=function(a){d.setState({type:a})};d.$3=function(a){a=d.props;a.onToggle(!1);if(!a.onConfirmButtonClick)return;var b=a.pageID;a.onConfirmButtonClick(b,d.state.type)};d.state=d.$1();return d}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){this.setState(this.$1(a))};d.$1=function(a){a=a||this.props;var c=b("MNCommerceBlockTypeJSInstance").ALL;(a.isAllBlocked||a.isPromotionBlocked)&&(c=b("MNCommerceBlockTypeJSInstance").NONE);return{type:c}};d.render=function(){var a=this.props.merchantName||"";a=g._("Manage messages from {label for merchant name}",[g._param("label for merchant name",a)]);var c=g._("Cancel"),d=g._("Confirm"),e=g._("Manage Options couldn't be shown."),f=b("WorkModeConfig").is_work_user?new(b("URI"))("https://facebook.com/help/work/1731361900459513").setSubdomain(b("WorkModeConfig").company_subdomain||""):new(b("URI"))("https://www.facebook.com/help/389645087895231");f=b("React").createElement(b("Link.react"),{href:f,target:"_blank"},g._("Learn More"));return b("React").createElement(b("MNCommerceDetailsDialog.react"),babelHelpers["extends"]({errorMessage:e,onToggle:this.props.onToggle,shown:this.props.shown},this.props),b("React").createElement(b("MNCommerceDialogTitle.react"),{showCloseButton:!0},a),b("React").createElement(b("MNCommerceDialogBody.react"),null,this.$2()),b("React").createElement(b("MNCommerceDialogFooter.react"),{leftContent:f},b("React").createElement(b("MNCommerceButton.react"),{label:c,onClick:this.props.onCancelButtonClick,use:"default"}),b("React").createElement(b("MNCommerceButton.react"),{label:d,onClick:this.$3,use:"confirm"})))};d.$2=function(){var a=b("MessengerEnvironment").messengerui,c=a?b("MessengerRadioList.react"):b("XUIRadioList.react");a=a?h:i;return b("React").createElement(c,{selectedValue:this.state.type,onValueChange:this.onTypeChange},b("React").createElement(a,{value:b("MNCommerceBlockTypeJSInstance").ALL},g._("Receive all messages")),b("React").createElement(a,{value:b("MNCommerceBlockTypeJSInstance").NONE},g._("Turn off all messages")))};return c}(b("React").Component);c.propTypes={isAllBlocked:a.bool,isPromotionBlocked:a.bool,error:a.object,loading:a.bool.isRequired,merchantName:a.string,onCancelButtonClick:a.func,onConfirmButtonClick:a.func.isRequired,pageID:a.string};e.exports=c}),null);
__d("MNCommerceCacheTimeoutLimits",[],(function(a,b,c,d,e,f){"use strict";a=Object.freeze({SUCCESS_TIMEOUT:10,ERROR_TIMEOUT:1});e.exports=a}),null);
__d("MNCommercePromotionStateDataManager",["AsyncRequest","MNCommercePromotionStateActions","XMNCommercePromotionStateController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.fetchPromotionState=function(a){a=b("XMNCommercePromotionStateController").getURIBuilder().setString("page_id",a).getURI();new(b("AsyncRequest"))().setURI(a).setHandler(this.$1).setErrorHandler(this.$2).send()};c.$1=function(a){var c=a.getRequest().uri.getQueryData();c=c.page_id;a.payload.pageID=c;b("MNCommercePromotionStateActions").stateLoaded(a.payload)};c.$2=function(a){a=a.getRequest().uri.getQueryData();a=a.page_id;b("MNCommercePromotionStateActions").stateLoadError(a)};return a}();e.exports=new a()}),null);
__d("MNCommercePromotionStateStore",["Cache","FluxStore","LoadObject","MessengerDispatcher","MNCommerceActionTypes","MNCommerceCacheTimeoutLimits","MNCommercePromotionStateDataManager"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("MessengerDispatcher"))||this;c.$MNCommercePromotionStateStore1=new(b("Cache"))();return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();var c=a.type,d=a.pageID||a.state&&a.state.pageID;switch(c){case b("MNCommerceActionTypes").PROMOTION_STATE.LOADED:c=a.state;this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").empty().setValue(c),null,b("MNCommerceCacheTimeoutLimits").SUCCESS_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.LOAD_ERROR:this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").empty().setError(new Error("Unable to load permissions for: "+d)),null,b("MNCommerceCacheTimeoutLimits").ERROR_TIMEOUT);this.__emitChange();break;case b("MNCommerceActionTypes").PROMOTION_STATE.RELOAD:d&&(this.$MNCommercePromotionStateStore1.set(d,b("LoadObject").loading()),b("MNCommercePromotionStateDataManager").fetchPromotionState(d));this.__emitChange();break}};d.getPromotionState=function(a){a&&!this.$MNCommercePromotionStateStore1.has(a)&&(this.$MNCommercePromotionStateStore1.set(a,b("LoadObject").loading().setValue({pageID:a})),b("MNCommercePromotionStateDataManager").fetchPromotionState(a));return this.$MNCommercePromotionStateStore1.get(a)||b("LoadObject").empty()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("MNCommercePromotionManageBlockDialogContainer.react",["MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialog.react","MNCommercePromotionStateActions","MNCommercePromotionStateStore","PureStoreBasedStateMixin","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").createClass({displayName:"MNCommercePromotionManageBlockDialogContainer",mixins:[b("PureStoreBasedStateMixin")(b("MNCommercePromotionStateStore"))],statics:{calculateState:function(){var a=b("MNCommerceDialogStateStore").getState(),c=null;a&&(c=a.pageID);var d=b("MNCommercePromotionStateStore").getPromotionState(c);return{shown:!!a,loading:d.isLoading(),pageID:c,promotionState:d.getValue(),error:d.getError()}}},render:function(){var a=this.state.promotionState;return b("React").createElement(b("MNCommercePromotionManageBlockDialog.react"),{error:this.state.error,isAllBlocked:a&&a.is_all_blocked,isPromotionBlocked:a&&a.is_promotion_blocked,loading:this.state.loading,merchantName:a&&a.name,onCancelButtonClick:this._hideDialog,onToggle:this._onToggle,pageID:this.state.pageID,onTryAgain:this._onTryAgainClick,onConfirmButtonClick:this._handleConfirmButtonClick,shown:this.state.shown})},_onToggle:function(a){a||this._hideDialog()},_onTryAgainClick:function(){b("MNCommercePromotionStateActions").stateReload(this.state.pageID)},_hideDialog:function(){b("MNCommerceDialogStateActions").hideDialog()},_handleConfirmButtonClick:function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)}});e.exports=a}),null);
__d("MNCommerceUnlinkDialog.react",["fbt","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=g._("Cancel"),c=g._("Turn Off");return b("React").createElement(b("MNCommerceDialog.react"),{onToggle:this.props.onToggle,shown:this.props.shown},b("React").createElement(b("MNCommerceDialogTitle.react"),{showCloseButton:!1},g._("Unlink account?")),b("React").createElement(b("MNCommerceDialogBody.react"),null,b("React").createElement("div",null,g._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),b("React").createElement(b("MNCommerceDialogFooter.react"),null,b("React").createElement(b("MNCommerceButton.react"),{label:a,onClick:this.props.onCancelButtonClick,use:"default"}),b("React").createElement(b("MNCommerceButton.react"),{label:c,onClick:this.props.onTurnOffButtonClick,use:"confirm"})))};return c}(b("React").Component);c.propTypes={onCancelButtonClick:a.func,onTurnOffButtonClick:a.func};e.exports=c}),null);
__d("MNCommerceUnlinkErrorDialog.react",["fbt","MNCommerceAttachmentConstants","MNCommerceButton.react","MNCommerceDialog.react","MNCommerceDialogBody.react","MNCommerceDialogFooter.react","MNCommerceDialogTitle.react","MNCommerceErrors","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=g._("OK"),c=null,d=null;switch(this.props.errorType){case b("MNCommerceErrors").ALREADY_UNLINKED:d=b("React").createElement("div",null,g._("Updates Are Already Off"));c=b("React").createElement("div",null,g._("You aren't getting updates in Messenger."));break;default:d=b("React").createElement("div",null,g._("Couldn't Turn Off Updates"));c=b("React").createElement("div",null,g._("Sorry, something went wrong. Please try again."));break}return b("React").createElement(b("MNCommerceDialog.react"),{onToggle:this.props.onToggle,shown:this.props.shown,width:b("MNCommerceAttachmentConstants").UNLINK_ERROR_DIALOG.WIDTH},b("React").createElement(b("MNCommerceDialogTitle.react"),null,d),b("React").createElement(b("MNCommerceDialogBody.react"),null,c),b("React").createElement(b("MNCommerceDialogFooter.react"),null,b("React").createElement(b("MNCommerceButton.react"),{label:a,onClick:this.props.onOkayButtonClick,use:"confirm"})))};return c}(b("React").Component);c.propTypes={errorType:a.number,onOkayButtonClick:a.func};e.exports=c}),null);
__d("MNCommerceUnlinkDialogContainer.react",["BanzaiLogger","MNCommerceDialogStateActions","MNCommerceDialogStateStore","MNCommerceLoggerEvents","MNCommerceLoggingConstants","MNCommerceUnlinkDialog.react","MNCommerceUnlinkErrorDialog.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){a||d.$2()},d.$2=function(){b("MNCommerceDialogStateActions").hideDialog()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("MNCommerceDialogStateStore").getState();if(a&&a.errorType){b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:b("MNCommerceLoggerEvents").DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK_ERROR})});return b("React").createElement(b("MNCommerceUnlinkErrorDialog.react"),{onToggle:this.$1,shown:!!a,errorType:a.errorType,onOkayButtonClick:this.$2})}else{b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:b("MNCommerceLoggerEvents").DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK})});return b("React").createElement(b("MNCommerceUnlinkDialog.react"),{onToggle:this.$1,shown:!!a,onCancelButtonClick:this.$2,onTurnOffButtonClick:a&&a.onTurnOffButtonClick})}};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceUnlinkDataManager",["AsyncRequest","MNCommerceDialogStateActions","MNCommerceUnlinkDialogContainer.react","XMNCommerceUnlinkController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){function a(){}var c=a.prototype;c.unlink=function(a,c){a=b("XMNCommerceUnlinkController").getURIBuilder().setString("page_id",a).setString("user_id",c).getURI();new(b("AsyncRequest"))().setURI(a).setErrorHandler(this.$1).send()};c.$1=function(a){b("MNCommerceDialogStateActions").showDialog(b("MNCommerceUnlinkDialogContainer.react"),{errorType:a.error})};return a}();e.exports=new a()}),null);
__d("MNCommerceLogMessageUtils",["cx","fbt","invariant","BanzaiLogger","CurrentUser","Link.react","MercuryIDs","MessengerState.bs","MNCommerceDialogStateActions","MNCommerceLoggerEvents","MNCommerceLoggingConstants","MNCommercePromotionBlockDataManager","MNCommercePromotionManageBlockDialogContainer.react","MNCommerceReplyTypes","MNCommerceUnlinkDataManager","MNCommerceUnlinkDialogContainer.react","React","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=function(){__p&&__p();function a(){}var c=a.prototype;c.isCommercePageAdminMessage=function(a){return!!(a&&a.log_message_data&&(a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_LINK||a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_UNLINK))};c.getCommercePageManage=function(a,c){__p&&__p();var d=null;if(b("gkx")("678671")){var e=function(){var c=b("MercuryIDs").getUserIDFromParticipantID(a.author),d=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)};b("MNCommerceDialogStateActions").showDialog(b("MNCommercePromotionManageBlockDialogContainer.react"),{pageID:c,onConfirmButtonClick:d});b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:b("MNCommerceLoggerEvents").DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.MANAGE})})};d=b("React").createElement(b("Link.react"),{className:(c?"":"_2w2m")+(c?" _1jvn":""),onClick:e},h._("Manage"))}else if(a.log_message_data.replyType===b("MNCommerceReplyTypes").COMMERCE_LINK){e=function(){__p&&__p();var c=b("MercuryIDs").getUserIDFromParticipantID(a.author),d=b("MessengerState.bs").getThreadMetaNow(b("CurrentUser").getID(),a.thread_id);d||i(0,3713,a.thread_id);var e=null;d.participants.every(function(c){if(c!==a.author){e=b("MercuryIDs").getUserIDFromParticipantID(c);return!1}return!0});d=function(){b("MNCommerceDialogStateActions").hideDialog(),b("MNCommerceUnlinkDataManager").unlink(c,e)};b("MNCommerceDialogStateActions").showDialog(b("MNCommerceUnlinkDialogContainer.react"),{onTurnOffButtonClick:d});b("BanzaiLogger").log("MessengerCommerceLoggerConfig",{event:b("MNCommerceLoggerEvents").DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:b("MNCommerceLoggingConstants").DIALOG_SURFACE.UNLINK})})};d=b("React").createElement(b("Link.react"),{className:(c?"":"_2w2m")+(c?" _1jvn":""),onClick:e},h._("Turn Off"))}return b("React").createElement("span",null,a.log_message_body," ",d)};return a}();e.exports=new a()}),null);
__d("LinkCTAXMATAsyncLink.react",["AsyncRequest","FDSLink.react","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onClick=function(){new(b("AsyncRequest"))().setURI(d.props.uri).setMethod("POST").send()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){return b("React").createElement(b("FDSLink.react"),{onClick:this.onClick},this.props.text)};return c}(b("React").Component);e.exports=a}),null);
__d("MNCommerceReportFlowType",[],(function(a,b,c,d,e,f){a=Object.freeze({HIDE:"hide",REPORT:"report",WHY:"why",USEFUL:"useful",WHAT:"what"});e.exports=a}),null);
__d("MNAdsMessageUtils",["ix","cx","fbt","Bootloader","FBJSON","Image.react","Link.react","MercuryIDs","MessagingGenericAdminTextType","MessengerPopoverMenu.react","MNCommerceDialogStateActions","MNCommercePromotionBlockDataManager","MNCommerceReportFlowType","QE2Logger","React","ReactXUIMenu","XAsyncRequest","XMessengerDotComSponsoredMessagesXOutReportMutationController","XMessengerDotComSponsoredMessagesXOutSubmitPageController","fbglyph","getPageIDFromThreadID","gkx"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("ReactXUIMenu").Item,k="offsite_ad";a=function(){__p&&__p();function a(){}var c=a.prototype;c.isAdsAdminMessage=function(a){return a&&a.log_message_data&&a.log_message_data.message_type&&a.log_message_data.message_type===b("MessagingGenericAdminTextType").AD_MANAGE_MESSAGE};c.isOffsiteAd=function(a){__p&&__p();if(a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_properties){a=b("FBJSON").parse(a.log_message_data.untypedData.ad_properties);for(var a=a,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;if(e===k)return!0}}return!1};c.getadPreferencesUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_preferences_link?a.log_message_data.untypedData.ad_preferences_link:""};c.hasAdProperties=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_properties?!0:!1};c.getadId=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_id?a.log_message_data.untypedData.ad_id:null};c.getadClientToken=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_client_token?a.log_message_data.untypedData.ad_client_token:null};c.getAdsPageManage=function(a,c){__p&&__p();var d=this,e=null;if(b("gkx")("678671"))if(a.is_sponsored&&b("gkx")("678672")){var f=this.getadId(a),h=this.getadClientToken(a),k=function(){__p&&__p();var c=b("getPageIDFromThreadID")(a.thread_id);c||(c=b("MercuryIDs").getUserIDFromParticipantID(a.author));if(f!==null){var d=b("XMessengerDotComSponsoredMessagesXOutReportMutationController").getURIBuilder().setString("ad_id",f).setString("ad_client_token",h).getURI();new(b("XAsyncRequest"))(d).setHandler(function(a){(a.payload.err||a.payload===!1)&&b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(i._("We Couldn't Hide This Ad. Please try again later."))},"MNAdsMessageUtils")}).setMethod("POST").send()}var e=function(a){if(h!==null){a=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",h).setString("selected_option_type",a).setString("event_type",b("MNCommerceReportFlowType").HIDE).getURI();new(b("XAsyncRequest"))(a).setMethod("POST").send()}};b("Bootloader").loadModules(["MNAdsHideAdDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{onConfirmButtonClick:e,pageID:c})},"MNAdsMessageUtils")},l=function(){__p&&__p();var c=b("getPageIDFromThreadID")(a.thread_id);c||(c=b("MercuryIDs").getUserIDFromParticipantID(a.author));var d=function(a){__p&&__p();if(f!==null){var c=b("XMessengerDotComSponsoredMessagesXOutReportMutationController").getURIBuilder().setString("ad_id",f).setString("ad_client_token",h).getURI();new(b("XAsyncRequest"))(c).setHandler(function(a){(a.payload.err||a.payload===!1)&&b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){a.show(i._("We Couldn't Hide This Ad. Please try again later."))},"MNAdsMessageUtils")}).setMethod("POST").send()}if(h!==null){c=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",h).setString("selected_option_type",a).setString("event_type",b("MNCommerceReportFlowType").REPORT).getURI();new(b("XAsyncRequest"))(c).setMethod("POST").send()}};b("Bootloader").loadModules(["MNAdsReportAdDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{onConfirmButtonClick:d,pageID:c})},"MNAdsMessageUtils")},m=function(){b("Bootloader").loadModules(["SimpleXUIDialog"],function(a){if(h!==null){var c=b("XMessengerDotComSponsoredMessagesXOutSubmitPageController").getURIBuilder().setString("ad_token",h).setString("selected_option_type","useful").setString("event_type",b("MNCommerceReportFlowType").USEFUL).getURI();new(b("XAsyncRequest"))(c).setMethod("POST").send()}a.show(i._("Thank you for the feedback"))},"MNAdsMessageUtils")},n="https://www.facebook.com/help/messenger-app/948677458561379",o=this.getadPreferencesUrl(a);k=b("React").createElement(b("ReactXUIMenu"),null,b("React").createElement(j,{icon:b("React").createElement(b("Image.react"),{src:g("123107")}),key:b("MNCommerceReportFlowType").HIDE,onclick:k},i._("Hide Ad")),b("React").createElement(j,{icon:b("React").createElement(b("Image.react"),{src:g("123502")}),key:b("MNCommerceReportFlowType").REPORT,onclick:l},i._("Report Ad")),b("React").createElement(j,{href:o,icon:this.hasAdProperties(a)?b("React").createElement(b("Image.react"),{src:g("122203")}):b("React").createElement(b("Image.react"),{src:g("123137")}),key:b("MNCommerceReportFlowType").WHY,target:"_blank"},i._("Why am I seeing this?")),b("React").createElement(j,{icon:b("React").createElement(b("Image.react"),{src:g("122574")}),key:b("MNCommerceReportFlowType").USEFUL,onclick:m},i._("This ad is useful")),b("React").createElement(j,{href:n,icon:b("React").createElement(b("Image.react"),{src:g("123230")}),key:b("MNCommerceReportFlowType").WHAT,target:"_blank"},i._("What are sponsored messages?")));e=b("React").createElement(b("MessengerPopoverMenu.react"),{"aria-label":"Manage Messages","data-tooltip-content":"Manage Messages","data-hover":"tooltip",menu:k},b("React").createElement(b("Link.react"),{className:(c?"":"_3kyk")+(c?" _3kyl":"")},i._("Manage")))}else{l=function(){var c=d.isOffsiteAd(a),e=b("getPageIDFromThreadID")(a.thread_id);e||(e=b("MercuryIDs").getUserIDFromParticipantID(a.author));var f=d.getadPreferencesUrl(a),g=function(a,c){return b("MNCommercePromotionBlockDataManager").block(a,c)};b("Bootloader").loadModules(["MNAdsMessagesManageBlockDialogContainer.react"],function(a){b("MNCommerceDialogStateActions").showDialog(a,{adPreferencesUrl:f,isOffsiteAd:c,onConfirmButtonClick:g,pageID:e})},"MNAdsMessageUtils")};e=b("React").createElement(b("Link.react"),{className:(c?"":"_3kyk")+(c?" _3kyl":""),onClick:l},i._("Manage"))}return b("React").createElement("span",{className:c?"":"_3kym"},a.log_message_body," \xb7 ",e)};c.getadUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.ad_url?a.log_message_data.untypedData.ad_url:""};c.getShouldShowUrl=function(a){return a.log_message_data&&a.log_message_data.untypedData&&a.log_message_data.untypedData.should_show_url?a.log_message_data.untypedData.should_show_url:!1};c.getAdContextAdminMessage=function(a){var c=this.getadUrl(a);c=b("React").createElement(b("Link.react"),{className:"_36ql",href:c},i._("View Ad"));return b("React").createElement("span",{className:"_3kym"},a.log_message_body," ",c)};c.getAdReplyAdminMessage=function(a){var c=this.getadUrl(a),d=this.getShouldShowUrl(a);if(c===""||!d)return b("React").createElement("span",{className:"_3kym"},a.log_message_body);d=a.other_user_fbid.replace("fbid:","");b("QE2Logger").logExposureForUser("ctm_admin_text_ad_url",d);d=b("React").createElement(b("Link.react"),{className:"_36ql",href:c,target:"_blank"},i._("View Ad"));return b("React").createElement("span",{className:"_3kym"},a.log_message_body," ",d)};return a}();e.exports=new a()}),null);
__d("MessengerGamesCustomUpdateAdmin.react",["cx","fbt","Image.react","Link.react","MessengerButtonReact.bs","MessengerContactImageReact.bs","React","RelayModern","MessengerGamesCustomUpdateAdmin_gameInfo.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.bs").jsComponent,j=b("MessengerContactImageReact.bs").jsComponent;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.data.getImageURL(),c=this.props.data.getText(),d=this.props.data.getTitle()?this.props.data.getTitle():h._("Play");return!this.props.gameInfo?b("React").createElement("span",null,c):b("React").createElement("div",null,b("React").createElement(b("Link.react"),{className:"_fy2 _2621","aria-haspopup":"true","aria-label":h._("View Less"),href:"#",onClick:this.props.hideAdmin,role:"button"}),b("React").createElement("div",{className:"_261_"},b("React").createElement(j,{size:25,src:this.props.gameInfo.iconURI}),b("React").createElement("h2",{className:"_2620"},this.props.gameInfo.name)),b("React").createElement("div",{className:"_3rpv"},b("React").createElement(b("Image.react"),{className:"_3rp-",onClick:this.props.playGame,src:a}),b("React").createElement("div",{className:"_3rp_"},c),b("React").createElement("div",{className:"_3cnr"},b("React").createElement(i,{className:"_3rq0 _fy2",label:d,onClick:this.props.playGame,type:"primary",use:"default"}))))};return c}(b("React").Component);e.exports=a(c,{gameInfo:function(){return b("MessengerGamesCustomUpdateAdmin_gameInfo.graphql")}})}),null);
__d("MessengerGamesCustomUpdateAdminContainer.react",["fbt","MessengerGamesCustomUpdateAdmin.react","React","RelayFBEnvironment","RelayModern","MessengerGamesCustomUpdateAdminContainerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("RelayModern").QueryRenderer;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this;return b("React").createElement(i,{environment:b("RelayFBEnvironment"),query:h||(h=function(){return b("MessengerGamesCustomUpdateAdminContainerQuery.graphql")}),variables:{gameID:this.props.gameID},render:function(c){var d=c.error;c=c.props;if(d)return b("React").createElement("div",null,g._("Failed to Load"));else if(c){d=c.node&&c.node.gameInfo;return!d?b("React").createElement("div",null,a.props.text):b("React").createElement(b("MessengerGamesCustomUpdateAdmin.react"),babelHelpers["extends"]({},a.props,{gameInfo:d}))}return a.props.renderLoading()}})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerGamesCustomUpdateData",["GamesQuicksilverContextKey","URI"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(a){__p&&__p();this.$1=null;this.$2=a.custom_image_url||null;this.$4=a.text||a.collapsed_text||a.expanded_text||"";this.$5=a.cta_title;this.$6=a.template||null;a=new(b("URI"))(a.cta_url).getQueryData();this.$3=a.payload||null;var c=a.context_id||null;a=a.context_type;a&&(this.$1=new(b("GamesQuicksilverContextKey"))({id:null,size:null,sourceID:c,type:a}))}var c=a.prototype;c.getContextKey=function(){return this.$1};c.getImageURL=function(){return this.$2};c.getPayload=function(){return this.$3};c.getTitle=function(){return this.$5};c.getText=function(){return this.$4};c.getTemplate=function(){return this.$6};return a}();e.exports=a}),null);
__d("MessengerGameAdminMessageRoute",["react-relay-deprecated/classic/query/RelayQL","react-relay-deprecated/classic/route/RelayRoute"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(b,a);function b(){return a.apply(this,arguments)||this}return b}(b("react-relay-deprecated/classic/route/RelayRoute"));a.routeName="MessengerGameAdminMessageRoute";a.queries={adminMessageText:function(a){return function(a){return{calls:[{kind:"Call",metadata:{type:"MessageData!"},name:"thread_and_message_id",value:{kind:"CallVariable",callVariableName:"messageData"}}],children:[].concat.apply([],[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},b("react-relay-deprecated/classic/query/RelayQL").__frag(a)]),fieldName:"message",kind:"Query",metadata:{isAbstract:!0,identifyingArgName:"thread_and_message_id",identifyingArgType:"MessageData!"},name:"MessengerGameAdminMessageRoute",type:"Message"}}(a.getFragment("adminMessageText"))}};a.paramDefinitions={messageData:{type:"MessageData!",required:!0}};e.exports=a}),null);
__d("MessengerGamesLeaderboardProfileImage.react",["MessengerContactImageReact.bs","React","RelayFBEnvironment","RelayModern","MessengerGamesLeaderboardProfileImageQuery.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("MessengerContactImageReact.bs").jsComponent,i=b("RelayModern").QueryRenderer;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(i,{environment:b("RelayFBEnvironment"),query:g||(g=function(){return b("MessengerGamesLeaderboardProfileImageQuery.graphql")}),render:function(c){c.error;c=c.props;if(c){return b("React").createElement(h,{size:40,src:(c=c.user)!=null?(c=c.profilePicture)!=null?c.uri:c:c,customBadge:String(a.props.rank)})}return b("React").createElement(h,{size:40,src:null,customBadge:String(a.props.rank)})},variables:{userID:this.props.userID}})};return c}(b("React").Component);e.exports=a}),null);
__d("MessengerGamesHorizontalLeaderboard.react",["cx","MessengerGamesLeaderboardProfileImage.react","MessengerHorizontalScroll.react","MessengerResponsiveBlock.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=10,i=150,j=function(a){var c=a.name;a=a.score;return b("React").createElement("div",{className:"_4u4_"},b("React").createElement("h3",null,c),b("React").createElement("div",null,a))},k=function(a,c){if(!a)return null;var d=a.score_str,e=a.id,f=a.name;a=a.rank;return b("React").createElement("div",{className:"_4u50",key:c},b("React").createElement(b("MessengerGamesLeaderboardProfileImage.react"),{userID:e,rank:a}),b("React").createElement(j,{name:f,score:d}))};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onLoad&&this.props.onLoad()};d.render=function(){var a=this.props.leaderboard.scores;return b("React").createElement(b("MessengerResponsiveBlock.react"),{breakpointsToggles:function(a){return[a]}},function(c){c=c[0];return b("React").createElement(b("MessengerHorizontalScroll.react"),{batchScroll:!0,childPadding:h,childWidth:i,numChildrenVisible:Math.floor(c/(i+h)),width:c||0},a.map(k).filter(Boolean))})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerGamesExpandedAdmin.react",["cx","fbt","Link.react","MessengerButtonReact.bs","MessengerContactImageReact.bs","MessengerGamesHorizontalLeaderboard.react","React","RelayClassic_DEPRECATED","react-relay-deprecated/classic/query/RelayQL"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.bs").jsComponent,j=b("MessengerContactImageReact.bs").jsComponent,k=function(a){var c=a.name;a=a.uri;return b("React").createElement("div",{className:"_261_"},b("React").createElement(j,{size:25,src:a}),b("React").createElement("h2",{className:"_2620"},c))};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){this.props.onLoad&&this.props.onLoad()};d.render=function(){var a,c,d=this.$1(),e=this.$2();if(!e||!d)return null;c=(c=e)!=null?(c=c.game)!=null?c.name:c:c;a=(a=e)!=null?(a=a.game)!=null?(a=a.instant_game_info)!=null?a.icon_uri:a:a:a;return b("React").createElement("div",null,b("React").createElement("div",{className:"_4ea2 _2kar"}),b("React").createElement(b("Link.react"),{className:"_fy2 _2621","aria-haspopup":"true","aria-label":h._("View Less"),href:"#",onClick:this.props.hideAdmin,role:"button"}),b("React").createElement(k,{name:c,uri:a}),b("React").createElement("div",{className:"_2622"},e.expanded_text),b("React").createElement(b("MessengerGamesHorizontalLeaderboard.react"),{leaderboard:d,onLoad:this.props.onLoad}),b("React").createElement(i,{className:"_fy2 _2623",label:h._("Play Now"),onClick:this.props.playGame,type:"primary",use:"default"}),b("React").createElement("div",{className:"_4ea2 _2kar"}))};d.$1=function(){var a;a=((a=this.props.data)!=null?a.leaderboard_json:a)||((a=this.props.data)!=null?a.leaderboard:a);return!a?null:JSON.parse(a)};d.$2=function(){var a;return(a=this.props)!=null?(a=a.adminMessageText)!=null?a.extensible_message_admin_text:a:a};return c}(b("React").PureComponent);e.exports=b("RelayClassic_DEPRECATED").createContainer(a,{fragments:{adminMessageText:function(){return function(){return{children:[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{children:[{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"},{children:[{children:[{fieldName:"name",kind:"Field",metadata:{},type:"String"},{children:[{fieldName:"icon_uri",kind:"Field",metadata:{},type:"Url"}],fieldName:"instant_game_info",kind:"Field",metadata:{canHaveSubselections:!0},type:"GamesInstantPlayStyleInfo"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],fieldName:"game",kind:"Field",metadata:{canHaveSubselections:!0,inferredRootCallName:"node",inferredPrimaryKey:"id"},type:"Application"},{fieldName:"expanded_text",kind:"Field",metadata:{},type:"String"}],id:b("react-relay-deprecated/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"InstantGameUpdateExtensibleMessageAdminText",type:"InstantGameUpdateExtensibleMessageAdminText"}],fieldName:"extensible_message_admin_text",kind:"Field",metadata:{canHaveSubselections:!0,isAbstract:!0},type:"ExtensibleMessageAdminText"},{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"}],id:b("react-relay-deprecated/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{},name:"GenericAdminTextMessage",type:"GenericAdminTextMessage"},{children:[{fieldName:"id",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"ID"},{fieldName:"__typename",kind:"Field",metadata:{isGenerated:!0,isRequisite:!0},type:"String"}],id:b("react-relay-deprecated/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"IdFragment",type:"Node"}],id:b("react-relay-deprecated/classic/query/RelayQL").__id(),kind:"Fragment",metadata:{isAbstract:!0},name:"MessengerGamesExpandedAdmin_AdminMessageTextRelayQL",type:"Message"}}()}}})}),null);
__d("MessengerGamesExpandedAdminContainer.react",["fbt","MessengerGameAdminMessageRoute","MessengerGamesExpandedAdmin.react","React","RelayClassic_DEPRECATED"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("RelayClassic_DEPRECATED").RootContainer;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.renderLoaded=function(a){var c=d.props,e=c.gameID,f=c.hideAdmin,g=c.playGame;c=c.threadFBID;return b("React").createElement(b("MessengerGamesExpandedAdmin.react"),babelHelpers["extends"]({},a,{data:d.props.data,gameID:e,hideAdmin:f,onLoad:d.props.onLoad,playGame:g,threadFBID:c}))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props,c=a.messageID,d=a.threadFBID;a=a.renderLoading;return b("React").createElement(h,{Component:b("MessengerGamesExpandedAdmin.react"),route:new(b("MessengerGameAdminMessageRoute"))({messageData:{message_id:c,thread_id:d}}),renderLoading:a,renderFetched:this.renderLoaded,renderFailure:this.renderFailure})};d.renderFailure=function(){return g._("Failed to Load")};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerGameAdminMessage.react",["cx","fbt","AppCustomEventType","Bootloader","ImmutableObject","InstantGameContextType","InstantGamesAnalyticsLogger","Link.react","MercuryIDs","MessengerDialogs.bs","MessengerGamesCustomUpdateAdminContainer.react","MessengerGamesCustomUpdateData","MessengerGamesExpandedAdminContainer.react","QuicksilverSources","React","UniversalCustomEventField"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state=d.$1(),d.renderText=function(){return b("React").createElement("span",null,b("React").createElement("span",null,d.props.text," "),b("React").createElement(b("Link.react"),{className:"_fy2",onClick:d.state.isExpanded?d.$2:d.$4},h._("View")))},d.$3=function(){__p&&__p();if(d.state.playerOpen)return;b("Bootloader").loadModules(["MessengerGamesQuicksilverPlayerContainer.react"],function(a){b("MessengerDialogs.bs").showDialog(function(){var c=d.getXMATData(),e=c.update_data?JSON.parse(c.update_data):c;e=new(b("MessengerGamesCustomUpdateData"))(e);c.update_type==="custom_message"&&d.$5(c.game_id,e);var f=b("MercuryIDs").getThreadFBIDFromThreadID(d.props.message.thread_id),g=b("InstantGameContextType").SOLO,h=null,i=e.getContextKey();i?(g=i.getType(),h=i.getSourceID()):f&&(g=b("InstantGameContextType").THREAD,h=f);return b("React").createElement(a,{key:c.game_id,initialContextSourceID:h,initialContextType:g,initialEntryPointData:e.getPayload()||void 0,initialGameID:c.game_id,onHide:d.$6,initialSource:b("QuicksilverSources").MESSENGER_ADMIN_MESSAGE,sourceID:f,invitationID:d.props.message.message_id,threadID:d.props.message.thread_id})})},"MessengerGameAdminMessage.react");d.setState({playerOpen:!0})},d.$6=function(){b("MessengerDialogs.bs").removeAllDialogs(),d.setState({playerOpen:!1})},d.$4=function(){d.setState({isExpanded:!0})},d.$2=function(){d.setState({isExpanded:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$1=function(){return{isExpanded:this.props.isLastOfType,playerOpen:!1}};d.componentDidMount=function(){this.props.onLoad&&this.props.onLoad()};d.UNSAFE_componentWillReceiveProps=function(a){this.props.isLastOfType!==a.isLastOfType&&this.setState({isExpanded:a.isLastOfType})};d.getXMATData=function(){return this.props.message.log_message_data&&this.props.message.log_message_data.untypedData?new(b("ImmutableObject"))(this.props.message.log_message_data.untypedData):new(b("ImmutableObject"))()};d.render=function(){var a=this.getXMATData(),c=null;switch(a.update_type){case"game_score":return this.state.isExpanded?b("React").createElement("span",null,b("React").createElement(b("MessengerGamesExpandedAdminContainer.react"),{data:a,hideAdmin:this.$2,gameID:a.game_id,messageID:this.props.message.message_id,playGame:this.$3,threadFBID:b("MercuryIDs").getThreadFBIDFromThreadID(this.props.message.thread_id),onLoad:this.props.onLoad,renderLoading:this.renderText})):b("React").createElement("span",null,this.renderText(),c);case"custom_message":var d=a.update_data?JSON.parse(a.update_data):a;d=new(b("MessengerGamesCustomUpdateData"))(d);return this.state.isExpanded?b("React").createElement("span",null,b("React").createElement(b("MessengerGamesCustomUpdateAdminContainer.react"),{data:d,gameID:a.game_id,hideAdmin:this.$2,playGame:this.$3,renderLoading:this.renderText,text:this.props.text})):b("React").createElement("span",null,this.renderText(),c);default:return b("React").createElement("span",null,this.props.text)}};d.$5=function(a,c){a=new(b("InstantGamesAnalyticsLogger"))(a);var d={};d[b("UniversalCustomEventField").FB_INSTANT_GAMES_TEMPLATE_NAME]=c.getTemplate();a.logCustomAppEvent(b("AppCustomEventType").FB_INSTANT_GAMES_UPDATE_CLICK,null,d)};return c}(b("React").Component);c.propTypes={message:a.object.isRequired,text:a.string.isRequired,isLastOfType:a.bool.isRequired};e.exports=c}),null);
__d("MessengerContextualDialogReact.bs",["bs_curry","ReasonReact.bs","bs_js_null_undefined","MessengerContextualDialog.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)switch(a){case 0:return"center";case 1:return"left";case 2:return"right"}}function a(a,c,d,e,f,h,i,j,k){if(d!==void 0){var l=d;d=function(){return b("bs_js_null_undefined").fromOption(b("bs_curry")._1(l,0))}}else d=function(){return void 0};return b("ReasonReact.bs").wrapJsForReason(b("MessengerContextualDialog.react"),{alignment:b("bs_js_null_undefined").fromOption(g(a)),className:b("bs_js_null_undefined").fromOption(c),contextRef:d,offsetY:b("bs_js_null_undefined").fromOption(f),onBlur:b("bs_js_null_undefined").fromOption(e),onToggle:h,shown:b("bs_js_null_undefined").fromOption(i),width:b("bs_js_null_undefined").fromOption(j)},k)}f.stringOfAlignment=g;f.make=a}),null);
__d("MessengerGroupCreateMutation",["ChatTypeaheadConstants","MessengerJoinableModeType","RelayModern","SearchableEntry","nullthrows","MessengerGroupCreateMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("MessengerGroupCreateMutation.graphql")};function a(a,b,c){return g(a,{mutation:h,variables:{input:{actor_id:b.actorID,participants:b.participants,thread_settings:b.threadSettings,entry_point:b.entryPoint}},onCompleted:c&&c.onCompleted,onError:c&&c.onError})}function i(a){return(a=a)!=null?(a=a.messenger_group_thread_create)!=null?(a=a.thread)!=null?(a=a.thread_key)!=null?a.thread_fbid:a:a:a:a}function j(a){return(a=a)!=null?(a=a.messenger_group_thread_create)!=null?(a=a.thread)!=null?a.name:a:a:a}function k(a){return(a=a)!=null?(a=a.messenger_group_thread_create)!=null?(a=a.thread)!=null?(a=a.image)!=null?a.uri:a:a:a:a}function l(a){a=(a=a)!=null?(a=a.messenger_group_thread_create)!=null?(a=a.thread)!=null?(a=a.all_participants)!=null?a.nodes:a:a:a:a;return!a?[]:a.map(function(a){var c,d,e=b("nullthrows")(a.id);d=(d=a)!=null?(d=d.messaging_actor)!=null?d.name:d:d;c=(c=a)!=null?(c=c.messaging_actor)!=null?c.short_name:c:c;a=(a=a)!=null?(a=a.messaging_actor)!=null?(a=a.profile_picture)!=null?a.uri:a:a:a;return{id:e,name:d,short_name:c,profile_pic_uri:a}})}function m(a){var b=i(a);if(!b)return null;var c=j(a),d=k(a);a=l(a);return{name:c,thread_fbid:b,image_uri:d,participants:a}}function c(a){if(!a)return null;a=m(a);if(!a)return null;var c=a.participants.length?a.participants.map(function(a){return a.short_name}).join(", "):"",d=a.name||c;c=c;return new(b("SearchableEntry"))({uniqueID:a.thread_fbid,photo:a.image_uri,title:d,subtitle:c,type:b("ChatTypeaheadConstants").THREAD_TYPE,auxiliaryData:{participantsToRender:a.participants,thread:a}})}e.exports={commit:a,getThreadFBIDFromResponse:i,getSearchableEntryFromResponse:c}}),null);
__d("MessengerGroupCreatePollButton.react",["ix","fbt","ChatAppStore","ChatOpenTabEventLogger","CurrentUser","ErrorDialog","FantaTabActions","FDSButton.react","FunnelLogger","Image.react","MercuryIDs","MessengerEnvironment","MessengerGroupCreateMutation","MessengerGroupCreationEntryPoint","MessengerPollGroupCreateEvent","MessengerPollGroupCreateTypedLogger","React","RelayFBEnvironment","asset","gkx","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="WWW_MESSENGER_POLL_GROUP_CREATE_FUNNEL",j=!1;function k(){j||(b("FunnelLogger").startFunnel(i),j=!0)}function l(a){if(b("ChatAppStore").getState().isInitialized)m(a);else var c=b("ChatAppStore").addListener(function(){b("ChatAppStore").getState().isInitialized&&(b("setImmediate")(function(){return m(a)}),c.remove())})}function m(a){a=b("MercuryIDs").getThreadIDFromThreadFBID(a);b("FantaTabActions").openTab(a);b("ChatOpenTabEventLogger").logAutoOpen("OpenTabAfterGroupCreate",a)}function n(){b("FunnelLogger").appendAction(i,"create_group_button_mouse_entered")}function o(a,c,d,e,f,g){new(b("MessengerPollGroupCreateTypedLogger"))().setThreadIDParent(f).setThreadIDChild(g).setGroupMembers(e).setOption(c).setQuestionID(d).setEvent(a?b("MessengerPollGroupCreateEvent").SUCCESS:b("MessengerPollGroupCreateEvent").FAILURE).log(),b("FunnelLogger").appendAction(i,a?"create_group_button_click_success":"create_group_button_click_failure"),b("FunnelLogger").endFunnel(i)}function p(a,c,d,e){__p&&__p();b("FunnelLogger").appendAction(i,"create_group_button_clicked");var f=b("CurrentUser").getAccountID(),g=d.map(function(a){return{fbid:a}});b("MessengerGroupCreateMutation").commit(b("RelayFBEnvironment"),{actorID:f,participants:g,threadSettings:{name:a,joinable_mode:"PRIVATE",thread_image_fbid:null},entryPoint:b("MessengerGroupCreationEntryPoint").CHAT_POLL},{onCompleted:function(f){if(!f)return;f=b("MessengerGroupCreateMutation").getThreadFBIDFromResponse(f);o(!0,a,c,d,e,f);if(!f||b("MessengerEnvironment").messengerui)return;l(f)},onError:function(f){b("ErrorDialog").show(h._("ERROR"),f.description),o(!1,a,c,d,e,null)}})}function a(a){__p&&__p();var c=a.name,d=a.questionID,e=a.threadID,f=a.participants;a=b("CurrentUser").getAccountID();var i=f.indexOf(a.toString())>=0;i&&f.splice(f.indexOf(a.toString()),1);a=b("gkx")("678619");a=a&&i&&f.length>=2;a&&k();return a?b("React").createElement(b("FDSButton.react"),{icon:b("React").createElement(b("Image.react"),{src:g("518663")}),tooltip:h._("Create Group Chat"),label:h._("Create Chat"),labelIsHidden:!0,size:"small",onClick:function(){return p(c,d,f,e)},onMouseEnter:function(){return n()}}):null}e.exports=a}),null);
__d("MessengerGroupCreatePollButtonReact.bs",["ReasonReact.bs","MessengerGroupCreatePollButton.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f){return b("ReasonReact.bs").wrapJsForReason(b("MessengerGroupCreatePollButton.react"),{name:a,questionID:c,participants:d,threadID:e},f)}f.make=a}),null);
__d("FacepileRounded.bs",["ReasonReact.bs","bs_js_null_undefined","FacepileRounded.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){if(a!==void 0)if(a)return"descending";else return"ascending"}function h(a){if(a!==void 0)switch(a){case 0:return"none";case 1:return"name";case 2:return"hovercard"}}function a(a,c,d,e,f,i,j,k){return b("ReasonReact.bs").wrapJsForReason(b("FacepileRounded.react"),{className:b("bs_js_null_undefined").fromOption(a),direction:b("bs_js_null_undefined").fromOption(g(c)),hoverBehavior:b("bs_js_null_undefined").fromOption(h(d)),imageSize:e,numProfilesToDisplay:f,profiles:i,remainingProfilesCount:b("bs_js_null_undefined").fromOption(j)},k)}f.stringOfDirection=g;f.stringOfHoverBehavior=h;f.make=a}),null);
__d("AbstractTextInputReact.bs",["ReasonReact.bs","bs_js_null_undefined","AbstractTextInput.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g,h,i){return b("ReasonReact.bs").wrapJsForReason(b("AbstractTextInput.react"),{className:b("bs_js_null_undefined").fromOption(a),maxLength:c,onChange:d,onFocus:e,onKeyDown:f,placeholder:g,value:b("bs_js_null_undefined").fromOption(h)},i)}f.make=a}),null);
__d("MessengerAbstractTextInputWithFocusReact.bs",["bs_curry","ReasonReact.bs","bs_js_primitive","AbstractTextInputReact.bs"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("ReasonReact.bs").reducerComponent("MessengerAbstractTextInputWithFocusReact");function h(a,c){c[1][0][0]=a==null?void 0:b("bs_js_primitive").some(a);return 0}function i(a){a=a[0][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).focusInput();else return 0}function j(a){a=a[0][0];if(a!==void 0)return b("bs_js_primitive").valFromOption(a).blurInput();else return 0}function k(a,c,d,e,f,k,l,m,n){__p&&__p();var o=function(a){if(c)return i(a);else return j(a)};return[g[0],g[1],g[2],g[3],function(a){return o(a[1])},function(a){return o(a[1][1])},g[6],g[7],function(c){return b("ReasonReact.bs").element(void 0,b("bs_curry")._1(c[0],h),b("AbstractTextInputReact.bs").make(a,d,e,f,k,l,m,[]))},function(){return[[void 0]]},g[10],function(a,b){return 0},g[12]]}a=b("ReasonReact.bs").wrapReasonForJs(g,function(a){return k(b("bs_js_primitive").nullable_to_opt(a.className),a.focused,a.maxLength,a.onChange,a.onFocus,a.onKeyDown,a.placeholder,b("bs_js_primitive").nullable_to_opt(a.value),[])});f.component=g;f.setInputRef=h;f.focus=i;f.blur=j;f.make=k;f.jsComponent=a}),null);
__d("MessengerGroupPollingCheckboxReact.bs",["cx","cssVar","Keys","bs_curry","React","ReasonReact.bs"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReasonReact.bs").statelessComponent("MessengerGroupPollingCheckboxReact");function j(a,c,d,e){var f=function(){return b("bs_curry")._1(d,!a)},g=function(c){if(c.keyCode===b("Keys").SPACE){c.preventDefault();return b("bs_curry")._1(d,!a)}else return 0},h=a?c:"rgba(0, 0, 0, 0.10)";return[i[0],i[1],i[2],i[3],i[4],i[5],i[6],i[7],function(){return b("React").cloneElement(b("React").createElement("div",{className:"_2m5p"+(a?" _2m5q":""),role:"checkbox",tabIndex:0,onKeyDown:g,onClick:f},b("React").createElement("span",{className:"_2m5r",style:{backgroundColor:c,borderColor:h}})),{"aria-checked":a})},i[9],i[10],i[11],i[12]]}a=b("ReasonReact.bs").wrapReasonForJs(i,function(a){return j(a.checked,a.customColor,a.onToggle,[])});f.component=i;f.make=j;f.jsComponent=a}),null);
__d("ScrollableAreaReact.bs",["ReasonReact.bs","bs_js_null_undefined","ScrollableArea.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d){return b("ReasonReact.bs").wrapJsForReason(b("ScrollableArea.react"),{className:b("bs_js_null_undefined").fromOption(a),height:c},d)}f.make=a}),null);
__d("MessengerGroupPollingFlyoutReact.bs",["cx","ix","fbt","FBID.bs","Keys","bs_block","bs_curry","React","Utils.bs","bs_belt_Array","bs_caml_int32","Link.react","MercuryIDs","bs_belt_Option","CurrentUser","ReasonReact.bs","AsyncRequest","bs_js_primitive","FacepileRounded.bs","ScrollableAreaReact.bs","MessengerEnvironment","MessengerParticipants.bs","MessengerSpinnerReact.bs","MessengerAddIconSVGReact.bs","MessengerTextWithEntitiesReact.bs","MessengerGroupPollingCheckboxReact.bs","MessengerAbstractTextInputWithFocusReact.bs","XMessengerGroupPollingUpdateVoteController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();function j(a,c,d){__p&&__p();if(d){var e=b("CurrentUser").getID();d=b("bs_belt_Array").keep(c,function(a){return a!==e});d=b("bs_belt_Array").concat([e],d)}else d=c;return b("bs_belt_Array").mapWithIndex(d,function(c,d){var e=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(d));if(e==null)return{image_src:h("98939"),name:"Facebook User"};else if(c<a)return{image_src:b("bs_belt_Option").getWithDefault(b("bs_js_primitive").nullable_to_opt(e.image_src),h("98939")),name:e.name};else return{image_src:d,name:e.name}})}function k(a,c,d,e,f){var g=d===3;g=g?3:2;var h=d===3;return b("ReasonReact.bs").element(void 0,void 0,b("FacepileRounded.bs").make(a,1,1,c,g,j(g,e,f),h?0:d-2|0,[]))}var l=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingFlyoutReact");function m(a,c,d,e,f,g){__p&&__p();return[l[0],l[1],l[2],l[3],l[4],l[5],l[6],l[7],function(g){__p&&__p();var h=g[1],j=b("MessengerEnvironment").messengerui;if(e!==void 0){var l=e,m=j?24:16,n=l.length+h[4].length|0;n=b("bs_caml_int32").imul(j?36:28,n);n=Math.min(Math.max(n,50),200);l=b("bs_belt_Array").map(l,function(c){return b("React").createElement("div",{key:c.id,className:"_1mqz"+(j?"":" _5k8c")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupPollingCheckboxReact.bs").make(b("bs_belt_Array").some(h[3],function(a){return a===c.id}),a,function(){return b("bs_curry")._1(g[3],b("bs_block").__(3,[c.id]))},[])),b("React").createElement("div",{className:"_2f83"+(j?"":" _vhn")},b("React").createElement("div",{className:"_1mq-"+(j?"":" _2a5a")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,c.text,[]))),k("_4ic7"+(j?"":" _8kg"),m,c.voters.count,c.voters.edges.map(function(a){return a.node.id}),b("Utils.bs").isSomeTrue(b("bs_js_primitive").nullable_to_opt(c.viewer_has_voted)))))});var o=b("bs_belt_Array").mapWithIndex(h[4],function(d,e){__p&&__p();var c=h[0];return b("React").createElement("div",{key:String(d),className:"_1mqz"+(j?"":" _5k8c")},b("React").createElement(b("Link.react"),{onClick:function(){return b("bs_curry")._1(g[3],0)},role:"button",tabIndex:0,children:b("ReasonReact.bs").element(void 0,void 0,b("MessengerAddIconSVGReact.bs").make("_8i7",a,[]))}),b("ReasonReact.bs").element(void 0,void 0,b("MessengerAbstractTextInputWithFocusReact.bs").make("_8i5",c!==void 0?c===d:!1,140,function(a){return b("bs_curry")._1(g[3],b("bs_block").__(2,[d,a.target.value]))},function(){return b("bs_curry")._1(g[3],b("bs_block").__(1,[d]))},function(a){if(a.keyCode===b("Keys").RETURN){a.preventDefault();a=d+1|0;if(a===h[4].length)return b("bs_curry")._1(g[3],0);else return b("bs_curry")._1(g[3],b("bs_block").__(1,[a]))}else return 0},i._("Add an option"),b("bs_belt_Option").getWithDefault(e,""),[])))}),p=h[5];return b("React").createElement("div",{className:"_1mq_"+(j?"":" _1mr-")},b("React").createElement("div",{className:"_1mr_"},b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,d,[]))),b("React").createElement("div",{className:"_3lpw"},b("React").createElement("div",{className:"_3lpx"},b("bs_belt_Option").getWithDefault(h[1],"")),b("React").createElement("div",{className:"_3lpy"},b("bs_belt_Option").getWithDefault(h[2],""))),b("ReasonReact.bs").element(void 0,void 0,b("ScrollableAreaReact.bs").make(void 0,n,[b("React").createElement("div",{className:"_1ms0"},l,o)])),b("React").createElement("div",{className:"_1ms1"+(h[5]?" _m1v":""),role:"button",style:{backgroundColor:a},tabIndex:0,onKeyUp:function(a){a.preventDefault();if(a.keyCode===b("Keys").RETURN)return b("bs_curry")._1(g[3],b("bs_block").__(0,[c,f]));else return 0},onClick:function(){return b("bs_curry")._1(g[3],b("bs_block").__(0,[c,f]))}},p?b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,void 0,void 0,[])):i._("Submit")))}else return b("React").createElement("div",{className:"_8bt"+(j?"":" _5il4")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerSpinnerReact.bs").make(void 0,"gray",void 0,[])))},function(){return[0,void 0,void 0,e!==void 0?b("bs_belt_Array").keepMap(e,function(a){var b=a.viewer_has_voted;if(!(b==null)&&b)return a.id}):[],[void 0],!1]},l[10],function(d,e){__p&&__p();if(typeof d==="number"){var f=b("bs_belt_Array").concat(e[4],[void 0]);return b("bs_block").__(0,[[f.length-1|0,e[1],e[2],e[3],f,e[5]]])}else switch(d.tag|0){case 0:if(e[5])return 0;else{var c=d[1],a=d[0];return b("bs_block").__(2,[[e[0],e[1],e[2],e[3],e[4],!0],function(f){var d=b("bs_belt_Array").keepMap(f[1][4],function(a){return a}),g=b("XMessengerGroupPollingUpdateVoteController").getURIBuilder().getURI();new(b("AsyncRequest"))(g).setMethod("POST").setData({question_id:b("FBID.bs").ofStringExn(a),selected_options:b("bs_belt_Array").map(e[3],b("FBID.bs").ofStringExn),new_options:d}).setAllowCrossPageTransition(!0).setHandler(function(a){if(a.payload.status==="failure"&&a.payload.showUser===!0)return b("bs_curry")._1(f[3],b("bs_block").__(4,[a.payload.errorTitle,a.payload.errorMessage]));else return b("bs_curry")._1(c,0)}).send();return 0}])}case 1:return b("bs_block").__(0,[[d[0],e[1],e[2],e[3],e[4],e[5]]]);case 2:var g=d[1],h=d[0];f=b("bs_belt_Array").mapWithIndex(e[4],function(a,b){a=a===h;if(a)return g;else return b});return b("bs_block").__(0,[[h,void 0,void 0,e[3],f,e[5]]]);case 3:var i=d[0];f=b("bs_belt_Array").some(e[3],function(a){return a===i});f=f?b("bs_belt_Array").keep(e[3],function(a){return a!==i}):b("bs_belt_Array").concat(e[3],[i]);return b("bs_block").__(0,[[void 0,e[1],e[2],f,e[4],e[5]]]);case 4:return b("bs_block").__(0,[[e[0],d[0],d[1],e[3],e[4],!1]])}},l[12]]}a=b("ReasonReact.bs").wrapReasonForJs(l,function(a){return m(a.customColor,a.questionID,a.questionText,b("bs_js_primitive").nullable_to_opt(a.options),a.onSubmitHandler,[])});c=b("bs_belt_Option").getWithDefault;d=16;e=24;g=28;var n=36,o=50,p=200,q=140;f.$pipe$unknown=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.facebookOptionRowHeight=g;f.messengerOptionRowHeight=n;f.minimumFlyoutScrollareaHeight=o;f.maximumFlyoutScrollareaHeight=p;f.pollOptionMaxLength=q;f.getProfilePictures=j;f.renderVoterFacepiles=k;f.component=l;f.make=m;f.jsComponent=a}),null);
__d("MessengerPollingFlyoutBootLoader.react",["cx","JSResource","LazyComponent.react","MessengerEnvironment","MessengerSpinner.react","React","ReasonBootloadOnRender.react","ReasonResource"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;return b("React").createElement(b("ReasonBootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{customColor:this.props.customColor,questionID:this.props.questionID,questionText:this.props.questionText,options:this.props.options,onSubmitHandler:this.props.onSubmitHandler}),loader:b("ReasonResource")(b("JSResource")("MessengerGroupPollingFlyoutReact.bs").__setRef("MessengerPollingFlyoutBootLoader.react")),placeholder:b("React").createElement("div",{className:"_8bt"+(a?"":" _5il4")},b("React").createElement(b("MessengerSpinner.react"),{color:"grey"}))})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerPollingFlyoutBootLoader.bs",["ReasonReact.bs","MessengerPollingFlyoutBootLoader.react"],(function(a,b,c,d,e,f){"use strict";function a(a,c,d,e,f,g){return b("ReasonReact.bs").wrapJsForReason(b("MessengerPollingFlyoutBootLoader.react"),{customColor:a,questionID:c,questionText:d,options:e,onSubmitHandler:f},g)}f.make=a}),null);
__d("MessengerGroupPollingAdminMessageReact.bs",["cx","ix","fbt","cssVar","bs_block","bs_curry","Image.bs","React","bs_js_json","LinkReact.bs","bs_belt_Array","bs_belt_Option","ReasonReact.bs","AsyncRequest","bs_js_primitive","MessengerEnvironment","MessengerContextualDialogReact.bs","MessengerTextWithEntitiesReact.bs","MessengerGroupPollingFlyoutReact.bs","MessengerPollingFlyoutBootLoader.bs","XMessagingGetPollOptionsController","MessengerGroupCreatePollButtonReact.bs"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();var k=b("ReasonReact.bs").reducerComponent("MessengerGroupPollingAdminMessageReact");function l(a,c,d,e,f){__p&&__p();return[k[0],k[1],k[2],k[3],function(a){__p&&__p();if(a[1][4]===void 0){var d=c.log_message_data.untypedData.question_id;d=b("XMessagingGetPollOptionsController").getURIBuilder().setFBID("question_id",d).getURI();new(b("AsyncRequest"))(d).setHandler(function(c){b("bs_curry")._1(a[3],b("bs_block").__(0,[c.payload]));if(e!==void 0)return b("bs_curry")._1(e,0);else return 0}).setErrorHandler(function(){b("bs_curry")._1(a[3],b("bs_block").__(0,[[]]));if(e!==void 0)return b("bs_curry")._1(e,0);else return 0}).send();return 0}else return 0},k[5],k[6],k[7],function(e){__p&&__p();var f=e[1],g;if(a!==void 0){var j=a;g=j===""?"#0084ff":j}else g="#0084ff";j=b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,c.log_message_body,[]));var k=b("MessengerEnvironment").messengerui;if(!d&&!(f[0]&&k))return j;else{var l;try{l=b("bs_js_primitive").some(JSON.parse(c.log_message_data.untypedData.question_json))}catch(a){l=void 0}var m=f[4];if(l!==void 0&&m!==void 0){m=m;l=b("bs_js_json").classify(b("bs_js_primitive").valFromOption(l));if(typeof l==="number"||l.tag!==2)return j;else{l=l[0];var n=l.id,o=l.text,p=l.total_count;l=l.viewer_has_voted;if(n!==void 0&&o!==void 0&&p!==void 0&&l!==void 0){n=b("bs_js_json").classify(n);o=b("bs_js_json").classify(o);p=b("bs_js_json").classify(p);if(typeof n==="number"||n.tag||typeof o==="number"||o.tag||typeof p==="number"||p.tag!==1)return j;else{o=o[0];var q=n[0],r=m.slice(0,3).map(function(a){var b=a.voters.edges.map(function(a){return a.node.id});return{id:a.id,text:a.text,num_of_votes:a.voters.count,viewer_has_voted:a.viewer_has_voted,voter_ids:b}});n=b("bs_belt_Array").map(r,function(d){var a=b("bs_belt_Array").get(r,0);if(a!==void 0){a=b("bs_js_primitive").valFromOption(a);a=a.num_of_votes!==0?(d.num_of_votes/a.num_of_votes*100).toString()+"%":"0%"}else a="0%";return b("React").createElement("div",{key:d.id,className:"_3b4a"+(k?"":" _4ic5")},b("React").createElement("div",{className:"_3b4c"},b("React").createElement("div",{className:(k?"_3b4f":"")+(k?"":" _4ic6")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,d.text,[]))),b("MessengerGroupPollingFlyoutReact.bs").renderVoterFacepiles("_4ic7"+(k?"":" _8kg"),k?24:16,d.num_of_votes,d.voter_ids,d.viewer_has_voted),b("ReasonReact.bs").element(void 0,void 0,b("MessengerGroupCreatePollButtonReact.bs").make(d.text,q,d.voter_ids,c.thread_id,[]))),b("React").createElement("div",{className:"_3b4h"+(k?"":" _4ic8")},b("React").createElement("span",{style:{backgroundColor:g,width:a}})))});p=(p[0]|0)-3|0;var s=p<=0;l=b("bs_js_json").classify(l);var t=f[0];return b("React").createElement("div",void 0,j,b("React").createElement("div",{className:"_3b4t"+(k?"":" _4ic9")},b("React").createElement("div",{className:"_3b4u"+(k?"":" _2wew")},b("ReasonReact.bs").element(void 0,void 0,b("Image.bs").make("_4ica"+(k?"":" _2ozk"),void 0,void 0,void 0,k?h("86887"):h("86886"),void 0,void 0,void 0,void 0,[])),i._("Poll")),b("React").createElement("div",{className:(k?"_3b4v":"")+(k?"":" _2wex")},b("ReasonReact.bs").element(void 0,void 0,b("MessengerTextWithEntitiesReact.bs").make(!0,!0,o,[]))),b("React").createElement("div",{className:"_3b4w"},n),b("React").createElement("div",{className:"_8bu"},s?null:i._({"*":"{number of remaining answer options} more options...","_1":"{number of remaining answer options} more option..."},[i._param("number of remaining answer options",String(p)),i._plural(p)])),b("ReasonReact.bs").element(void 0,void 0,b("LinkReact.bs").make(void 0,void 0,void 0,"_4icb"+(k?"":" _4icc")+(k?" uiContextualLayerParent":"")+(k?" _5f0v":""),void 0,void 0,void 0,void 0,void 0,void 0,f[2],function(a){a.stopPropagation();if(!f[0]&&!f[3][0])return b("bs_curry")._1(e[3],1);else return 0},function(){f[3][0]=f[0];return 0},void 0,"button",void 0,{color:g,textDecoration:"none"},0,void 0,void 0,[typeof l==="number"?l!==1?i._("Vote"):i._("Change Vote"):i._("Vote"),t?b("ReasonReact.bs").element(void 0,void 0,b("MessengerContextualDialogReact.bs").make(void 0,void 0,function(){return f[1][0]},function(){return b("bs_curry")._1(e[3],0)},void 0,function(a){return b("bs_curry")._1(e[3],b("bs_block").__(1,[a]))},f[0],void 0,[b("ReasonReact.bs").element(void 0,void 0,b("MessengerPollingFlyoutBootLoader.bs").make(g,q,o,m,function(){return b("bs_curry")._1(e[3],0)},[]))])):null]))))}}else return j}}else return j}},function(){var a=[void 0],c=function(c){a[0]=c==null?void 0:b("bs_js_primitive").some(c);return 0};return[!1,a,c,[!1],void 0]},k[10],function(a,c){if(typeof a==="number")if(a===0)return b("bs_block").__(0,[[!1,c[1],c[2],c[3],c[4]]]);else return b("bs_block").__(0,[[!c[0],c[1],c[2],c[3],c[4]]]);else if(a.tag)return b("bs_block").__(0,[[a[0],c[1],c[2],c[3],c[4]]]);else return b("bs_block").__(0,[[c[0],c[1],c[2],c[3],a[0]]])},k[12]]}a=b("ReasonReact.bs").wrapReasonForJs(k,function(a){return l(b("bs_js_primitive").nullable_to_opt(a.customColor),a.message,a.isLastOfType,b("bs_js_primitive").nullable_to_opt(a.onLoad),[])});c=b("bs_belt_Option").getWithDefault;d=16;e=24;g=3;f.$pipe$unknown=c;f.facebookFacepileImageSize=d;f.messengerFacepileImageSize=e;f.numOfDisplayedOptions=g;f.component=k;f.make=l;f.jsComponent=a}),null);
__d("MessengerNewWavePrompt.react",["cx","fbt","ix","MercuryMessageActions","Bootloader","CurrentUser","Image.react","MercuryConfig","MercuryMessageObject","MercurySourceType","MessagingGenericAdminTextType","MessengerButtonReact.bs","MessengerState.bs","MessengerWaveEntrypoint","QE2Logger","WorkActivationWavePromptExperiment","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MercuryMessageActions").get(),k=b("MessengerButtonReact.bs").jsComponent,l=b("CurrentUser").getID(),m=i("392389");a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={hasWaved:!1,shouldPromptWave:!1},d.$4=function(a){a=b("MercuryMessageObject").getForFBID(l).constructAttachmentMessageObject(b("MercurySourceType").MESSENGER_WEB,d.props.threadID);a.lightweight_action_attachment={lwa_state:"INITIATED",lwa_type:"WAVE"};j.send(a);d.$5(d.props.threadID,d.props.entrypoint);d.setState({hasWaved:!0})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;b("MessengerState.bs").getThreadMessagesRange(b("CurrentUser").getID(),this.props.threadID,0,1,function(b){return a.$1(b)});b("CurrentUser").isWorkUser()&&this.$2()&&b("WorkActivationWavePromptExperiment").idToExpose&&b("WorkActivationWavePromptExperiment").idToExpose!==null&&b("QE2Logger").logExposureForScimCompanyID(b("WorkActivationWavePromptExperiment").qeType,b("WorkActivationWavePromptExperiment").idToExpose)};d.render=function(){if(!this.$2())return null;var a=this.props.recipientName?h._("Say hi to {recipient} with a wave.",[h._param("recipient",this.props.recipientName)]):h._("Say hi with a wave.");return b("React").createElement("div",{className:"_4qet"},b("React").createElement("h3",{className:"_4qeu"},a),b("React").createElement("div",{className:"_63l7"},b("React").createElement(b("Image.react"),{className:"_4qev",src:m})),this.$3())};d.$3=function(){return b("React").createElement(k,{className:"_4qew",onClick:this.$4,label:h._("Wave"),type:"primary",use:"default"})};d.$2=function(){return this.state.shouldPromptWave&&!this.state.hasWaved&&(!b("CurrentUser").isWorkUser()||b("WorkActivationWavePromptExperiment").showWavePrompt)};d.$1=function(a){if(!a.length){this.setState({shouldPromptWave:b("MercuryConfig").MNWNS});return}var c=a[0];this.setState({shouldPromptWave:c.source===b("MercurySourceType").FRIENDING_ADMIN_BUMP||c.log_message_data!=null&&c.log_message_data.message_type===b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST||c.log_message_data!=null&&c.log_message_data.message_type===b("MessagingGenericAdminTextType").GROUP_THREAD_CREATED&&a.length===1||c.log_message_data!=null&&c.log_message_data.message_type===b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED&&a.length===1&&b("WorkActivationWavePromptExperiment").showWavePrompt})};d.$5=function(a,c){b("Bootloader").loadModules(["MercuryIDs","MessengerWebWaveTypedLogger","LightweightActionState"],function(b,d,e){b=b.getUserIDFromThreadID(a);new d().setUserID(l).setRecipientID(b).setEntrypoint(c).setLwaState(e.INITIATED).log()},"MessengerNewWavePrompt.react")};return c}(b("React").PureComponent);c.propTypes={threadID:a.string.isRequired,recipientName:a.string,entrypoint:a.oneOf(Object.values(b("MessengerWaveEntrypoint"))).isRequired};e.exports=c}),null);
__d("MessengerPagesCommercePaymentEnabledAdminMessage.react",["cssVar","cx","fbt","ix","Image.react","Link.react","MessengerEnvironment","PagesCommerceBuyerNUXDialog.react","React"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={showDialog:!1},c.$1=function(){c.setState({showDialog:!1})},c.$2=function(){c.setState({showDialog:!0})},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=b("MessengerEnvironment").messengerui;return b("React").createElement("div",{className:a?"_2piv":""},b("React").createElement(b("Image.react"),{className:"_3-96",src:j("275999")}),b("React").createElement("div",null,this.props.message.log_message_body),b("React").createElement("div",{className:"_3-8w"},b("React").createElement(b("Link.react"),{onClick:this.$2,style:{color:"#0084ff",textDecoration:"none"}},i._("Learn More"))),b("React").createElement(b("PagesCommerceBuyerNUXDialog.react"),{isShown:this.state.showDialog,onConfirm:this.$1}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("MessengerReminderAdminMessage.react",["cx","fbt","AsyncRequest","CurrentUser","EventPlanStrings","EventReminderConstants","EventsMessengerComActionContextJSConfig","FBJSON","LightweightEventGuestStatus","MessagingGenericAdminTextType","MessengerButtonReact.bs","React","XEventReminderRSVPController","formatDate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("MessengerButtonReact.bs").jsComponent;a=b("React").PropTypes;var j=b("EventReminderConstants").GuestStates;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.guest_state_list:a:a:a;if(typeof a==="string")try{a=JSON.parse(a)}catch(a){return[]}return Array.isArray(a)?a:[]};d.$2=function(){return this.$1().filter(function(a){return a.guest_list_state===b("LightweightEventGuestStatus").GOING}).length};d.$3=function(){var a=this.$2();return b("React").createElement("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao")},b("EventPlanStrings").getSubtitle(a,null,!1))};d.$4=function(){__p&&__p();var a=this,c;if(!this.props.isMessenger)return null;c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?c.message_type:c:c;if(c===b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE)return null;c=this.$5();if(!c)return null;var d=Math.floor(Date.now()/1e3);if(c<=d)return null;c=b("LightweightEventGuestStatus").INVITED;d=this.$1();for(var e=0;e<d.length;e++)d[e].node&&d[e].node.id===b("CurrentUser").getID()&&(c=d[e].guest_list_state);e=h._("Going");d=h._("Can't Go");return b("React").createElement("div",{className:"_3waq"},b("React").createElement("div",{className:"_3war"},b("React").createElement(i,{className:"_3waw"+(c===b("LightweightEventGuestStatus").GOING?" _3wat":""),onClick:function(b){b.stopPropagation(),a.$6(j.GOING)},label:e,type:"primary",use:"default"})),b("React").createElement("div",{className:"_3wax"},b("React").createElement(i,{className:"_3waw"+(c===b("LightweightEventGuestStatus").DECLINED?" _3wat":""),onClick:function(b){b.stopPropagation(),a.$6(j.DECLINED)},label:d,type:"primary",use:"default"})))};d.$6=function(a){var c;c=(c=this.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;if(!c)return;var d={action_history:[{surface:b("EventsMessengerComActionContextJSConfig").messenger_com,mechanism:b("EventsMessengerComActionContextJSConfig").reminder_admin_text}]};c=b("XEventReminderRSVPController").getURIBuilder().setInt("event_reminder_id",c).setEnum("guest_state",a).setString("acontext",b("FBJSON").stringify(d));new(b("AsyncRequest"))(c.getURI()).send()};d.$5=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));return a};d.$7=function(){__p&&__p();var a,c=this.$5();if(!c)return[null,null];a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_end_time:a:a:a;typeof a==="string"?a=parseInt(a,10):typeof a!=="number"&&(a=0);var d=Math.floor(Date.now()/1e3),e=b("formatDate")(c,"j"),f=e[e.length-1]>="0"&&e[e.length-1]<=9,g=b("formatDate")(c,"M"),i=[];i.push(this.props.isMessenger?b("React").createElement("div",{className:"_3way"},b("React").createElement("div",{className:"_3waz"},g.toUpperCase()),b("React").createElement("div",{className:"_3wa-"+(f?"":" _279y")},e)):null);c<=d&&d<=a?g=h._("Happening now"):g=b("EventPlanStrings").getDisplayDateAndTimeFBT(c);i.push(b("React").createElement("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao")},g));return i};d.$8=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_title:a:a:a;return a?b("React").createElement("div",{className:"_3wb0"+(this.props.isMessenger?"":" _3wao")},a):null};d.$9=function(){var a;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_location_name:a:a:a;return a?b("React").createElement("div",{className:"_3wan"+(this.props.isMessenger?"":" _3wao")},a):null};d.render=function(){var a=this.props.message;a=a.log_message_body;if(!this.props.isLastOfType)return b("React").createElement("span",null," ",a," ");var c=this.$3(),d=this.$4(),e=this.$7(),f=e[0];e=e[1];var g=this.$8(),h=this.$9();return b("React").createElement("div",null,a,b("React").createElement("div",{className:"_3wb1"},f,b("React").createElement("div",{className:"_3wb3"+(this.props.isMessenger?"":" _3wb4")},g,e,h||c),d))};return c}(b("React").Component);c.propTypes={message:a.object.isRequired,isLastOfType:a.bool.isRequired,isMessenger:a.bool.isRequired};e.exports=c}),null);
__d("PartiesInviteAdmin.react",["cx","fbt","ix","AsyncRequest","Image.react","MessengerButtonReact.bs","MessengerContactImageReact.bs","React","XMessagingPartiesImageController"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerButtonReact.bs").jsComponent,k=b("MessengerContactImageReact.bs").jsComponent;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){var a=this,c=b("XMessagingPartiesImageController").getURIBuilder().getURI();new(b("AsyncRequest"))(c).setHandler(function(b){a.setState({imageURI:b.payload.bonfire_image_uri})}).setErrorHandler(function(a){}).send()};d.render=function(){var a=this.props,c=a.logMessage,d=a.actionText,e=a.isInvite;a=a.actionBehavior;e=e?"":h._("Join the video chat through Messenger.");return this.state?b("React").createElement("div",null,b("React").createElement("div",{className:"_6153"},b("React").createElement(k,{size:25,src:i("348994")}),b("React").createElement("h2",{className:"_6154"},"Bonfire")),b("React").createElement("div",{className:"_6155"},c," ",e),b("React").createElement("div",{className:"_6156"},b("React").createElement(b("Image.react"),{className:"_6157",src:this.state.imageURI}),b("React").createElement("div",{className:"_3cnr"},b("React").createElement(j,{className:"_6158 _fy2",label:d,onClick:a,type:"primary",use:"default"})))):b("React").createElement("span",null,c)};return c}(b("React").Component);e.exports=a}),null);
__d("PartiesUtils",["CurrentUser","URI","XBonfireAppController","XFacebookBonfireController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new(b("URI"))(document.URL),h=b("XBonfireAppController").getURIBuilder().getURI().setDomain(g.getDomain().replace(/\.[^.]+\.com$/,".mybonfire.com")).setProtocol("https").toString();function i(a){return/^\d+$/.test(a)}a={payloadParticipantsToPartiesUsers:function(a){return a.map(function(a){return{accepts_messenger_user_feedback:!1,big_image_src:a.profile_picture_uri,employee:!1,fbid:a.fbid.toString(),gender:0,href:null,id:"fbid:"+a.fbid.toString(),image_src:a.profile_picture_uri,is_business_enabled:null,is_employee_away:null,is_friend:null,is_messenger_user:null,is_messenger_platform_bot:null,is_parties_user:!0,is_verified:null,name:a.display_name,short_name:a.display_name,user_type:null,vanity:a.username,timezone:null,personal_id:null,work_id:null}})},joinBonfire:function(a,c){if(i(a)){a=b("CurrentUser").isWorkUser()?b("XFacebookBonfireController").getURIBuilder().getURI()+a:b("XBonfireAppController").getURIBuilder().setString("bonfire_id",a).setString("referrer",c).getURI().setDomain(g.getDomain().replace(/\.[^.]+\.com$/,".mybonfire.com")).setProtocol("https");window.open(a,"_blank")}},navigateToBonfireAppPage:function(){window.open(h,"_blank")}};e.exports=a}),null);
__d("PartiesInviteDialog.react",["cx","fbt","ix","BonfireStrings","Image.react","MercuryIDs","MessengerButtonReact.bs","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerParticipants.bs","PartiesUtils","React"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerButtonReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1()};d.render=function(){return this.$2()};d.$1=function(){var a=this,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.authorID);b("MessengerParticipants.bs").get(c,function(b){a.setState({senderName:b.short_name})})};d.$2=function(){var a=this.state.senderName||h._("Your friend");return b("React").createElement("div",{className:"_3liw"},b("React").createElement(k,null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(l,null,h._("Bonfire Video Chat"))),b("React").createElement(b("Image.react"),{className:"_6157",src:i("361336")}),b("React").createElement("div",{className:"_1t6j"},b("React").createElement("div",{className:"_1t6l"},h._("You missed {capitalized_sender_name}'s video chat on Bonfire",[h._param("capitalized_sender_name",a)])),b("React").createElement("div",{className:"_1t6m"},h._("Get the Bonfire app to start your own video chats and invite friends."))),b("React").createElement("div",{className:"_3cnr"},b("React").createElement(j,{className:"_352- _fy2",label:b("BonfireStrings").get_bonfire_button,onClick:b("PartiesUtils").navigateToBonfireAppPage,type:"primary",use:"default"})))};return c}(b("React").Component);e.exports=a}),null);
__d("PartiesJoinPartyInterstitialDialog.react",["cx","fbt","ix","AsyncRequest","BonfireStrings","Image.react","MercuryIDs","MessengerButtonReact.bs","MessengerDialog.react","MessengerDialogButton.react","MessengerDialogCancelButton.react","MessengerDialogHeaderReact.re","MessengerDialogTitleReact.re","MessengerParticipants.bs","MessengerRTCGroupCallContactList.react","PartiesInviteDialog.react","PartiesUtils","React","RTCUtils","XMessagingPartiesConferenceInfoController","emptyFunction","immutable"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerButtonReact.bs").jsComponent,k=b("MessengerDialogHeaderReact.re").component,l=b("MessengerDialogTitleReact.re").component,m=460,n=8;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1(),this.$2(this.props.authorID)};d.render=function(){var a=h._("Loading...");if(this.state.loading)return this.$3(a,a);else if(this.state.partyConferenceName)return this.$4(this.state.isFull,this.state.isLocked,this.state.partyConferenceName);else return this.$5(this.props.authorID)};d.$1=function(){var a=this,c=b("MercuryIDs").getParticipantIDFromUserID(this.props.authorID);b("MessengerParticipants.bs").get(c,function(b){a.setState({senderName:b.short_name})})};d.$2=function(a){var c=this;this.setState({loading:!0});a=b("XMessagingPartiesConferenceInfoController").getURIBuilder().setFBID("sender_fbid",a).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("GET").setReadOnly(!0).setHandler(function(a){var d;((d=a)!=null?(d=d.payload)!=null?d.party_conference_name:d:d)?c.setState({loading:!1,isFull:a.payload.active_users.length>=n,isLocked:a.payload.party_locked,participants:b("PartiesUtils").payloadParticipantsToPartiesUsers(a.payload.active_users),partyConferenceName:a.payload.party_conference_name}):c.setState({loading:!1,partyConferenceName:null})}).setErrorHandler(function(a){}).send()};d.$4=function(a,c,d){var e=b("immutable").Map(),f=this.$6(),g=this.$7(),j=a||c?this.$8():null;return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:m},b("React").createElement("div",{className:"_2m1r"},b("React").createElement(k,null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(l,null,h._("Bonfire Video Chat")),b("React").createElement(b("MessengerDialogButton.react"),{label:h._("Join"),onClick:function(){return b("PartiesUtils").joinBonfire(d)},type:"primary",disabled:c||a})),b("React").createElement(b("Image.react"),{className:"_6157",src:i("361336")}),b("React").createElement("div",{className:"_1t6j"},b("React").createElement("div",{className:"_1t6l"},f),b("React").createElement("div",{className:"_1t6m"},g)),b("React").createElement("div",{className:"_3oko"},b("React").createElement(b("MessengerRTCGroupCallContactList.react"),{isParticipantSelected:e,onClick:b("emptyFunction"),remoteUsers:b("RTCUtils").payloadParticipantsToRTCUsers(this.state.participants).sort(function(a,b){return a.userName.localeCompare(b.userName)})})),j))};d.$6=function(){var a=this.state.senderName||h._("Your Friend");return this.state.isLocked?h._("{capitalized_sender_name}'s Bonfire video chat is now locked",[h._param("capitalized_sender_name",a)]):this.state.isFull?h._("{capitalized_sender_name}'s Bonfire video chat is now full",[h._param("capitalized_sender_name",a)]):h._("Join {capitalized_sender_name}'s Bonfire",[h._param("capitalized_sender_name",a)])};d.$7=function(){var a=this.state.senderName||h._("Your friend");return this.state.isLocked||this.state.isFull?h._("Get the Bonfire app to start your own video chats and invite friends."):h._("{sender_name} is video chatting on Bonfire, and you can join now.",[h._param("sender_name",a)])};d.$8=function(){return b("React").createElement("div",{className:"_1j95"},b("React").createElement(j,{className:"_352- _fy2",label:b("BonfireStrings").get_bonfire_button,onClick:b("PartiesUtils").navigateToBonfireAppPage,type:"primary",use:"default"}))};d.$5=function(a){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:m},b("React").createElement(b("PartiesInviteDialog.react"),{authorID:a,onUnmount:this.props.onUnmount}))};d.$3=function(a,c){return b("React").createElement(b("MessengerDialog.react"),{onToggle:this.props.onUnmount,type:"default",width:m},b("React").createElement(k,null,b("React").createElement(b("MessengerDialogCancelButton.react"),null),b("React").createElement(l,null,a)),b("React").createElement("div",{className:"_2m1r"},c))};return c}(b("React").Component);e.exports=a}),null);
__d("PartiesJoinPartyInterstitialDialogController.react",["DOM","PartiesJoinPartyInterstitialDialog.react","React","ReactDOM"],(function(a,b,c,d,e,f){"use strict";var g={_container:b("DOM").create("div"),render:function(a){var c=a.authorID;a.handleCall;a.partiesUserID;b("ReactDOM").render(b("React").createElement(b("PartiesJoinPartyInterstitialDialog.react"),{authorID:c,onUnmount:g._onUnmount}),this._container)},_onUnmount:function(){b("ReactDOM").unmountComponentAtNode(g._container)}};e.exports=g}),null);
__d("PartiesInviteAttachment.react",["fbt","PartiesInviteAdmin.react","PartiesInviteType","PartiesJoinPartyInterstitialDialogController.react","PartiesUtils","React","RTCConfig"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$2=function(){b("PartiesJoinPartyInterstitialDialogController.react").render({authorID:d.props.authorID,partiesUserID:d.props.partiesUserID})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this.props.authorID!==this.props.otherUserID,c=this.props.partiesInviteType?this.props.partiesInviteType===b("PartiesInviteType").INVITE.toString():!0,d=this.$1(c),e=c?b("PartiesUtils").navigateToBonfireAppPage:this.$2,f=this.props.logMessage;return!b("RTCConfig").RenderPartiesMessengerAttachments||a?b("React").createElement("span",null,f):b("React").createElement(b("PartiesInviteAdmin.react"),{actionBehavior:e,actionText:d,isInvite:c,logMessage:f})};d.$1=function(a){return a?g._("Get Bonfire"):g._("Join Video Chat")};return c}(b("React").Component);e.exports=a}),null);
__d("MercuryXMATRenderer",["cx","fbt","ix","ErrorBoundary.react","EventRemindersGating","FacepileRounded.react","Image.react","JSResource","LightweightEventType","Link.react","LinkCTAXMATAsyncLink.react","MercuryIDs","MessagingGenericAdminTextType","MessengerEnvironment","MessengerGameAdminMessage.react","MessengerGroupPollingAdminMessageReact.bs","MessengerGrowthNewFriendBumpSubtype","MessengerNewWavePrompt.react","MessengerPagesCommercePaymentEnabledAdminMessage.react","MessengerParticipants.bs","MessengerReminderAdminMessage.react","MessengerTextWithEntities.react","MNAdsMessageUtils","PagesMarkAsPaidMessagingActionText.react","PartiesInviteAttachment.react","QE2Logger","React","ServicesAppointmentOptOutRequestsAdminText.react","ServicesAppointmentReminderAdminText.react","ServicesLeadGenBookableServicesAdminText.react","WorkActivationWavePromptExperiment","gkx","isWebGLEnabled","lazyLoadComponent"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("MessengerGroupPollingAdminMessageReact.bs").jsComponent,k=b("lazyLoadComponent")(b("JSResource")("MessengerIcebreakersVoteCastMessage.react").__setRef("MercuryXMATRenderer"));function l(a,c){return a?b("React").createElement(b("Image.react"),{className:"_6-fd _3-94",src:c}):null}function m(a){return a?null:b("React").createElement(b("Image.react"),{className:"_3-94",src:i("676168")})}a={renderText:function(a,c,d,e,f,g){__p&&__p();var n;g=c.log_message_body?b("React").createElement(b("MessengerTextWithEntities.react"),{renderEmoji:!0,renderEmoticons:!0,text:c.log_message_body}):null;n=(n=c)!=null?(n=n.log_message_data)!=null?n.message_type:n:n;switch(n){case b("MessagingGenericAdminTextType").JOURNEY_PROMPT_COLOR:g=h._("You need to be on the latest version of Messenger on a mobile device to pick a color for this conversation.");break;case b("MessagingGenericAdminTextType").JOURNEY_PROMPT_NICKNAME:var o=null,p=b("MercuryIDs").getUserIDFromParticipantID(c.author);if(c.other_user_fbid&&p!==c.other_user_fbid){p=b("MercuryIDs").getParticipantIDFromUserID(c.other_user_fbid);o=b("MessengerParticipants.bs").getNow(p)}o&&o.short_name?g=h._("You need to be on the latest version of Messenger on a mobile device to set a nickname for {admin-text-message} .",[h._param("admin-text-message",o.short_name)]):g=h._("You need to be on the latest version of Messenger on a mobile device to set a nickname for yourself.");break;case b("MessagingGenericAdminTextType").JOURNEY_PROMPT_LIKE:g=h._("You need to be on the latest version of Messenger on a mobile device to pick an emoji for this conversation.");break;case b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE:b("gkx")("678262")&&b("isWebGLEnabled")()&&(g=b("React").createElement(b("MessengerGameAdminMessage.react"),{message:c,text:c.log_message_body,isLastOfType:d,onLoad:e}));break;case b("MessagingGenericAdminTextType").ADS_WELCOME_MSG:break;case b("MessagingGenericAdminTextType").AD_MANAGE_MESSAGE:b("MNAdsMessageUtils").isAdsAdminMessage(c)&&(g=b("MNAdsMessageUtils").getAdsPageManage(c,!1));break;case b("MessagingGenericAdminTextType").WORK_INVITE_CLAIMED:g=c.log_message_body?c.log_message_body:h._("You're now connected on Workplace Chat.");if(c.log_message_data.untypedData){p=c.log_message_data.untypedData.invite_recipient;o=c.log_message_data.untypedData.invite_sender;p=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p));o=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o));if(o!=null&&p!=null){p=[p,o];g=b("React").createElement(b("FacepileRounded.react"),{profiles:p,message:g,numProfilesToDisplay:2,className:"_8lx"})}}b("WorkActivationWavePromptExperiment").showWavePrompt&&(g=b("React").createElement("div",null,g,b("gkx")("678589")?b("React").createElement(b("MessengerNewWavePrompt.react"),{threadID:c.thread_id,recipientName:null,entrypoint:"group_null_state"}):null));break;case b("MessagingGenericAdminTextType").GENERIC_NEW_CONNECTION:case b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST:o=n===b("MessagingGenericAdminTextType").CONFIRM_FRIEND_REQUEST;p=c.log_message_data.untypedData;if(!p)break;n=o?p.friend_request_recipient:p.recipient_id;o=o?p.friend_request_sender:p.initiator_id;n=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(n));o=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(o));if(o==null||n==null)break;n=[n,o];o=p.friend_request_subtype||p.subtype;p=o&&o.toLowerCase()===b("MessengerGrowthNewFriendBumpSubtype").ICEBREAKER?b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("React").Suspense,{fallback:null},b("React").createElement(k,{message:c,onLoad:e,isLastOfType:d}))):null;b("QE2Logger").logExposureForUser("messenger_growth_tombstone");g=b("React").createElement("div",null,b("React").createElement(b("FacepileRounded.react"),{profiles:n,message:c.log_message_body,numProfilesToDisplay:2,className:"_8lx"}),p);break;case b("MessagingGenericAdminTextType").GROUP_THREAD_CREATED:g=b("React").createElement("div",null,g,b("gkx")("678589")?b("React").createElement(b("MessengerNewWavePrompt.react"),{threadID:c.thread_id,recipientName:null,entrypoint:"group_null_state"}):null);break;case b("MessagingGenericAdminTextType").GROUP_POLL:g=b("React").createElement(j,{customColor:a,message:c,isLastOfType:d,onLoad:e});break;case b("MessagingGenericAdminTextType").PAGES_COMMERCE_PAYMENT_ENABLED:g=b("React").createElement(b("MessengerPagesCommercePaymentEnabledAdminMessage.react"),{message:c});break;case b("MessagingGenericAdminTextType").THREAD_CUSTOMIZATION_UPSELL:b("MessengerEnvironment").messengerui?g=h._("Customize this conversation: choose the color, emoji and nicknames from the sidebar."):g=h._("Choose the color, emoji and nicknames from the sidebar of your conversation on www.messenger.com.");break;case b("MessagingGenericAdminTextType").PARTIES_INVITE:o=c.author.replace("fbid:","");n=c.other_user_fbid.replace("fbid:","");a=(p=c)!=null?(p=p.log_message_data)!=null?(p=p.untypedData)!=null?p.parties_invite_type:p:p:p;p=(p=c)!=null?(p=p.log_message_data)!=null?(p=p.untypedData)!=null?p.parties_user_id:p:p:p;g=b("React").createElement(b("PartiesInviteAttachment.react"),{authorID:o,logMessage:c.log_message_body,otherUserID:n,partiesInviteType:a,partiesUserID:p});break;case b("MessagingGenericAdminTextType").PAGES_MARK_AS_PAID:case b("MessagingGenericAdminTextType").PAGES_MARK_AS_PAID_NEW:o=c.log_message_data.untypedData;n=o&&o.user_id;a=o&&o.page_id;g=b("React").createElement(b("PagesMarkAsPaidMessagingActionText.react"),{pageID:a,detectionType:o?o.detection_type:null,message:c.log_message_body,messageID:c.message_id,isPageMessage:f,userID:n});break;case b("MessagingGenericAdminTextType").AD_REPLY_MESSAGE:g=b("MNAdsMessageUtils").getAdReplyAdminMessage(c);break;case b("MessagingGenericAdminTextType").MESSENGER_AD_CONTEXT:g=b("MNAdsMessageUtils").getAdContextAdminMessage(c);break;case b("MessagingGenericAdminTextType").LINK_CTA:p=c.log_message_data.untypedData;a=p.primary_text?p.primary_text:p.link_cta_xmat_primary_text;o=p.primary_text?p.cta_text:p.link_cta_xmat_cta_text;if(p.www_is_async_url){n=p.async_url;g=b("React").createElement("div",null,a," ",b("React").createElement(b("LinkCTAXMATAsyncLink.react"),{text:o,uri:n}))}else{n=p.primary_text?p.cta_url:p.link_cta_xmat_cta_url;g=b("React").createElement("div",null,a," ",b("React").createElement(b("Link.react"),{href:n},o))}break;case b("MessagingGenericAdminTextType").PAGES_PLATFORM_APPOINTMENT_REMINDER:a=(p=c)!=null?(p=p.log_message_data)!=null?p.untypedData:p:p;n=a&&a.product_name;o=a&&a.start_time;p=a&&a.user_name;g=b("React").createElement(b("ServicesAppointmentReminderAdminText.react"),{isPageMessage:f,message:c.log_message_body,productName:n,startTime:o,timestamp:c.timestamp,userName:p});break;case b("MessagingGenericAdminTextType").SERVICES_VERTICAL_OPT_OUT_REQUESTS:f=(a=c)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.page_id:a:a:a;g=f&&b("React").createElement(b("ServicesAppointmentOptOutRequestsAdminText.react"),{message:c.log_message_body,pageID:f,userID:c.other_user_fbid});break;case b("MessagingGenericAdminTextType").SERVICES_VERTICAL_LEAD_GEN_SURVEY:o=(n=c)!=null?(n=n.log_message_data)!=null?(n=n.untypedData)!=null?n.page_id:n:n:n;g=o&&b("React").createElement(b("ServicesLeadGenBookableServicesAdminText.react"),{edit:!1,message:c.log_message_body,pageID:o});break;case b("MessagingGenericAdminTextType").SERVICES_VERTICAL_LEAD_GEN_SURVEY_EDIT:a=(p=c)!=null?(p=p.log_message_data)!=null?(p=p.untypedData)!=null?p.page_id:p:p:p;g=a&&b("React").createElement(b("ServicesLeadGenBookableServicesAdminText.react"),{edit:!0,message:c.log_message_body,pageID:a});break;case b("MessagingGenericAdminTextType").MESSENGER_GROUP_SYNC_OPT_IN:break;case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_DELETE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY_BEFORE_EVENT:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_NOTIFY:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_RSVP:f=b("gkx")("678638");if(f){b("QE2Logger").logExposureForUser("omni_m_experiments_reminders");o=b("EventRemindersGating").omniMRenderXMATForAllReminderTypes||b("LightweightEventType").M_REMINDER===((n=c)!=null?(n=n.log_message_data)!=null?(n=n.untypedData)!=null?n.event_type:n:n:n)&&b("EventRemindersGating").omniMRenderXMATForMReminderType;o&&(g=b("React").createElement(b("MessengerReminderAdminMessage.react"),{message:c,isLastOfType:d,isMessenger:b("MessengerEnvironment").messengerui}))}break;case b("MessagingGenericAdminTextType").MESSENGER_GROWTH_GENERIC_ADMIN_TEXT:p=c.log_message_data.untypedData;if(!p||!p.facepile_ids||p.facepile_ids.length!=2)break;a=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p.facepile_ids[0]));f=b("MessengerParticipants.bs").getNow(b("MercuryIDs").getParticipantIDFromUserID(p.facepile_ids[1]));n=[a,f];o=b("MessengerEnvironment").messengerui;a=p.title;f=p.description;var q=p.cta_uri,r=o?60:40;n=b("React").createElement("div",null,b("React").createElement(b("FacepileRounded.react"),{direction:"descending",profiles:n,message:"",numProfilesToDisplay:2,className:"_8lx",imageSize:r}));r=p.banner_uri!==null;var s=l(r,p.banner_uri),t=m(r);r=!o&&r;var u=null;p.is_two_way||(u=b("React").createElement("div",{className:"_74da"},b("React").createElement(b("Image.react"),{className:"_74db",src:i("94379")}),h._("Only you can see this.")));g=b("React").createElement("div",null,u,b("React").createElement("div",{className:(r?"_6-fe":"")+(r?"":" _32xu")},s,t,b("React").createElement("div",{className:"_32xz"+(o?" _6kxz":"")+(r?" _6-ff":"")},a),b("React").createElement("div",{className:"_32x-"+(r?" _6-ff":"")},f),n,q?b("React").createElement("div",{className:"_6u9q"+(r?" _6-ff":"")},b("React").createElement(b("Link.react"),{href:q},h._("See Friendship"))):null));break;case b("MessagingGenericAdminTextType").MESSENGER_ICEBREAKER_VOTE_CAST:p=c.log_message_data.untypedData;if(!p)break;u=c.log_message_body;g=b("React").createElement("div",null,u,b("React").createElement(b("ErrorBoundary.react"),null,b("React").createElement(b("React").Suspense,{fallback:null},b("React").createElement(k,{message:c,onLoad:e,isLastOfType:d}))));break;default:break}return b("React").createElement("span",null,g)}};e.exports=a}),null);
__d("P2PGroupSendReceiptDialog.react",["cx","fbt","FacepileRounded.react","Image.react","Link.react","MessengerEnvironment","P2PAmountUtils","P2PBigAmount.react","P2PButton.react","P2PDialog.react","P2PDialogBody.react","P2PDialogFooter.react","P2PDialogTitle.react","P2PLinkConstants","P2PLogger","P2PPaymentLoggerEvent","P2PPaymentLoggerEventFlow","P2PPaymentRequestStatus","P2PText.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.handleClose=function(){d.log(b("P2PPaymentLoggerEvent").UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED),d.props.onClose()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.log(b("P2PPaymentLoggerEvent").UI_ACTN_3RD_PARTY_RECEIPT_SHOWN,{raw_amount:this.props.amount})};d.getReceiverStatusMap=function(){var a;return this.props.individualRequests.reduce(function(a,c){switch(c.currentStatus){case b("P2PPaymentRequestStatus").EXPIRED:case b("P2PPaymentRequestStatus").DECLINED:case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:a[c.currentStatus].push(c);break;default:a[b("P2PPaymentRequestStatus").INITED].push(c);break}return a},(a={},a[b("P2PPaymentRequestStatus").DECLINED]=[],a[b("P2PPaymentRequestStatus").EXPIRED]=[],a[b("P2PPaymentRequestStatus").INITED]=[],a[b("P2PPaymentRequestStatus").TRANSFER_COMPLETED]=[],a))};d.getRequestProfile=function(a){a=a.requestee||{};return{image_src:a.picture,name:a.full_name}};d.log=function(a,c){b("P2PLogger").log(a,babelHelpers["extends"]({www_event_flow:this.props.eventFlow},c))};d.renderBody=function(){return b("React").createElement(b("P2PDialogBody.react"),null,b("React").createElement("ul",null,this.renderParticipantRow(this.props.sender,!0),this.renderParticipantRow(this.props.receiver,!1)),this.renderReceiverStatusList(),b("React").createElement("div",{className:"_bpy"},b("React").createElement(b("P2PBigAmount.react"),{amount:b("P2PAmountUtils").sanitizeAmount(this.props.amount),currencyCode:this.props.currencyCode,isPending:this.props.isGrayAmount,size:"large"})),b("React").createElement(b("P2PText.react"),{className:"_bpt",size:"small",type:"secondary"},this.props.bodyText," ",b("React").createElement(b("Link.react"),{className:"_1ed3",href:b("P2PLinkConstants").helpCenterURI,target:"_blank"},h._("Learn More"))))};d.renderParticipantRow=function(a,c){return!c&&this.props.individualRequests.length>1?null:b("React").createElement("li",{className:"_2chg",key:a.id},b("React").createElement("div",{className:"_2chh"},b("React").createElement(b("Link.react"),{href:a.profile_uri,onClick:this.props.onClose},b("React").createElement(b("Image.react"),{height:50,src:a.picture,width:50}))),b("React").createElement("div",{className:"_2chi"},b("React").createElement(b("P2PText.react"),{type:"primary"},b("React").createElement(b("P2PText.react"),{type:"secondary"},this.renderParticipantText(c)),a.full_name)))};d.renderParticipantText=function(a){return a?h._("From"):h._("To")};d.renderReceiverStatusList=function(){if(this.props.individualRequests.length<2)return null;var a=this.getReceiverStatusMap();return b("React").createElement("ul",null,this.renderStatus(a,b("P2PPaymentRequestStatus").TRANSFER_COMPLETED),this.renderStatus(a,b("P2PPaymentRequestStatus").DECLINED),this.renderStatus(a,b("P2PPaymentRequestStatus").INITED),this.renderStatus(a,b("P2PPaymentRequestStatus").EXPIRED))};d.renderStatus=function(a,c){a=a[c].map(this.getRequestProfile);return a.length===0?null:b("React").createElement("li",{className:"_5-av",key:c},b("React").createElement(b("P2PText.react"),{className:"_2chi _2pir",type:"secondary"},this.renderStatusText(c)),b("React").createElement(b("FacepileRounded.react"),{className:"_3-8w",hoverBehavior:"name",imageSize:40,numProfilesToDisplay:9,profiles:a}))};d.renderStatusText=function(a){switch(a){case b("P2PPaymentRequestStatus").DECLINED:return h._("Declined");case b("P2PPaymentRequestStatus").EXPIRED:return h._("Expired");case b("P2PPaymentRequestStatus").TRANSFER_COMPLETED:return h._("Paid");case b("P2PPaymentRequestStatus").INITED:default:return h._("Pending")}};d.render=function(){var a=b("MessengerEnvironment").messengerui,c=a?380:360,d=this.props.title;return b("React").createElement(b("P2PDialog.react"),{className:a?"_bpv":"",layerHideOnBlur:!1,onToggle:this.props.onClose,width:c},b("React").createElement(b("P2PDialogTitle.react"),null,d),this.renderBody(),b("React").createElement(b("P2PDialogFooter.react"),null,b("React").createElement(b("P2PButton.react"),{label:h._("OK"),onClick:this.handleClose,type:"primary"})))};return c}(b("React").Component);a.defaultProps={bodyText:h._("You can send money to friends in groups."),eventFlow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_GROUP_SEND,individualRequests:[],isGrayAmount:!1,title:h._("Payment Details")};e.exports=a}),null);
__d("P2PGroupPaymentRequestReceiptDialog.react",["fbt","P2PActions","P2PGroupSendReceiptDialog.react","P2PPaymentLoggerEventFlow","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.amount,currencyCode:this.props.currencyCode,bodyText:g._("You can send payment requests to friends in groups"),eventFlow:b("P2PPaymentLoggerEventFlow").UI_FLOW_P2P_GROUP_REQUEST,individualRequests:this.props.individualRequests,isGrayAmount:!0,receiver:this.props.requestee,sender:this.props.requester,title:g._("Payment Request Details"),onClose:this.props.onClose||b("P2PActions").hideDialog})};return c}(b("React").Component);e.exports=a}),null);
__d("P2PMercuryLogMessage.react",["cx","fbt","CurrentUser","Link.react","MercuryIDs","MessengerEnvironment","P2PGroupPaymentRequestReceiptDialog.react","P2PGroupSendReceiptDialog.react","P2PPaymentLogMessageSubtype","React","ReactLayeredComponentMixin_DEPRECATED","XP2PPaymentRequestReceiptController","XP2PTransactionDetailController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"P2PMercuryLogMessage",mixins:[b("ReactLayeredComponentMixin_DEPRECATED")],propTypes:{amount:a.string,receiver:a.object.isRequired,sender:a.object.isRequired,subtype:a.oneOf(Object.keys(b("P2PPaymentLogMessageSubtype")).map(function(a){return b("P2PPaymentLogMessageSubtype")[a]})),transferID:a.string.isRequired,threadFBID:a.string,threadID:a.string},getDefaultProps:function(){return{amount:"",sender:null,receiver:null,subtype:null}},getInitialState:function(){return{groupPaymentRequestReceiptDetailsShown:!1,groupSendReceiptDetailsShown:!1}},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:!0})},handleGroupPaymentRequestDetailsLinkClicked:function(){this.setState({groupPaymentRequestReceiptDetailsShown:!0})},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupPaymentRequestReceiptDetailsShown:!1,groupSendReceiptDetailsShown:!1})},isViewerSender:function(){var a=this.props.sender.id;return a&&b("MercuryIDs").getUserIDFromParticipantID(a)===b("CurrentUser").getID()},isViewerReceiver:function(){var a=this.props.receiver.id;return a&&b("MercuryIDs").getUserIDFromParticipantID(a)===b("CurrentUser").getID()},renderPaymentRequestDetailsLink:function(){var a=b("XP2PPaymentRequestReceiptController").getURIBuilder().setString("id",this.props.transferID).getURI();return b("React").createElement(b("Link.react"),{className:"_kiq",href:a,target:"_blank"},h._("See details"))},renderTransferDetailsLink:function(){var a=b("XP2PTransactionDetailController").getURIBuilder().setString("id",this.props.transferID).getURI();return b("React").createElement(b("Link.react"),{className:"_kiq",href:a,target:"_blank"},h._("See details"))},renderGroupDetailsLink:function(){return b("React").createElement(b("Link.react"),{className:"_kiq",href:"#",onClick:this.handleGroupDetailsLinkClicked},h._("See details"))},renderGroupPaymentRequestDetailsLink:function(){return b("React").createElement(b("Link.react"),{className:"_kiq",href:"#",onClick:this.handleGroupPaymentRequestDetailsLinkClicked},h._("See details"))},renderLayers:function(){var a={},c={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},d={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};this.state.groupSendReceiptDetailsShown?a.groupSendReceiptDetailsDialog=b("React").createElement(b("P2PGroupSendReceiptDialog.react"),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:c,sender:d}):this.state.groupPaymentRequestReceiptDetailsShown&&(a.groupPaymentRequestReceiptDetailsDialog=b("React").createElement(b("P2PGroupPaymentRequestReceiptDialog.react"),{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,requestee:c,requester:d}));return a},render:function(){__p&&__p();var a=null,c=this.props.amount,d=this.props.subtype,e=this.isViewerSender(),f=this.isViewerReceiver(),g;!e&&!f?g=this.renderGroupDetailsLink():g=this.renderTransferDetailsLink();switch(d){case b("P2PPaymentLogMessageSubtype").SENT_IN_GROUP:a=h._("{sendername} sent {amount} to {receivername}. {details}",[h._param("sendername",this.props.sender.name),h._param("amount",c),h._param("receivername",this.props.receiver.name),h._param("details",g)]);break;case b("P2PPaymentLogMessageSubtype").CANCELED_EXPIRED:case b("P2PPaymentLogMessageSubtype").CANCELED_SAME_CARD:case b("P2PPaymentLogMessageSubtype").CANCELED_SENDER_RISK:case b("P2PPaymentLogMessageSubtype").CANCELED_RECIPIENT_RISK:case b("P2PPaymentLogMessageSubtype").CANCELED_CUSTOMER_SERVICE:e?a=h._("Your {amount} payment was canceled. {details}",[h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):f?a=h._("{name}'s {amount} payment was canceled. {details}",[h._param("name",this.props.sender.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):a=h._("{sender_name}'s {amount} payment to {receiver_name} was canceled. {details}",[h._param("sender_name",this.props.sender.name),h._param("amount",c),h._param("receiver_name",this.props.receiver.name),h._param("details",g)]);a=b("React").createElement("span",{className:"_5rdx"},a);break;case b("P2PPaymentLogMessageSubtype").CANCELED_DECLINED:e?a=h._("{name} didn't accept your {amount} payment. {details}",[h._param("name",this.props.receiver.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):f?a=h._("You didn't accept {name}'s {amount} payment. {details}",[h._param("name",this.props.sender.name),h._param("amount",c),h._param("details",this.renderTransferDetailsLink())]):a=h._("{receiver_name} didn't accept {sender_name}'s {amount} payment. {details}",[h._param("receiver_name",this.props.receiver.name),h._param("sender_name",this.props.sender.name),h._param("amount",c),h._param("details",g)]);a=b("React").createElement("span",{className:"_5rdx"},a);break;case b("P2PPaymentLogMessageSubtype").REQUEST_CANCELED_BY_REQUESTER:e?a=h._("You canceled your request for {payment request amount}. {details}",[h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("{sender's name} canceled their request for {payment request amount}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{sender's name} canceled their request for {payment request amount} from {receiver's name}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("receiver's name",this.props.receiver.name),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=b("React").createElement("span",{className:"_5rdx"},a);break;case b("P2PPaymentLogMessageSubtype").REQUEST_DECLINED_BY_REQUESTEE:e?a=h._("{receiver's name} declined your request for {payment request amount}. {details}",[h._param("receiver's name",this.props.receiver.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("You declined {sender's name}'s request for {payment request amount}. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{receiver's name} declined {sender's name}'s request for {payment request amount}. {details}",[h._param("receiver's name",this.props.receiver.name),h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=b("React").createElement("span",{className:"_5rdx"},a);break;case b("P2PPaymentLogMessageSubtype").REQUEST_EXPIRED:e?a=h._("Your request for {payment request amount} expired so it was canceled. {details}",[h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):f?a=h._("{sender's name}'s request for {payment request amount} expired so it was canceled. {details}",[h._param("sender's name",this.props.sender.name),h._param("payment request amount",c),h._param("details",this.renderPaymentRequestDetailsLink())]):a=h._("{sender's name}'s request to {receiver's name} for {payment request amount} expired so it was canceled. {details}",[h._param("sender's name",this.props.sender.name),h._param("receiver's name",this.props.receiver.name),h._param("payment request amount",c),h._param("details",this.renderGroupPaymentRequestDetailsLink())]);a=b("React").createElement("span",{className:"_5rdx"},a);break}return b("React").createElement("div",{className:b("MessengerEnvironment").messengerui?"_5rdy":""},a)}});e.exports=c}),null);
__d("MessengerLogMessageBody.react",["ImmutableObject","MercuryLogMessageType","MessengerParticipants.bs","P2PMercuryLogMessage.react","React","ReactComponentWithPureRenderMixin"],(function(a,b,c,d,e,f){__p&&__p();a=b("React").PropTypes;c=b("React").createClass({displayName:"MessengerLogMessageBody",_subscription:null,mixins:[b("ReactComponentWithPureRenderMixin")],propTypes:{thread:a.instanceOf(b("ImmutableObject")),message:a.object.isRequired,viewer:a.string.isRequired},getInitialState:function(){return{extraParticipants:{}}},componentDidMount:function(){this._subscription=this._computeParticipants()},_computeParticipants:function(){__p&&__p();var a=this,c=this._getIDsToFetch(this.props);if(c.length===0)return null;var d=[],e={};c.forEach(function(a){var c=b("MessengerParticipants.bs").getNow(a);e[a]=c;c||d.push(a)});this.setState({extraParticipants:e});return d.length>0?b("MessengerParticipants.bs").getMulti(d,function(b){var c=a.state.extraParticipants;d.forEach(function(a){c[a]=b[a]});a._subscription=null;a.setState({extraParticipants:c})}):null},_getIDsToFetch:function(a){var c=[];a=a.message;var d=a.log_message_data;a=a.log_message_type;a===b("MercuryLogMessageType").ORION&&c.push(d.senderId,d.receiverId);return c},componentDidUpdate:function(){var a=this,b=this._getIDsToFetch(this.props);!this._subscription&&!b.every(function(b){return a.state.extraParticipants[b]})&&(this._subscription=this._computeParticipants())},componentWillUnmount:function(){this._subscription&&b("MessengerParticipants.bs").removeCallback(this._subscription)},render:function(){var a=this.props.message.log_message_type;if(a!==b("MercuryLogMessageType").ORION)return null;switch(a){case b("MercuryLogMessageType").ORION:return this._renderP2PLogMessage(this.props.message);default:return null}},_renderP2PLogMessage:function(a){var c=a.log_message_data,d=c.senderId,e=c.receiverId,f=this.state.extraParticipants;d=f[d]||new(b("ImmutableObject"))();f=f[e]||new(b("ImmutableObject"))();return b("React").createElement(b("P2PMercuryLogMessage.react"),{amount:c.formattedAmount,receiver:f,sender:d,subtype:c.subtype,threadFBID:a.thread_fbid,threadID:a.thread_id,transferID:c.transfer_id})}});e.exports=c}),null);
__d("MessengerLogMessage.react",["cx","fbt","ix","BootloadOnRender.react","EventRemindersGating","EventsMessengerComActionContextJSConfig","Image.react","JSResource","LazyComponent.react","Link.react","MercuryLogMessageType","MercuryLWARenderer","MercuryXMATRenderer","MessagingGenericAdminTextType","MessengerDialogs.bs","MessengerLightweightActionUtils","MessengerLogMessageBody.react","MessengerMessage.bs","MNCommerceLogMessageUtils","React","convertMIGColorToFIGColor","joinClasses","requireWeak","EventReminderRequestHelper"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;var j=i("86913");c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showEventPlanDialog:!1},d.$6=function(a){__p&&__p();var c;a.stopPropagation();if(d.state.showEventPlanDialog)return;d.setState({showEventPlanDialog:!0});if(!d.props.thread)return;var e=d.props.thread;a=b("EventReminderRequestHelper");var f={action_history:[{surface:b("EventsMessengerComActionContextJSConfig").messenger_com,mechanism:b("EventsMessengerComActionContextJSConfig").reminder_admin_text}]},g=(c=d.props.message)!=null?(c=c.log_message_data)!=null?(c=c.untypedData)!=null?c.event_id:c:c:c;!g?d.setState({showEventPlanDialog:!1}):a.fetchEventReminder(e.thread_id,g,function(){b("MessengerDialogs.bs").showDialog(function(){return b("React").createElement(b("BootloadOnRender.react"),{loader:b("JSResource")("MessengerEventPlanContainer.react").__setRef("MessengerLogMessage.react"),placeholder:b("React").createElement("div",null),component:b("React").createElement(b("LazyComponent.react"),{threadID:e.thread_id,eventID:g,dialogOnly:!0,dialogHandleToggle:d.$7,actionContext:f})})})})},d.$7=function(a){d.setState({showEventPlanDialog:!1}),b("MessengerDialogs.bs").removeAllDialogs()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=b("EventRemindersGating").shouldShowPlansOnMessengerCom?b("React").createElement("span",{className:"_ofg",ref:"attachment"},this.$1()):null;return b("React").createElement("div",{className:this.$2()},this.$3(),b("React").createElement("i",{className:"_uwa"}),b("React").createElement("span",{className:"_3oh-"},this.$4()),a)};d.$4=function(){var a=b("convertMIGColorToFIGColor")(this.props.thread&&this.props.thread.solid_color),c;if(b("MessengerLightweightActionUtils").isLWAMessage(this.props.message))return b("MercuryLWARenderer").renderCollapsedText(this.props.message);this.props.message.log_message_type!==b("MercuryLogMessageType").ORION&&(c=b("MercuryXMATRenderer").renderText(a,this.props.message,this.props.isLastOfType,this.props.onImageLoad,this.props.isPageMessage,this.props.viewer));return this.$5()||c||b("React").createElement(b("MessengerLogMessageBody.react"),{message:this.props.message,viewer:this.props.viewer,thread:this.props.thread})};d.$5=function(){var a=this.props.message;return b("MNCommerceLogMessageUtils").isCommercePageAdminMessage(a)?b("MNCommerceLogMessageUtils").getCommercePageManage(a,!0):null};d.$3=function(){return!b("MessengerMessage.bs").hasError(this.props.message)?null:b("React").createElement(b("Image.react"),{className:"_41-9",src:j})};d.$2=function(){__p&&__p();var a,c=this.props.message,d=c.log_message_type===b("MercuryLogMessageType").UNSUBSCRIBE&&c.log_message_data.removed_participants.indexOf(c.author)!==-1,e=this.props.viewer;switch(c.log_message_type){case b("MercuryLogMessageType").SUBSCRIBE:a="_uwb";break;case b("MercuryLogMessageType").UNSUBSCRIBE:a=d?"_uwc":"_uwe";break;case b("MercuryLogMessageType").PHONE_CALL:a=c.log_message_data.caller.indexOf(e)!==-1?"_uwf":"_uwg";break;case b("MercuryLogMessageType").VIDEO_CALL:a=c.log_message_data.caller.indexOf(e)!==-1?"_uwh":"_uwi";break;case b("MercuryLogMessageType").THREAD_NAME:a="_uwj";break;case b("MercuryLogMessageType").THREAD_IMAGE:a="_uwk";break;case b("MercuryLogMessageType").SERVER_ERROR:a="_uwl";break;case b("MercuryLogMessageType").LIVE_LISTEN:a="_uwm";break;case b("MercuryLogMessageType").WALLPAPER:a="_uwn";break;case b("MercuryLogMessageType").ORION:a="_uwo";break;case b("MercuryLogMessageType").SWITCH_TO_WORK:a="_uwp";break;case b("MercuryLogMessageType").PAGE_REPLY:a="_uwq";break}return b("joinClasses")("_497p"+((c.log_message_type===b("MercuryLogMessageType").PHONE_CALL||c.log_message_type===b("MercuryLogMessageType").VIDEO_CALL)&&!c.log_message_data.answered?" _3no3":"")+(c.log_message_data&&c.log_message_data.message_type===b("MessagingGenericAdminTextType").INSTANT_GAME_UPDATE?" _11es":""),a)};d.$1=function(){__p&&__p();var a;if(!this.props.thread)return null;var c=this.props.thread;if(!c.lightweight_event||!this.props.message.log_message_data)return null;var d=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_id:a:a:a,e;b("requireWeak")("EventReminderStateStore",function(a){e=a.getEvent(c.thread_id,d)});if(!e||!e.exists)return null;a=(a=this.props.message)!=null?(a=a.log_message_data)!=null?(a=a.untypedData)!=null?a.event_time:a:a:a;if(!a)return null;typeof a==="string"&&(a=parseInt(a,10));if(a<=Math.floor(Date.now()/1e3))return null;var f;switch(this.props.message.log_message_data.message_type){case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_CREATE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TIME:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_TITLE:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE_LOCATION:case b("MessagingGenericAdminTextType").LIGHTWEIGHT_EVENT_UPDATE:f=h._("Change");break;default:f=null}a=b("React").createElement(b("Link.react"),{href:"#",onClick:this.$6,title:h._("Edit Event"),ref:"event_rem_link"},f);this.props.displayItems&&(a=null);return a};return c}(b("React").PureComponent);c.propTypes={message:a.object.isRequired,viewer:a.string.isRequired,isLastOfType:a.bool.isRequired,onImageLoad:a.func};e.exports=c}),null);
__d("ChatFileUploadLoggingUtils",["CurrentUser","WorkContentActivityEvent","WorkContentActivitySurface","WorkContentActivityTypedLogger"],(function(a,b,c,d,e,f){"use strict";a={log:function(a,c){c===void 0&&(c=b("WorkContentActivitySurface").CHAT_MAIN),b("CurrentUser").isWorkUser()&&new(b("WorkContentActivityTypedLogger"))().setSurfaceType(c).setEvent(b("WorkContentActivityEvent").CHAT_FILE_UPLOAD).setAdditionalData({file_size:a.size.toString(),file_type:a.type}).log()}};e.exports=a}),null);
__d("MercuryFileUploader",["csx","fbt","ArbiterMixin","ChatFileUploadLoggingUtils","CSS","Dialog","DOM","Event","FBLogger","FileForm","FileFormResetOnSubmit","FileInput","FormSubmitOnChange","MercuryAttachment","MercuryAttachmentTemplates","MercuryConstants","PhotosUploadID","SubscriptionsHandler","getObjectValues","mixin","shield"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c,d,e){__p&&__p();var f;f=a.call(this)||this;f.$MercuryFileUploader1=b;f.$MercuryFileUploader2={};f.$MercuryFileUploader3={};f.$MercuryFileUploader4={};f.$MercuryFileUploader5={};f.$MercuryFileUploader6={};f.$MercuryFileUploader7={};f.$MercuryFileUploader8={};f.$MercuryFileUploader9={};f.$MercuryFileUploader10={};f.updateElements(c,d,e);return f}var d=c.prototype;d.updateElements=function(a,c,d){__p&&__p();this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader11=new(b("SubscriptionsHandler"))();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.$MercuryFileUploader12=new(b("FileForm"))(a,[b("FormSubmitOnChange"),b("FileFormResetOnSubmit")]);this.$MercuryFileUploader12.setAllowCrossOrigin(!0);this.$MercuryFileUploader12.setUploadInParallel(!0);a=b("DOM").find(a,"._4q60");var e=b("DOM").find(a,"._4q61");new(b("FileInput"))(a,e,c);this.$MercuryFileUploader11.addSubscriptions(this.$MercuryFileUploader12.subscribe("submit",function(){__p&&__p();var a={count:0,file_sizes:[],files:[]};if(c.files){for(var e=0;e<c.files.length;e++){b("ChatFileUploadLoggingUtils").log(c.files[e]);if(c.files[e].size>b("MercuryConstants").AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return!1}}e={};for(var f=0;f<c.files.length;f++){var g=this.$MercuryFileUploader13();this.$MercuryFileUploader14(g,c.files[f].name);a.count++;a.file_sizes.push(c.files[f].size);e[g]=c.files[f];a.files.push({upload_id:g,metadata:c.files[f]})}this.$MercuryFileUploader12.setFiles(e)}else d.value=this.$MercuryFileUploader13(),this.$MercuryFileUploader14(d.value,c.value),a.count=1;this.inform("submit",a)}.bind(this)),this.$MercuryFileUploader12.subscribe("success",this.$MercuryFileUploader15.bind(this)),this.$MercuryFileUploader12.subscribe("failure",this.$MercuryFileUploader16.bind(this)),b("Event").listen(e,"click",b("shield")(this.inform,this,"open")))};d.showAttachmentSizeErrorDialog=function(){this.$MercuryFileUploader12.abort(),this.$MercuryFileUploader12.clear(),new(b("Dialog"))().setTitle(h._("The file you have selected is too large")).setBody(h._("The file you have selected is too large. The maximum size is 25MB.")).setButtons(b("Dialog").OK).setSemiModal(!0).show(),b("FBLogger")("messenger_upload_file").warn("Uploading file is too large")};d.addDroppedFiles=function(a){__p&&__p();if(!this.$MercuryFileUploader12||!this.$MercuryFileUploader12.canUseXHR())return;var c={},d={count:0,file_sizes:[],files:[]};for(var e=0;e<a.length;e++){var f=a[e];if(f.size>b("MercuryConstants").AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return!1}var g=this.$MercuryFileUploader13();this.$MercuryFileUploader14(g,f.name);c[g]=f;d.file_sizes.push(f.size);d.count++;d.files.push({upload_id:g,metadata:f})}this.$MercuryFileUploader12.setFiles(c);this.$MercuryFileUploader12.forceSendViaXHR();this.inform("submit",d)};d.isUploading=function(){return!!Object.keys(this.$MercuryFileUploader8).length};d.addCachedAttachments=function(a){a.forEach(function(a){var b=this.$MercuryFileUploader13();this.$MercuryFileUploader14(b,a.filename);this.inform("cached-file-added",{upload_id:b,metadata:a});this.$MercuryFileUploader17(b,a)}.bind(this))};d.addCachedImageFiles=function(a){var b=h._("Photo");a.forEach(function(a){var c=this.$MercuryFileUploader13();this.$MercuryFileUploader14(c,b);this.$MercuryFileUploader17(c,{filename:a,image_id:a,filetype:"image/jpeg"})}.bind(this))};d.getAttachments=function(){return b("getObjectValues")(this.$MercuryFileUploader2)};d.getImageFiles=function(){var a=this,b=Object.keys(this.$MercuryFileUploader3).sort(),c=[];b.forEach(function(b){return c.push(a.$MercuryFileUploader3[b])});return c};d.getAnimatedImageFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader4)};d.getVideoFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader5)};d.getAudioFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader6)};d.getFiles=function(){return b("getObjectValues")(this.$MercuryFileUploader7)};d.removeOneAttachment=function(a){this.$MercuryFileUploader18(a)};d.removeAttachments=function(){this.$MercuryFileUploader1&&b("DOM").empty(this.$MercuryFileUploader1),this.$MercuryFileUploader2={},this.$MercuryFileUploader3={},this.$MercuryFileUploader4={},this.$MercuryFileUploader5={},this.$MercuryFileUploader6={},this.$MercuryFileUploader7={},this.$MercuryFileUploader9={},this.$MercuryFileUploader8={},this.$MercuryFileUploader10={},this.$MercuryFileUploader1&&b("CSS").hide(this.$MercuryFileUploader1),this.inform("dom-updated")};d.destroy=function(){this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release(),this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy(),this.removeAttachments()};d.$MercuryFileUploader14=function(a,c){__p&&__p();var d=b("MercuryAttachmentTemplates")[":fb:mercury:upload-file-row"].build(),e={};this.$MercuryFileUploader9[a]=d;this.$MercuryFileUploader8[a]=!0;this.$MercuryFileUploader10[a]=Date.now();c=i(c);b("DOM").appendContent(d.getNode("iconText"),c);e.fileName=c;b("Event").listen(d.getNode("closeFileUpload"),"click",this.$MercuryFileUploader18.bind(this,a));this.$MercuryFileUploader1&&(b("DOM").appendContent(this.$MercuryFileUploader1,d.getRoot()),b("CSS").show(this.$MercuryFileUploader1));this.inform("dom-updated",e)};d.$MercuryFileUploader18=function(a,c){__p&&__p();this.$MercuryFileUploader8[a]?this.inform("upload-canceled-during-upload"):(this.$MercuryFileUploader2[a]||this.$MercuryFileUploader3[a]||this.$MercuryFileUploader4[a]||this.$MercuryFileUploader5[a]||this.$MercuryFileUploader6[a]||this.$MercuryFileUploader7[a])&&this.inform("upload-canceled-after-uploaded");delete this.$MercuryFileUploader2[a];delete this.$MercuryFileUploader3[a];delete this.$MercuryFileUploader4[a];delete this.$MercuryFileUploader5[a];delete this.$MercuryFileUploader6[a];delete this.$MercuryFileUploader7[a];delete this.$MercuryFileUploader8[a];delete this.$MercuryFileUploader10[a];c=this.$MercuryFileUploader9[a];delete this.$MercuryFileUploader9[a];c&&(b("DOM").remove(c.getRoot()),this.inform("dom-updated"));this.inform("upload-canceled");return!1};d.$MercuryFileUploader19=function(a,c){a=this.$MercuryFileUploader9[a];c=b("MercuryAttachment").getAttachIconClassByMime(c);b("CSS").addClass(a.getNode("iconText"),c);b("CSS").addClass(a.getRoot(),"done")};d.$MercuryFileUploader17=function(a,b){this.$MercuryFileUploader8[a]&&(delete this.$MercuryFileUploader8[a],b.image_id?this.$MercuryFileUploader3[a]=b.image_id:b.gif_id?this.$MercuryFileUploader4[a]=b.gif_id:b.video_id?this.$MercuryFileUploader5[a]=b.video_id:b.audio_id?this.$MercuryFileUploader6[a]=b.audio_id:b.file_id?this.$MercuryFileUploader7[a]=b.file_id:this.$MercuryFileUploader2[a]=b,this.$MercuryFileUploader19(a,b.filetype),this.inform("one-upload-completed",{upload_time_ms:Date.now()-this.$MercuryFileUploader10[a],upload_id:a,metadata:b})),this.isUploading()||this.inform("all-uploads-completed",{count:this.getAttachments().length})};d.$MercuryFileUploader15=function(a,b){a=b.response.getPayload();this.$MercuryFileUploader17(this.$MercuryFileUploader20(b),a.metadata[0])};d.$MercuryFileUploader16=function(a,b){this.inform("one-upload-failed"),this.$MercuryFileUploader18(this.$MercuryFileUploader20(b),a)};d.$MercuryFileUploader13=function(){return"upload_"+b("PhotosUploadID").getNewID()};d.$MercuryFileUploader20=function(a){var b=a.response.getPayload();if(a.upload)return a.upload.getName();else return b.uploadID};return c}(b("mixin")(b("ArbiterMixin")));function i(a){return a&&a.startsWith("C:\\fakepath\\")?a.substring(12):a}e.exports=a}),null);
__d("MercuryOrderedThreadlist",["invariant","ChatReliabilityInstrumentation","LogHistory","MercuryActionType","MercuryAPIArgsSource","MercuryDispatcher","MercuryFilters.bs","MercuryPayloadSource","MercuryServerRequests","MercurySingletonProvider","MercuryThreadIDMap","MercuryThreadInformer","MessagingTag","MessengerFolders.bs","MessengerState.bs","PageMessageEnumTag","RangedCallbackManager"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("LogHistory").getInstance("ordered_threadlist_model"),i=b("MercuryFilters.bs").getSupportedFilters().concat([b("MercuryFilters.bs").all,b("MessagingTag").GROUPS]),j=b("MessengerFolders.bs").getSupportedFolders().concat([b("MessagingTag").SPAM,b("MessagingTag").PAGE_BACKGROUND]);a=function(){__p&&__p();a.getForFBID=function(a){return l.getForFBID(a)};a.get=function(){return l.get()};function a(a){__p&&__p();var c=this;this.$1=a;this.$2=b("MercuryThreadIDMap").getForFBID(this.$1);this.$3=b("MercuryThreadInformer").getForFBID(this.$1);this.$4=b("MercuryDispatcher").getForFBID(this.$1);this.$5={};this.$6();this.$4.subscribe("update-threadlist",function(a,b){__p&&__p();if(!k(b))return;a=b.ordered_threadlists;if(a&&a.length)c.$7(a);else{a=(b.actions||[]).filter(function(a){return a.thread_id});c.$8(b.threads||[]);c.$9(a)}c.$3.updatedThreadlist()});this.$4.subscribe("invalidate-global-state",function(){return c.$10()})}var c=a.prototype;c.getThreadlistOrderMap=function(a,c){var d=this;this.$5[a][c]||(i=i.concat([c]),j.forEach(function(a){d.$5[a][c]=new(b("RangedCallbackManager"))(function(a){a=b("MessengerState.bs").getThreadMetaNow(d.$1,a);return a&&a.timestamp},function(a,b){return b-a},d.$2.canLinkExternally.bind(d.$2))}));return this.$5[a][c]};c.getThreadlist=function(a,c,d,e,f,g){return this.getFilteredThreadlist(a,c,d,b("MercuryFilters.bs").all,e,f,g)};c.getFilteredThreadlist=function(a,c,d,e,f,g,i){__p&&__p();var j=this.getThreadlistOrderMap(d,e);f=j.executeOrEnqueue(a,c,f,g);g=j.getUnavailableResources(f);if(g.length){if(j.getCurrentArraySize()<a){a={start:a,limit:c,filter:e,resources_size:j.getCurrentArraySize()};h.warn("range_with_gap",JSON.stringify(a))}this.getServerRequests().fetchThreadlistInfo(j.getCurrentArraySize(),g.length,d,e==b("MercuryFilters.bs").all?null:e,i,this.$11(j.getAllResources()))}return f};c.getServerRequests=function(){return b("MercuryServerRequests").getForFBID(this.$1)};c.getThreadlistUntilTimestamp=function(a,c,d){d=d||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(c,d).getElementsUntil(a)};c.getAvailableThreadlistNow=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).getAllResources()};c.getThreadCount=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).getCurrentArraySize()};c.hasLoadedThreadlist=function(a,c){c=c||b("MercuryFilters.bs").all;return this.getThreadlistOrderMap(a,c).hasReachedEndOfArray()};c.unsubscribe=function(a,c,d){d=d||b("MercuryFilters.bs").all,this.getThreadlistOrderMap(c,d).unsubscribe(a)};c.$10=function(){this.$5={},this.$6()};c.$6=function(){var a=this;j.forEach(function(c){a.$5[c]={},i.forEach(function(d){a.$5[c][d]=new(b("RangedCallbackManager"))(function(c){c=b("MessengerState.bs").getThreadMetaNow(a.$1,c);return c&&c.timestamp},function(a,b){return b-a},a.$2.canLinkExternally.bind(a.$2))})})};c.$12=function(a,c,d){var e=b("MessengerState.bs").getThreadMetaNow(this.$1,a);return!!(e&&e.timestamp&&d&&c&&this.$13(a)==c&&this.$14(a).includes(d))};c.$15=function(a,c,d){__p&&__p();var e=[],f=!1;a=(a||[]).filter(function(a){var e=a.filter||b("MercuryFilters.bs").all;return(a.folder==c||!a.folder&&c==b("MessagingTag").INBOX)&&e==d});var g=this.$5[c][d].getAllResources(),i;a.forEach(function(a){e=e.concat(a.thread_ids);var b=a.limit;a.thread_ids.length<b&&(f=!0);(!i||a.end>i)&&(i=a.end)});this.$16(e,c,d);if(f)this.$5[c][d].setReachedEndOfArray();else{a=this.$5[c][d].getCurrentArraySize();if(i&&a<i){var j={};g=g.concat(e);g=g.filter(function(a){var b=j[a];j[a]=!0;return b});g.length&&(b("ChatReliabilityInstrumentation").logERROR("duplicate_thread_ids: "+JSON.stringify(g)),h.warn("duplicate_threads",JSON.stringify({folder:c,expected_final_size:i,actual_final_size:a,duplicate_thread_ids:g})),this.getServerRequests().fetchThreadlistInfo(i,g.length,c,d==b("MercuryFilters.bs").all?null:d,b("MercuryAPIArgsSource").MERCURY,this.$11(this.$5[c][d].getAllResources())))}}};c.$7=function(a){var b=this;j.forEach(function(c){i.forEach(function(d){b.$15(a,c,d)})})};c.$9=function(a){__p&&__p();var c=this,d={};j.forEach(function(a){d[a]={},i.forEach(function(b){d[a][b]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}}})});a.forEach(function(a){__p&&__p();var e=a.thread_id;c.$17(e,function(f){__p&&__p();c.$18(e,function(h){__p&&__p();var k=function(){h.forEach(function(a){if(!i.includes(a))return;!f&&g(0,2886);d[f][a].to_add.push(e);!c.$5[f][a].hasReachedEndOfArray()&&!c.$5[f][a].hasResource(e)&&(d[f][a].to_remove_if_last_after_add[e]=!0)})};function l(a){!f&&g(0,2887),i.includes(a)&&(h.includes(a)?d[f][a].to_add.push(e):d[f][a].to_remove.push(e))}if(!f){(a.action_type===b("MercuryActionType").CHANGE_FOLDER||a.action_type===b("MercuryActionType").CHANGE_ARCHIVED_STATUS)&&j.forEach(function(a){a!==f&&i.forEach(function(b){c.$5[a][b].removeResources([e])})});return}!f&&g(0,2888);switch(a.action_type){case b("MercuryActionType").DELETE_THREAD:h.forEach(function(a){if(!i.includes(a))return;d[f][a].to_remove.push(e)});break;case b("MercuryActionType").CHANGE_ARCHIVED_STATUS:case b("MercuryActionType").CHANGE_FOLDER:k();break;case b("MercuryActionType").CHANGE_READ_STATUS:l(b("MessagingTag").UNREAD);break;case b("MercuryActionType").USER_GENERATED_MESSAGE:case b("MercuryActionType").LOG_MESSAGE:h.forEach(function(a){if(!i.includes(a))return;c.$12(e,f,a)&&d[f][a].to_add.push(e)});break;case b("MercuryActionType").CHANGE_FLAG:l(b("PageMessageEnumTag").FLAG);break}})})});j.forEach(function(a){__p&&__p();i.forEach(function(b){var e=c.$5[a][b];c.$16(d[a][b].to_add,a,b);for(var f=e.getCurrentArraySize()-1;f>=0;f--){var g=e.getResourceAtIndex(f);if(!d[a][b].to_remove_if_last_after_add[g])break;d[a][b].to_remove.push(g)}e.removeResources(d[a][b].to_remove)})})};c.$8=function(a){__p&&__p();var b=this,c={};j.forEach(function(a){c[a]={},i.forEach(function(b){c[a][b]=[]})});a.forEach(function(a){b.$17(a.thread_id,function(d){b.$18(a.thread_id,function(e){d&&e.forEach(function(e){b.$12(a.thread_id,d,e)&&c[d][e].push(a.thread_id)})})})});j.forEach(function(a){i.forEach(function(d){c[a][d].length>0&&b.$16(c[a][d],a,d)})})};c.$16=function(a,c,d){var e=this;d=d||b("MercuryFilters.bs").all;this.$5[c][d].addResources(a);j.forEach(function(b){b!=c&&e.$5[b][d].removeResources(a)})};c.$17=function(a,c){var d=this;b("MessengerState.bs").getThreadMeta(this.$1,a,function(b){c(d.$13(a,b))})};c.$13=function(a,c){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(this.$1,a);var d=null;!c?d="No thread metadata":c.folder||(d="No thread folder");if(d){d={error:d,tid:a};h.warn("no_thread_folder",JSON.stringify(d));b("ChatReliabilityInstrumentation").logERROR("no_thread_folder");return null}!c&&g(0,2889);a=c.folder;c.is_archived&&(a=b("MessagingTag").ACTION_ARCHIVED);if(this.$5[a])return a;else return null};c.$18=function(a,c){var d=this;b("MessengerState.bs").getThreadMeta(this.$1,a,function(b){c(d.$14(a,b))})};c.$14=function(a,c){__p&&__p();c=c||b("MessengerState.bs").getThreadMetaNow(this.$1,a);var d=[b("MercuryFilters.bs").all];if(!c){a={error:"no_thread_metadata",tid:a};h.warn("no_thread_metadata",JSON.stringify(a));return[]}c.unread_count&&d.push(b("MessagingTag").UNREAD);c.is_canonical||d.push(b("MessagingTag").GROUPS);a=c.page_thread_info;a&&a.flagged&&d.push(b("PageMessageEnumTag").FLAG);return d};c.$11=function(a){var c=null;if(a.length>0){a=b("MessengerState.bs").getThreadMetaNow(this.$1,a[a.length-1]);c=a?a.timestamp:null}return c};return a}();function k(a){switch(a.payload_source){case b("MercuryPayloadSource").CLIENT_CHANGE_ARCHIVED_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_PINNED_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_PAGE_FOLLOW_UP_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_READ_STATUS:case b("MercuryPayloadSource").CLIENT_CHANGE_FOLDER:case b("MercuryPayloadSource").CLIENT_CHANNEL_MESSAGE:case b("MercuryPayloadSource").CLIENT_DELETE_MESSAGES:case b("MercuryPayloadSource").CLIENT_DELETE_THREAD:case b("MercuryPayloadSource").CLIENT_SEND_MESSAGE:case b("MercuryPayloadSource").SERVER_SEND_MESSAGE:case b("MercuryPayloadSource").SERVER_FETCH_THREADLIST_INFO:case b("MercuryPayloadSource").SERVER_THREAD_SYNC:case b("MercuryPayloadSource").SERVER_INVALIDATE_GLOBAL_STATE:case b("MercuryPayloadSource").CLIENT_UPDATE_COMM_STATUS:return!0;case b("MercuryPayloadSource").SERVER_INITIAL_DATA:return!!a.ordered_threadlists;default:return!1}}var l=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryDragDropPrompt.react",["cx","fbt","React"],(function(a,b,c,d,e,f,g,h){__p&&__p();a=function(a){"use strict";babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_4g6x"},b("React").createElement("div",{className:"_4g6y"},b("React").createElement("div",{className:"_4g6z _4g71"},h._("Drag Links\/Files Here")),b("React").createElement("div",{className:"_4g6z _4g6- _4g6_"},h._("Drop Files Here")),b("React").createElement("div",{className:"_4g6z _4g6- _4g70"},h._("Drop Link Here"))))};return c}(b("React").Component);e.exports=a}),null);
__d("MercurySyncPageEnvironment",["Arbiter","ChannelInitialData","ChannelManager","MercurySyncDeltaHandler","MessengerMQTTConnection","MessengerMQTTGating"],(function(a,b,c,d,e,f){"use strict";__p&&__p();b("ChannelManager").startChannelManager();function a(a,c){if(Object.keys(b("ChannelInitialData")).length===0&&JSON.stringify(b("ChannelInitialData"))===JSON.stringify({}))return;c||(c=0);b("MercurySyncDeltaHandler").getForFBID(a);b("MessengerMQTTGating").isEnabled()?b("MessengerMQTTConnection").addDeltaStream({fbid:a,irisSeqID:c.toString()}):b("ChannelManager").subscribeIrisQueue(a,c.toString());b("Arbiter").inform("MercurySyncDeltaHandler/initSeqID",{fbid:a,seqID:c})}function c(a){}e.exports={setUp:a,tearDown:c}}),null);
__d("MercuryPageMessageActions",["MercuryActionType","MercuryMessageActions","MercuryPageServerRequests","MercuryPayloadSource","MercurySingletonMixin"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.__serverRequests=b("MercuryPageServerRequests").getForFBID(c);return d}var d=c.prototype;d.createNote=function(a,c,d){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({action_type:b("MercuryActionType").CREATE_PAGE_ADMIN_NOTE,message_id:d,note:a,thread_id:c},b("MercuryPayloadSource").CLIENT_CREATE_PAGE_ADMIN_NOTE)),this.__serverRequests.createNote(a.body.text,d,c)};return c}(b("MercuryMessageActions"));Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("MercuryPageOrderedThreadlist",["MercuryOrderedThreadlist","MercuryPageServerRequests","MercurySingletonProvider","MessagingTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return g.getForFBID(a)};c.get=function(){return g.get()};function c(b){var c;c=a.call(this,b)||this;c.$MercuryPageOrderedThreadlist1=b;return c}var d=c.prototype;d.getServerRequests=function(){return b("MercuryPageServerRequests").getForFBID(this.$MercuryPageOrderedThreadlist1)};return c}(b("MercuryOrderedThreadlist"));var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECServerSendMessageQueue",["MercuryServerSendMessageQueue","MessengerAttachmentTransformer.bs","MessengerMessageTransformer.bs","XWECMessagingSendController"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getSendURI=function(){return b("XWECMessagingSendController").getURIBuilder().getURI().toString()};d.handleSuccess=function(a,c){__p&&__p();var d=this,e=(a.actions||[]).map(function(a){d.pending_message=null;var c=babelHelpers["extends"]({},a);if(a.graphql_payload&&a.graphql_payload.node){var e=a.graphql_payload.node.story_attachment;e={legacy_attachment_id:a.graphql_payload.node.legacy_attachment_id,story_attachment:e==null?null:b("MessengerMessageTransformer.bs").unsafeCastExtensibleAttachment(e)};e=b("MessengerAttachmentTransformer.bs").transformAttachment(d.sender_id,{extensible_attachment:e,blob_attachments:[],sticker:null},a.message_id,!0);c=Object.assign(c,{attachments:e})}return c});a.actions=e;this.resumeAfterSuccess(a,c)};return c}(b("MercuryServerSendMessageQueue"));e.exports=a}),null);
__d("MercuryWECServerSendMessageQueueRouter",["MercurySingletonProvider","MercuryWECServerSendMessageQueue"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();a.getForFBID=function(a){return g.getForFBID(a)};a.get=function(){return g.get()};function a(a){this.queues=new Map(),this.fbid=a}var c=a.prototype;c.enqueue=function(a,c,d,e){var f=this.queues.get(a);f===void 0&&(f=new(b("MercuryWECServerSendMessageQueue"))(this.fbid,a,c,d),this.queues.set(a,f));f.enqueue(e)};return a}();var g=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECServerRequests",["MercuryAPIArgsSource","MercuryIDs","MercuryMessageClientState","MercuryPageServerRequests","MercuryServerDispatcher","MercurySingletonProvider","MercuryWECServerSendMessageQueueRouter"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("MercuryAPIArgsSource").MERCURY;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);c.getForFBID=function(a){return h.getForFBID(a)};c.get=function(){return h.get()};function c(c){var d;d=a.call(this,c)||this;d.$MercuryWECServerRequests1=c;c={"/wec/messaging/remove_group_participants/":{request_user_id:c,mode:b("MercuryServerDispatcher").IMMEDIATE,handler:function(a,b){return d.__handleUpdate(a,b)}}};b("MercuryServerDispatcher").registerEndpoints(c);return d}var d=c.prototype;d.sendNewMessage=function(a,c){c===void 0&&(c=g);if(a.client_state&&a.client_state!==b("MercuryMessageClientState").SEND_TO_SERVER)return;var d=b("MercuryIDs").tokenize(a.thread_id);a=babelHelpers["extends"]({},a,{thread_id:null,other_user_fbid:d.value});b("MercuryWECServerSendMessageQueueRouter").getForFBID(this.$MercuryWECServerRequests1).enqueue(a.other_user_fbid,this.__getSendMessageQueueOptions(),c,a)};d.leaveGroup=function(a){a={group_id:a,participant_ids:[this.$MercuryWECServerRequests1]};this.__sendRequest("/wec/messaging/remove_group_participants/",a)};return c}(b("MercuryPageServerRequests"));var h=new(b("MercurySingletonProvider"))(a);e.exports=a}),null);
__d("MercuryWECMessageActions",["MercuryMessageActions","MercurySingletonMixin","MercuryWECServerRequests"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){var d;d=a.call(this,c)||this;d.$MercuryWECMessageActions1=c;d.__serverRequests=b("MercuryWECServerRequests").getForFBID(c);return d}var d=c.prototype;d.leaveGroup=function(a){this.__serverRequests.leaveGroup(a)};return c}(b("MercuryMessageActions"));Object.assign(a,b("MercurySingletonMixin"),{_instances:{}});e.exports=a}),null);
__d("SelectionPosition",["Event","InputSelection","SubscriptionsHandler"],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a){this.$1=a,this.$2={start:0,end:0},this.$3=new(b("SubscriptionsHandler"))(),this.$4=!1,this.updatePos(),this.enable()}var c=a.prototype;c.getPos=function(){return babelHelpers["extends"]({},this.$2)};c.setPos=function(a,b){this.$2={start:a,end:b},this.restore()};c.updatePos=function(){this.$2=b("InputSelection").get(this.$1)};c.restore=function(){b("InputSelection").set(this.$1,this.$2.start,this.$2.end)};c.enable=function(){this.$4||(this.$3.addSubscriptions(b("Event").listen(this.$1,"keyup",this.updatePos.bind(this)),b("Event").listen(this.$1,"click",this.updatePos.bind(this))),this.$4=!0)};c.disable=function(){this.$4&&(this.$3.release(),this.$4=!1)};return a}();e.exports=a}),null);
__d("PagesMessageSuggestedResponseHandler",["invariant","ActorURI","AsyncRequest","XPagesMessagingSuggestedResponseController","XPagesMessagingSuggestedResponseFeedbackController","isEmpty"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$2=a,this.$1=b,this.$3=!1,this.$5=!1}var c=a.prototype;c.requestSuggestedResponseAsync=function(a,c){var d=this;this.$3=!0;var e=b("XPagesMessagingSuggestedResponseController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(e,this.$1)).setData({message:this.$2.body}).setMethod("POST").setHandler(function(b){return d.$6(b.payload,a)}).setErrorHandler(c).send()};c.sendFeedback=function(a){this.hasReceviedSuggestedResponse()||g(0,1526);var c=b("XPagesMessagingSuggestedResponseFeedbackController").getURIBuilder().getURI();new(b("AsyncRequest"))().setURI(b("ActorURI").create(c,this.$1)).setMethod("POST").setData({message_id:this.$4,accepted:a}).send()};c.$6=function(a,b){a.messageFound&&(this.$4=a.messageID),b(this.$2.message_id,a)};c.shouldBeTreatedAsRejected=function(){return!this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse()};c.hasReceviedSuggestedResponse=function(){return!b("isEmpty")(this.$4)};c.alreadyRequested=function(){return this.$3};c.getMessageID=function(){return this.$2.message_id};c.getHasBeenAccepted=function(){return this.$5};return a}();e.exports=a}),null);
__d("LeadFormsDataBridge",["AdsAPILeadGenDataFields","AdsGenericFilter","AdsGenericFilterField","AdsGenericFilterFieldType","AdsGenericFilterOperator","AdsGenericFilterSet","AdsGraphAPI","LeadGenDataStatus","promiseDone"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=[b("AdsAPILeadGenDataFields").CREATED_TIME,b("AdsAPILeadGenDataFields").ID,b("AdsAPILeadGenDataFields").NAME,b("AdsAPILeadGenDataFields").QUESTIONS];a=new(b("AdsGenericFilterField"))("status",b("AdsGenericFilterFieldType").STRING);c=new(b("AdsGenericFilterField"))("is_not_continued_flow",b("AdsGenericFilterFieldType").BOOLEAN);var h=new(b("AdsGenericFilter"))(a,b("AdsGenericFilterOperator").EQUAL,b("LeadGenDataStatus").ACTIVE),i=new(b("AdsGenericFilter"))(c,b("AdsGenericFilterOperator").NOT_EQUAL,!0);d={fetch:function(a,c,d,f){var k={access_token:a,fields:g,filtering:new(b("AdsGenericFilterSet"))([h,i]).toAPI()};a||delete k.access_token;b("promiseDone")(b("AdsGraphAPI").get(e.id).object("page",c).edge("leadgen_forms").batched().get(k),function(a){return d(j(a.data))},function(a){return f(a)})}};function j(a){return a.map(function(a){return{id:a.id,name:a.name,created_time:a.create_time,questions:a.questions.map(function(a){return a.label})}})}e.exports=d}),null);
__d("SavedResponsesConstants",[],(function(a,b,c,d,e,f){a={editPanelViewMode:{LIST:"LIST",CREATE:"CREATE",EDIT:"EDIT",PERSONALIZE:"PERSONALIZE"},sortingKey:{LAST_USED:"LAST_USED",MOST_USED:"MOST_USED",LAST_CREATED:"LAST_CREATED"},browsePanelAttachModeWidth:300,editPanelDialogWidth:600,listItemImageHeight:60,listItemImageWidth:60};e.exports=a}),null);
__d("SavedResponsesActionButton.react",["cx","Image.react","React","ShimButton.react","XUIGrayText.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_uvx",this.props.className);return b("React").createElement(b("ShimButton.react"),{className:a,onClick:this.props.onClick},b("React").createElement(b("Image.react"),{src:this.props.image,className:"_uvy"}),b("React").createElement(b("XUIGrayText.react"),{shade:"medium",className:"_uvz"},this.props.label))};return c}(b("React").Component);c.propTypes={image:a.object.isRequired,label:a.string.isRequired,onClick:a.func.isRequired};e.exports=c}),null);
__d("SavedResponsesImage.react",["cx","ActorURI","AsyncRequest","Image.react","LoadingIndicator.react","React","XPagesSavedResponseImagePreviewController","XUICloseButton.react","isEmpty","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.$1=null;b.state={currentThumbnailImageId:"",imageUrl:null,isFetchingThumbnail:!1};return b}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){a.imageID!==this.props.imageID&&this.$2(a.imageID)};d.componentDidMount=function(){this.props.imageID&&this.$2(this.props.imageID)};d.componentWillUnmount=function(){this.$1&&this.$1.abort&&(this.$1.abort(),this.$1=null)};d.render=function(){if(!this.$3()&&!this.state.imageUrl)return null;var a="_3mgf";this.$3()?a=b("joinClasses")(a,this.props.loadingClassName):a=b("joinClasses")(a,this.props.displayClassName);return b("React").createElement("div",{className:this.props.className},b("React").createElement("div",{className:a},this.$4()))};d.$2=function(a){__p&&__p();var c=this;if(b("isEmpty")(a)){this.setState({imageUrl:null});return}this.setState({isFetchingThumbnail:!0});var d=b("XPagesSavedResponseImagePreviewController").getURIBuilder().getURI();d=b("ActorURI").create(d,this.props.pageID);this.$1=new(b("AsyncRequest"))();this.$1.setURI(d).setHandler(function(a){return c.$5(a)}).setMethod("POST").setData({image_id:a,target_width:this.props.width,target_height:this.props.height}).send()};d.$3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading};d.$4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail)return b("React").createElement(b("LoadingIndicator.react"),{size:"medium",color:"white",className:"_3mgg"});else if(this.state.imageUrl)return b("React").createElement("div",null,b("React").createElement(b("XUICloseButton.react"),{className:"_3mgn"+(this.props.shouldShowCloseButton?"":" hidden_elem"),size:"medium",onClick:this.props.onClose}),b("React").createElement(b("Image.react"),{src:this.state.imageUrl}));else return null};d.$5=function(a){this.setState({imageUrl:a.payload.url,isFetchingThumbnail:!1})};return c}(b("React").Component);c.propTypes={displayClassName:a.string.isRequired,height:a.number.isRequired,imageID:a.string,isUploading:a.bool,loadingClassName:a.string.isRequired,onClose:a.func,pageID:a.string.isRequired,shouldShowCloseButton:a.bool.isRequired,width:a.number.isRequired};e.exports=c}),null);
__d("SavedResponsesImageUploadHelper",[],(function(a,b,c,d,e,f){__p&&__p();a=function(){"use strict";__p&&__p();function a(a,b){this.$1=a,this.$2=b}var b=a.prototype;b.onUploaderMounted=function(a){this.$3=a};b.onUploadFinished=function(){if(!this.$3)return;var a=this.$3.getImageFiles().pop().toString();this.$2(a)};b.onUploadStarted=function(){this.$1()};return a}();e.exports=a}),null);
__d("SavedResponsesUtils",["invariant","ActorURI","AsyncRequest","SavedResponsesConstants","XPagesSavedResponseNotifyAppliedController","XPagesSavedResponsesAsyncController"],(function(a,b,c,d,e,f,g){__p&&__p();a={generateImageMetadata:function(a){return{filename:"Photo.jpg",image_id:a,filetype:"image/jpeg"}},fetchSavedResponses:function(a,c,d){c=b("XPagesSavedResponsesAsyncController").getURIBuilder().setInt("other_user_id",c).setInt("page_id",a).getURI();c=b("ActorURI").create(c,a);new(b("AsyncRequest"))().setURI(c).setHandler(function(a){return d(a.payload.responses,a.payload.tokens)}).send()},sortSavedResponses:function(a,c){switch(c){case b("SavedResponsesConstants").sortingKey.LAST_USED:return a.slice().sort(function(a,b){return b.lastTimeUsed-a.lastTimeUsed});case b("SavedResponsesConstants").sortingKey.MOST_USED:return a.slice().sort(function(a,b){return b.usageCount-a.usageCount});case b("SavedResponsesConstants").sortingKey.LAST_CREATED:return a;default:g(0,5738)}},notifySavedResponseApplied:function(a,c){var d=b("XPagesSavedResponseNotifyAppliedController").getURIBuilder().getURI();d=b("ActorURI").create(d,c);new(b("AsyncRequest"))().setURI(d).setMethod("POST").setData({response_id:a.id}).send()}};e.exports=a}),null);
__d("SavedResponsesImageUploader.react",["cx","ChatFileUploaderMixin","Image.react","MercuryConfig","MercuryFileUploader","React","ReactDOM","SavedResponsesUtils","URI","XUIGrayText.react","joinClasses"],(function(a,b,c,d,e,f,g){a=b("React").PropTypes;c=b("React").createClass({displayName:"SavedResponsesImageUploader",mixins:[b("ChatFileUploaderMixin")],propTypes:{image:a.object.isRequired,label:a.string.isRequired,pageID:a.string,imagesOnly:a.bool},componentDidMount:function(){this._fileUploader=new(b("MercuryFileUploader"))(this.props.attachmentsShelf,b("ReactDOM").findDOMNode(this.refs.form),b("ReactDOM").findDOMNode(this.refs.input),b("ReactDOM").findDOMNode(this.refs.attachID)),this.props.imageID&&this._fileUploader.addCachedAttachments([b("SavedResponsesUtils").generateImageMetadata(this.props.imageID)]),this.setUpSubscriptionsHandler(this._fileUploader)},getActionURI:function(){return this.props.pageID?new(b("URI"))(b("MercuryConfig").upload_url).addQueryData("request_user_id",this.props.pageID).toString():b("MercuryConfig").upload_url},getDefaultProps:function(){return{pageID:null}},componentDidUpdate:function(a,c){this.props.imageID&&(this._fileUploader.removeAttachments(),this._fileUploader.addCachedAttachments([b("SavedResponsesUtils").generateImageMetadata(this.props.imageID)]))},render:function(){var a=b("joinClasses")("_uvx",this.props.className);return b("React").createElement("form",{action:this.getActionURI(),className:a,method:"post",ref:"form"},b("React").createElement("input",{type:"hidden",name:"attach_id",ref:"attachID"}),b("React").createElement("div",{className:"_4q60"},b("React").createElement("div",{className:"_4q61 _2d_p"},b("React").createElement(b("Image.react"),{src:this.props.image,className:"_uvy"}),b("React").createElement(b("XUIGrayText.react"),{shade:"medium",className:"_uvz"},this.props.label)),b("React").createElement("input",{type:"file",className:"_2d_q",name:"attachment[]",accept:this.props.imagesOnly?"image/*":"*",ref:"input"})))}});e.exports=c}),null);
__d("SavedResponsesEditResponseContentView.react",["cx","fbt","ix","AbstractTextArea.react","MacroInput.react","React","SavedResponsesActionButton.react","SavedResponsesImage.react","SavedResponsesImageUploader.react","SavedResponsesImageUploadHelper","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this,c=h._("Enter reply title"),d=h._("Write a message...");return b("React").createElement("div",{className:this.props.className},b("React").createElement(b("AbstractTextArea.react"),{className:"_4451 _1vw8",onChange:function(b){return a.props.onTitleChange(b.target.value)},placeholder:c,value:this.props.responseTitle}),b("React").createElement("div",{className:"_38bw _57hg"},b("React").createElement(b("ScrollableArea.react"),{fade:!0,shadow:!0},b("React").createElement(b("MacroInput.react"),{className:"_3jv6",editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:d,readOnly:!1,ref:"macroInput"}),b("React").createElement(b("SavedResponsesImage.react"),{className:"_57hh",displayClassName:"_57hn",imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",pageID:this.props.pageID,height:250,onClose:this.props.onDeleteImage,shouldShowCloseButton:!0,width:250}))),this.$1())};d.$1=function(){var a=this;return b("React").createElement("div",{className:"_57ho"},b("React").createElement(b("SavedResponsesImageUploader.react"),{className:"_3-8v",image:i("89617"),imagesOnly:!0,label:h._("Add Image"),onFileUploaderMounted:function(b){return a.props.uploadHandler.onUploaderMounted(b)},onSubmit:function(){return a.props.uploadHandler.onUploadStarted()},onUploadFinished:function(){return a.props.uploadHandler.onUploadFinished()},pageID:this.props.pageID}),b("React").createElement(b("SavedResponsesActionButton.react"),{image:i("89472"),className:"_3-8v",label:h._("Add Personalization"),onClick:this.props.onPersonalize}))};return c}(b("React").Component);c.propTypes={editorState:a.object.isRequired,isUploadingImage:a.bool.isRequired,pageID:a.string.isRequired,responseImageID:a.string,responseTitle:a.string,onContentChange:a.func.isRequired,onDeleteImage:a.func.isRequired,onPersonalize:a.func.isRequired,onTitleChange:a.func.isRequired,uploadHandler:a.instanceOf(b("SavedResponsesImageUploadHelper")).isRequired};e.exports=c}),null);
__d("SavedResponsesFooterButton.react",["cx","Image.react","React","XUIButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement(b("XUIButton.react"),babelHelpers["extends"]({},this.props,{className:"_3-8i"+(this.props.isHidden?" hidden_elem":""),size:"large",label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?b("React").createElement(b("Image.react"),{src:this.props.image}):null}))};return c}(b("React").Component);c.propTypes={image:a.object,isHidden:a.bool,label:a.string.isRequired,onClick:a.func.isRequired,use:a.oneOf(["default","special","confirm"])};c.defaultProps={use:"default",isHidden:!1};e.exports=c}),null);
__d("SavedResponsesMacroDetailView.react",["cx","fbt","React","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this.props.macro;return!a?null:b("React").createElement(b("ScrollableArea.react"),{fade:!0,shadow:!0},b("React").createElement("div",null,b("React").createElement("div",{className:"_tpd"},a.key),b("React").createElement("div",{className:"_tpe"},a.description),b("React").createElement("div",{className:"_tpf"},h._("Example")),b("React").createElement("div",{className:"_tpg"},a.example)))};return c}(b("React").Component);c.propTypes={macro:a.shape({description:a.string.isRequired,example:a.string.isRequired,key:a.string.isRequired,name:a.string.isRequired,value:a.string.isRequired})};e.exports=c}),null);
__d("SavedResponsesMacroListItem.react",["cx","ix","Image.react","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={isHover:!1};return b}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement("div",{className:"_5y_z","data-id":this.props.macro.key,onClick:function(){return a.$1()},onMouseOut:function(){return a.$2()},onMouseOver:function(){return a.$3()},role:"presentation"},b("React").createElement("div",{className:"_5y__"},this.props.macro.key),b("React").createElement("div",{className:"_5z00"+(this.state.isHover?"":" hidden_elem")},b("React").createElement(b("Image.react"),{src:h("94789")})))};d.$3=function(){this.props.onHover(this.props.macro),this.setState({isHover:!0})};d.$2=function(){this.setState({isHover:!1})};d.$1=function(){this.props.onSelect(this.props.macro)};return c}(b("React").Component);c.propTypes={macro:a.shape({key:a.string.isRequired,value:a.string.isRequired}).isRequired,onHover:a.func.isRequired,onSelect:a.func.isRequired};e.exports=c}),null);
__d("SavedResponsesMacroListView.react",["React","SavedResponsesMacroListItem.react"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("ul",null,this.$1())};d.$1=function(){var a=[];for(var c in this.props.macros){var d=this.props.macros[c];a.push(b("React").createElement(b("SavedResponsesMacroListItem.react"),{macro:d,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected}))}return a};return c}(b("React").Component);c.propTypes={macros:a.object.isRequired,onMacroHover:a.func.isRequired,onMacroSelected:a.func.isRequired};e.exports=c}),null);
__d("SavedResponsesMacroBrowseView.react",["cx","fbt","Grid.react","React","SavedResponsesFooterButton.react","SavedResponsesMacroDetailView.react","SavedResponsesMacroListView.react","ScrollableArea.react","joinClasses"],(function(a,b,c,d,e,f,g,h){__p&&__p();var i=b("Grid.react").GridItem;a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={activeMacro:null};return b}var d=c.prototype;d.render=function(){return b("React").createElement("div",null,this.renderBodyPart(),b("React").createElement("div",{className:"_3ohz"},this.renderFooterPart()))};d.renderBodyPart=function(){var a=this,c=b("joinClasses")("_552a",this.props.className);return b("React").createElement("div",{className:c},b("React").createElement(b("Grid.react"),{cols:2,spacing:"none",className:"_552b"},b("React").createElement(i,{className:"_552c"},b("React").createElement("div",{className:"_552d"}),b("React").createElement(b("ScrollableArea.react"),{fade:!0,shadow:!0},b("React").createElement("div",{className:"_2t-k"},b("React").createElement(b("SavedResponsesMacroListView.react"),{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:function(b){return a.$1(b)}})))),b("React").createElement(i,{className:"_552e"},b("React").createElement(b("SavedResponsesMacroDetailView.react"),{macro:this.state.activeMacro}))))};d.renderFooterPart=function(){var a=h._("Cancel");return b("React").createElement("div",null,b("React").createElement("div",{className:"_552g"},b("React").createElement(b("SavedResponsesFooterButton.react"),{label:a,onClick:this.props.onCancel})))};d.$1=function(a){this.setState({activeMacro:a})};return c}(b("React").Component);c.propTypes={macros:a.object.isRequired,onCancel:a.func.isRequired,onMacroSelected:a.func.isRequired};e.exports=c}),null);
__d("SavedResponsesPanel.react",["cx","fbt","ix","Image.react","React","ShimButton.react","XUICloseButton.react","XUIDialogBody.react","XUIDialogTitle.react","XUIGrayText.react","emptyFunction"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:this.props.className},b("React").createElement(b("XUIDialogTitle.react"),{className:"_3alh",showCloseButton:!1},b("React").createElement("div",{className:"_2rp7"},b("React").createElement(b("ShimButton.react"),{className:"_2rp8"+(this.props.shouldShowBackButton?"":" hidden_elem"),onClick:this.props.onBackButtonClicked},b("React").createElement(b("Image.react"),{src:i("76048"),className:"_2rp9"}),b("React").createElement(b("XUIGrayText.react"),{shade:"light",className:"_2rpa"},this.props.backButtonLabel),b("React").createElement("div",{className:"_2rpb"})),b("React").createElement("span",{className:"_5hp9"},this.props.title)),this.$1()),b("React").createElement(b("XUIDialogBody.react"),{className:"_2rpc"},this.props.children))};d.$1=function(){var a=h._("Close");return b("React").createElement(b("XUICloseButton.react"),{className:"_2rpe",label:a,onClick:this.props.onClose,shade:"dark",size:"medium",title:a,type:"button"})};return c}(b("React").Component);c.propTypes={backButtonLabel:a.string,onBackButtonClicked:a.func,onClose:a.func.isRequired,shouldShowBackButton:a.bool,title:a.string.isRequired};c.defaultProps={backButtonLabel:null,onBackButtonClicked:b("emptyFunction"),shouldShowBackButton:!1};e.exports=c}),null);
__d("MacroSpan.react",["cx","React","XUICloseButton.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isMouseOver:!1},c.$2=function(){c.setState({isMouseOver:!0})},c.$3=function(){c.setState({isMouseOver:!1})},c.$5=function(){c.props.onRemoveToken(c.props.offsetKey)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this.$1();return a===null?null:b("React").createElement("span",{className:"_vxd",onMouseEnter:this.$2,onMouseLeave:this.$3},b("React").createElement("span",{className:"_vxe",contentEditable:!1,"data-offset-key":this.props.offsetKey,spellCheck:!1},this.$4(a),b("React").createElement(b("XUICloseButton.react"),{className:"_vxf",onClick:this.$5,size:"small"})))};d.$4=function(a){var b=a.key in this.props.tokens?this.props.tokens[a.key].value:a.key;a=a.key in this.props.tokens?this.props.tokens[a.key].key:a.key;return this.state.isMouseOver?a:b};d.$1=function(){return this.props.entityKey==null?null:this.props.contentState.getEntity(this.props.entityKey)};return c}(b("React").Component);c.propTypes={contentState:a.func.isRequired,entityKey:a.string,offsetKey:a.string.isRequired,onRemoveToken:a.func.isRequired,tokens:a.object.isRequired};e.exports=c}),null);
__d("getMacrosInputDecorator",["CompositeDraftDecorator","MacroSpan.react","getEntityMatcher"],(function(a,b,c,d,e,f){function a(a,c){return new(b("CompositeDraftDecorator"))([{strategy:b("getEntityMatcher")(function(a){return a.getType()==="TOKEN"}),component:b("MacroSpan.react"),props:{onRemoveToken:c,tokens:a}}])}e.exports=a}),null);
__d("SavedResponsesTokensUtils",["createEditorStateWithRanges","getMacrosInputDecorator"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=new RegExp("{{(.*?)}}","ig"),h={_parseTemplateFieldTokens:function(a){__p&&__p();a=a;var b=[],c;while(c=g.exec(a)){var d={text:c[0],offset:c.index,length:c[0].length,entity:{token:c[0],key:c[1]}};b.push(d);a=a.replace(c[0],d.text);g.lastIndex=d.offset+d.length}if(b.length>0){b[0].offset===0&&(a=" "+a,b.forEach(function(a){a.offset++}));c=b[b.length-1];c.length+c.offset===a.length&&(a+=" ")}return{ranges:b,text:a}},createTemplateFieldsEditorStateWithText:function(a,c,d){a=h._parseTemplateFieldTokens(a);var e=a.ranges;a=a.text;return b("createEditorStateWithRanges")({text:a,ranges:e,decorator:b("getMacrosInputDecorator")(d,c),addEntityToContentStateFn:function(a,b){a=a.entity;return b.createEntity("TOKEN","IMMUTABLE",a)}})},prepareforSend:function(a,b){var c=a.match(/\{{(.*?)\}}/g);c&&c.forEach(function(c){var d=c.replace("{{","").replace("}}","");d=d in b?b[d].value:d;a=a.replace(c,d)});return a}};e.exports=h}),null);
__d("SavedResponsesEditResponseView.react",["cx","fbt","invariant","ActorURI","AsyncRequest","DraftModifier","DraftOffsetKey","EditorState","PagesEventObserver","PagesEventType","React","SavedResponsesEditResponseContentView.react","SavedResponsesFooterButton.react","SavedResponsesImageUploadHelper","SavedResponsesMacroBrowseView.react","SavedResponsesPanel.react","SavedResponsesTokensUtils","SelectionState","XPagesSavedResponsesAddController","XPagesSavedResponsesDeleteController","XPagesSavedResponsesEditController","XUISpinner.react","getMacrosInputDecorator"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;c=!!e.props.initialResponse||!1;d=!!e.props.initialResponse&&!!e.props.initialResponse.image?e.props.initialResponse.image.id:"";var f=e.$1(c);e.state={anyContent:f.getCurrentContent().hasText(),editorState:f,imageID:d,isEditing:c,isModified:!1,isPersonalizing:!1,isProcessing:!1,isUploadingImage:!1,message:f.getCurrentContent().getPlainText(),shouldShowDeleteWarning:!1,shouldShowDiscardWarning:!1,title:e.props.initialResponse?e.props.initialResponse.title:"",uploadHandler:new(b("SavedResponsesImageUploadHelper"))(function(){return e.$2()},function(a){return e.$3(a)})};return e}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(b("SavedResponsesPanel.react"),{backButtonLabel:this.$4(),className:"_15ht",onBackButtonClicked:function(){return a.$5()},onClose:this.props.onClose,shouldShowBackButton:!0,title:this.$6()},this.$7(),b("React").createElement("div",{className:"_3ohz"},this.$8()))};d.$9=function(){return h._("Cancel")};d.$10=function(){return h._("Delete")};d.$11=function(){return h._("Save")};d.$7=function(){__p&&__p();var a=this;if(this.state.isPersonalizing)return b("React").createElement(b("SavedResponsesMacroBrowseView.react"),{className:"_1wxh",macros:this.props.supportedMacros,onCancel:function(){return a.$12()},onMacroSelected:function(b){return a.$13(b)}});else return b("React").createElement(b("SavedResponsesEditResponseContentView.react"),{className:"_1wxh",editorState:this.state.editorState,isUploadingImage:this.state.isUploadingImage,onContentChange:function(b){return a.$14(b)},onDeleteImage:function(){return a.$15()},onPersonalize:function(){return a.$16()},onTitleChange:function(b){a.setState({title:b,isModified:!0})},pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler})};d.$8=function(){var a=this;if(this.state.isPersonalizing)return b("React").createElement(b("SavedResponsesFooterButton.react"),{label:this.$9(),onClick:function(){return a.$12()}});else return this.$17()};d.$18=function(){var a=this,c=h._("Continue Editing"),d=h._("Discard");return b("React").createElement("div",null,b("React").createElement("div",{className:"_2ln1"},h._("Are you sure you want to discard your edit?")),b("React").createElement("div",{className:"_4pnp"},b("React").createElement(b("SavedResponsesFooterButton.react"),{label:d,onClick:function(){return a.$19()}}),b("React").createElement(b("SavedResponsesFooterButton.react"),{label:c,onClick:function(){return a.$20()},use:"confirm"})))};d.$21=function(){var a=this;return b("React").createElement("div",null,b("React").createElement("div",{className:"_2ln1"},h._("Are you sure you want to delete this saved reply?")),b("React").createElement("div",{className:"_4pnp"},b("React").createElement(b("SavedResponsesFooterButton.react"),{label:this.$10(),onClick:function(){return a.$22()}}),b("React").createElement(b("SavedResponsesFooterButton.react"),{label:this.$9(),onClick:function(){return a.$23()},use:"confirm"})))};d.$24=function(){var a=this;return b("React").createElement("div",null,b("React").createElement(b("SavedResponsesFooterButton.react"),{label:this.$10(),onClick:function(){return a.$25()},isHidden:!this.state.isEditing}),b("React").createElement("div",{className:"_4pnp"},b("React").createElement(b("SavedResponsesFooterButton.react"),{label:this.$9(),onClick:function(){return a.props.onEditDone(!1)}}),b("React").createElement(b("SavedResponsesFooterButton.react"),{disabled:!this.state.anyContent,label:this.$11(),onClick:function(){return a.$26()},use:"confirm"}),b("React").createElement(b("XUISpinner.react"),{size:"small",className:(this.state.isProcessing?"":"hidden_elem")+" _3-91 _3-99"})))};d.$17=function(){if(this.state.shouldShowDeleteWarning)return this.$21();else if(this.state.shouldShowDiscardWarning)return this.$18();else return this.$24()};d.$4=function(){if(!this.state.isPersonalizing)return h._("List");else return h._("Edit")};d.$6=function(){if(this.state.isPersonalizing)return h._("Add Personalization");else if(this.state.isEditing)return h._("Edit Reply");else return h._("Create Saved Reply")};d.$27=function(a){__p&&__p();a={text:"{{"+a.name+"}}",key:a.name};var c=this.state.editorState,d=c.getSelection(),e=c.getCurrentContent(),f=d.getStartKey(),g=d.getStartOffset();f=e.getBlockForKey(f);if(f.getText().substr(g-1,1).trim().length>0){f=b("DraftModifier").replaceText(e,d," ");d=f.getSelectionAfter();g=b("DraftModifier").insertText(f,d,a.text,c.getCurrentInlineStyle(),e.createEntity("TOKEN","IMMUTABLE",a).getLastCreatedEntityKey())}else g=b("DraftModifier").replaceText(e,d,a.text,c.getCurrentInlineStyle(),e.createEntity("TOKEN","IMMUTABLE",a).getLastCreatedEntityKey());g=b("DraftModifier").insertText(g,g.getSelectionAfter()," ");c=b("EditorState").push(c,g,"insert-fragment");c=b("EditorState").forceSelection(c,c.getSelection());this.$14(c)};d.$28=function(){__p&&__p();var a=this,c=this.state.editorState.getCurrentContent().getPlainText();b("PagesEventObserver").logData_DEPRECATED({event_name:b("PagesEventType").SAVED_REPLIES_EDIT_REPLY,page_id:this.props.pageID,response_content:c},null);var d=this.props.initialResponse;!d&&i(0,6165);var e=this.state.imageID?this.state.imageID.toString():"";c=b("XPagesSavedResponsesEditController").getURIBuilder().setInt("response_id",d.id).setString("message",c).setString("title",this.state.title);!e&&d.image&&d.image.id?c.setInt("remove_photo_id",d.image.id):c.setInt("photo_id",e);c=b("ActorURI").create(c.getURI(),this.props.pageID);new(b("AsyncRequest"))().setURI(c).setMethod("POST").setHandler(function(){return a.props.onEditDone(!0)}).send()};d.$29=function(){var a=this,c=this.state.editorState.getCurrentContent().getPlainText();b("PagesEventObserver").logData_DEPRECATED({event_name:b("PagesEventType").SAVED_REPLIES_CREATE_REPLY,page_id:this.props.pageID,response_content:c},null);var d=this.state.imageID?this.state.imageID.toString():"";c=b("XPagesSavedResponsesAddController").getURIBuilder().setInt("owner_id",this.props.pageID).setString("message",c).setString("title",this.state.title).setInt("photo_id",d).getURI();c=b("ActorURI").create(c,this.props.pageID);new(b("AsyncRequest"))().setURI(c).setMethod("POST").setHandler(function(){return a.props.onEditDone(!0)}).send()};d.$1=function(a){var c=this;if(a&&this.props.initialResponse){a=this.props.initialResponse.message||"";return b("SavedResponsesTokensUtils").createTemplateFieldsEditorStateWithText(a,function(a){return c.$30(a)},this.props.supportedMacros)}else return b("EditorState").createEmpty(b("getMacrosInputDecorator")(this.props.supportedMacros||{},function(a){return c.$30(a)}))};d.$15=function(){this.setState({imageID:null})};d.$5=function(){this.state.isPersonalizing?this.setState({isPersonalizing:!1}):this.state.isModified?this.setState({shouldShowDiscardWarning:!0}):this.props.onBackButtonClicked()};d.$12=function(){this.setState({isPersonalizing:!1})};d.$13=function(a){b("PagesEventObserver").logData_DEPRECATED({event_name:b("PagesEventType").SAVED_REPLIES_PERSONALIZE,page_id:this.props.pageID},null),this.setState({isPersonalizing:!1}),this.$27(a)};d.$16=function(){this.setState({isPersonalizing:!0}),this.props.onEnterPersonalizeView()};d.$14=function(a){this.setState({anyContent:a.getCurrentContent().hasText(),editorState:a,isModified:!0})};d.$2=function(){b("PagesEventObserver").logData_DEPRECATED({event_name:b("PagesEventType").SAVED_REPLIES_ADD_IMAGE,page_id:this.props.pageID},null),this.setState({imageID:null,isUploadingImage:!0})};d.$3=function(a){this.setState({imageID:a,isUploadingImage:!1})};d.$30=function(a){var c=this.state.editorState;a=b("DraftOffsetKey").decode(a);var d=a.blockKey;a=a.decoratorKey;a=c.getBlockTree(d).getIn([a]);d=new(b("SelectionState"))({anchorKey:d,anchorOffset:a.get("start"),focusKey:d,focusOffset:a.get("end"),isBackward:!1,hasFocus:!0});a=b("DraftModifier").removeRange(c.getCurrentContent(),d,"forward");d=b("EditorState").push(c,a,"remove-range");this.$14(d)};d.$25=function(){this.setState({shouldShowDeleteWarning:!0})};d.$26=function(){this.setState({isProcessing:!0}),this.state.isEditing?this.$28():this.$29()};d.$23=function(){this.setState({shouldShowDeleteWarning:!1})};d.$22=function(){var a=this;b("PagesEventObserver").logData_DEPRECATED({event_name:b("PagesEventType").SAVED_REPLIES_DELETE_REPLY,page_id:this.props.pageID},null);this.setState({shouldShowDeleteWarning:!1,isProcessing:!0});var c=this.props.initialResponse;!c&&i(0,6166);c=b("XPagesSavedResponsesDeleteController").getURIBuilder().setInt("response_id",c.id).getURI();new(b("AsyncRequest"))().setURI(c).setMethod("POST").setHandler(function(){return a.props.onEditDone(!0)}).send()};d.$19=function(){this.props.onBackButtonClicked()};d.$20=function(){this.setState({shouldShowDiscardWarning:!1})};return c}(b("React").Component);c.propTypes={initialResponse:a.shape({id:a.string.isRequired,title:a.string,message:a.string,image:a.object}),onBackButtonClicked:a.func.isRequired,onClose:a.func.isRequired,onEditDone:a.func.isRequired,onEnterPersonalizeView:a.func.isRequired,pageID:a.string.isRequired,supportedMacros:a.object};e.exports=c}),null);
__d("SavedResponsesListItem.react",["cx","fbt","ClientIDs","Link.react","React","ReactDOM","SavedResponsesConstants","SavedResponsesImage.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={shouldShowSeeMoreLink:!1,shouldLimitHeight:!0},d.$4=function(a){__p&&__p();var c=0,e=0,f=/\{{(.*?)\}}/g,g=f.exec(a),h=[];while(g!=null){e=g.index;h.push(b("React").createElement("span",{key:b("ClientIDs").getNewClientID()},a.substring(c,e)));c=e+g[0].length;var i=g[1]in d.props.tokens?d.props.tokens[g[1]].value:g[1];h.push(b("React").createElement("span",{key:b("ClientIDs").getNewClientID(),className:"_-8"},i));g=f.exec(a)}h.push(b("React").createElement("span",{key:b("ClientIDs").getNewClientID()},a.substring(c,a.length)));return h},d.$2=function(){d.props.onResponseSelected(d.props.response,d.props.tokens)},d.$3=function(){d.props.onResponseHover&&d.props.onResponseHover(d.props.response,d.props.tokens)},d.$5=function(a){d.setState({shouldShowSeeMoreLink:!1,shouldLimitHeight:!1}),a.stopPropagation()},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){this.$1()};d.componentDidUpdate=function(){this.$1()};d.render=function(){var a=this.props.response.image&&!0;return b("React").createElement("div",{className:"_33w3"+(a?" _33w4":""),"data-id":this.props.response.id,onClick:this.$2,onMouseEnter:this.$3,onMouseLeave:this.props.onResponseUnhover,role:"presentation"},b("React").createElement("div",{className:"_33w5"+(a?" _33w6":"")+" fwb"},this.props.response.title),b("React").createElement("div",{className:"_33w7"+(this.state.shouldLimitHeight?" _4en5":"")+(!this.props.response.title&&this.props.response.image?" _2pid":""),ref:"message"},this.props.response.image?b("React").createElement(b("SavedResponsesImage.react"),{className:"_33w8",displayClassName:"_33w9",height:b("SavedResponsesConstants").listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:!1,width:b("SavedResponsesConstants").listItemImageWidth}):null,this.$4(this.props.response.message)),b("React").createElement(b("Link.react"),{className:"_4en6"+(this.state.shouldShowSeeMoreLink?"":" hidden_elem"),onClick:this.$5},h._("See more")))};d.$1=function(){if(this.state.shouldLimitHeight===!1||this.state.shouldShowSeeMoreLink)return;var a=b("ReactDOM").findDOMNode(this.refs.message);a.scrollHeight>a.clientHeight&&this.setState({shouldShowSeeMoreLink:!0})};return c}(b("React").Component);c.propTypes={onResponseHover:a.func,onResponseSelected:a.func.isRequired,onResponseUnhover:a.func,pageID:a.string.isRequired,response:a.shape({id:a.string.isRequired,title:a.string,message:a.string.isRequired,image:a.object}),tokens:a.object.isRequired};e.exports=c}),null);
__d("SavedResponsesListView.react",["cx","React","SavedResponsesListItem.react","SavedResponsesUtils","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;if(this.props.isLoadingResponses)return b("React").createElement("div",{className:"_e19"},b("React").createElement(b("XUISpinner.react"),{size:"large"}));var c=this.props.searchQuery.trim().toLowerCase(),d=function(a){return a.message.toLowerCase().indexOf(c)!==-1||(a.title||"").toLowerCase().indexOf(c)!==-1},e=b("SavedResponsesUtils").sortSavedResponses(this.props.responses,this.props.sortingKey);return b("React").createElement("ul",{className:this.props.shouldAdjustRightMargin?"_e1a":""},e.filter(d).map(function(c){return b("React").createElement(b("SavedResponsesListItem.react"),{key:c.id,onResponseHover:a.props.onResponseHover,onResponseSelected:a.props.onResponseSelected,onResponseUnhover:a.props.onResponseUnhover,pageID:a.props.pageID,response:c,tokens:a.props.supportedMacros})}))};return c}(b("React").Component);c.propTypes={isLoadingResponses:a.bool.isRequired,onResponseHover:a.func,onResponseSelected:a.func.isRequired,onResponseUnhover:a.func,pageID:a.string.isRequired,responses:a.array.isRequired,searchQuery:a.string.isRequired,shouldAdjustRightMargin:a.bool};e.exports=c}),null);
__d("SavedResponsesOrderingMenu.react",["cx","fbt","ContextualDialogArrow","PopoverMenu.react","React","ReactXUIMenu","SavedResponsesConstants","XUIPopoverButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("ReactXUIMenu").Item;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){c=a.call(this,c)||this;var d=[{key:b("SavedResponsesConstants").sortingKey.MOST_USED,title:h._("Frequently used")},{key:b("SavedResponsesConstants").sortingKey.LAST_USED,title:h._("Recently used")},{key:b("SavedResponsesConstants").sortingKey.LAST_CREATED,title:h._("Recently created")}];c.$1=d;return c}var d=c.prototype;d.$2=function(){var a=this;return this.$1.find(function(b){return b.key===a.props.activeSortingOptionKey})};d.render=function(){var a=this,c=b("React").createElement(b("ReactXUIMenu"),null,this.$1.map(function(b){return a.$3(b)}));return b("React").createElement("div",{className:this.props.className},b("React").createElement("span",{className:"_4mjo"},h._("Sort by")),b("React").createElement(b("PopoverMenu.react"),{alignv:"baseline",menu:c,layerBehaviors:[b("ContextualDialogArrow")]},b("React").createElement(b("XUIPopoverButton.react"),{label:this.$2().title})))};d.$3=function(a){var c=this;return b("React").createElement(i,{onclick:function(){return c.props.onSortingKeyChanged(a.key)},key:a.key},a.title)};return c}(b("React").Component);e.exports=a}),null);
__d("SavedResponsesListViewContainer.react",["cx","fbt","Layout.react","LeftFillRightFitLayout.react","React","SavedResponsesOrderingMenu.react","XUICloseButton.react","XUITextInput.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Layout.react").Column,j=b("Layout.react").FillColumn;a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=b("joinClasses")("_3ohy",this.props.className);return b("React").createElement("div",{className:a},b("React").createElement(b("LeftFillRightFitLayout.react"),{className:"_1x3h"},this.$1(),b("React").createElement(b("SavedResponsesOrderingMenu.react"),{className:"_4b4m",activeSortingOptionKey:this.props.activeSortingOptionKey,onSortingKeyChanged:this.props.onSortingKeyChanged})),this.props.children,b("React").createElement("div",{className:"_3ohz"},this.props.footerPart))};d.$1=function(){return b("React").createElement(b("Layout.react"),{className:"_4b4n"},b("React").createElement(i,null,b("React").createElement("div",{className:"_1x3i"})),b("React").createElement(j,null,b("React").createElement(b("XUITextInput.react"),{onChange:this.props.onSearchQueryChanged,ref:"inputField",placeholder:h._("Search replies"),value:this.props.searchQuery})),b("React").createElement(i,null,b("React").createElement(b("XUICloseButton.react"),{size:"small",onClick:this.props.onSearchQueryCleared,className:this.props.searchQuery.length===0?"hidden_elem":""})))};return c}(b("React").Component);c.propTypes={footerPart:a.object.isRequired,onSearchQueryChanged:a.func.isRequired,onSearchQueryCleared:a.func.isRequired,searchQuery:a.string.isRequired};e.exports=c}),null);
__d("SavedResponsesManageListView.react",["cx","fbt","ix","React","SavedResponsesConstants","SavedResponsesFooterButton.react","SavedResponsesListView.react","SavedResponsesListViewContainer.react","SavedResponsesPanel.react","ScrollableArea.react"],(function(a,b,c,d,e,f,g,h,i){__p&&__p();a=b("React").PropTypes;c=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c,d)||this;e.$1=function(a){e.setState({activeSortingOptionKey:a})};e.state={searchQuery:"",activeSortingOptionKey:b("SavedResponsesConstants").sortingKey.LAST_CREATED};return e}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(b("SavedResponsesPanel.react"),{className:"_15ht",shouldShowBackButton:!1,onClose:this.props.onClose,title:h._("Saved Replies")},b("React").createElement(b("SavedResponsesListViewContainer.react"),{footerPart:this.$2(),onSearchQueryChanged:function(b){return a.$3(b)},onSearchQueryCleared:function(){return a.$4()},searchQuery:this.state.searchQuery,activeSortingOptionKey:this.state.activeSortingOptionKey,onSortingKeyChanged:this.$1},this.$5()))};d.$5=function(){return b("React").createElement("div",{className:"_4pno"},b("React").createElement(b("ScrollableArea.react"),{fade:!0,shadow:!0},b("React").createElement(b("SavedResponsesListView.react"),{isLoadingResponses:!1,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros,sortingKey:this.state.activeSortingOptionKey}),this.$6()))};d.$2=function(){var a=h._("Create Reply"),c=h._("Done");return b("React").createElement("div",{className:"_4pnp"},b("React").createElement(b("SavedResponsesFooterButton.react"),{label:a,onClick:this.props.onCreateNewReplyClicked,image:i("88945")}),b("React").createElement(b("SavedResponsesFooterButton.react"),{label:c,onClick:this.props.onDoneClicked}))};d.$6=function(){return b("React").createElement("div",{className:"_4pnq"},b("React").createElement("div",{className:"_50f8 _4pnr"},h._("End of saved replies")))};d.$3=function(a){this.setState({searchQuery:a.target.value})};d.$4=function(){this.setState({searchQuery:""})};return c}(b("React").Component);c.propTypes={onClose:a.func.isRequired,onCreateNewReplyClicked:a.func.isRequired,onDoneClicked:a.func.isRequired,onResponseSelected:a.func.isRequired,otherUserID:a.string.isRequired,pageID:a.string.isRequired,responses:a.array.isRequired,supportedMacros:a.object.isRequired};e.exports=c}),null);
__d("SavedResponsesManagePanel.react",["cx","React","SavedResponsesConstants","SavedResponsesEditResponseView.react","SavedResponsesManageListView.react","SavedResponsesUtils","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("React").PropTypes;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b,c){b=a.call(this,b,c)||this;b.state={isLoadingResponses:!0,responseToEdit:null,responses:[],supportedMacros:null,viewType:b.props.initialViewType};return b}var d=c.prototype;d.UNSAFE_componentWillMount=function(){this.$1()};d.render=function(){__p&&__p();var a=this;if(this.state.isLoadingResponses)return b("React").createElement("div",{className:"_15ht"},b("React").createElement("div",{className:"_15hu"},b("React").createElement(b("XUISpinner.react"),{size:"large"})));switch(this.state.viewType){case b("SavedResponsesConstants").editPanelViewMode.LIST:return b("React").createElement(b("SavedResponsesManageListView.react"),{onCreateNewReplyClicked:function(){return a.$2()},onDoneClicked:function(){return a.$3()},otherUserID:this.props.otherUserID,onResponseSelected:function(b,c){return a.$4(b,c)},onClose:this.props.onClose,pageID:this.props.pageID,responses:this.state.responses,supportedMacros:this.state.supportedMacros});case b("SavedResponsesConstants").editPanelViewMode.EDIT:case b("SavedResponsesConstants").editPanelViewMode.CREATE:case b("SavedResponsesConstants").editPanelViewMode.PERSONALIZE:return b("React").createElement(b("SavedResponsesEditResponseView.react"),{initialResponse:this.state.responseToEdit,onBackButtonClicked:function(){return a.$5(!1)},onClose:this.props.onClose,onEditDone:function(b){return a.$5(b)},onEnterPersonalizeView:function(){return a.$6()},pageID:this.props.pageID,supportedMacros:this.state.supportedMacros})}};d.$1=function(){var a=this;this.setState({isLoadingResponses:!0});b("SavedResponsesUtils").fetchSavedResponses(this.props.pageID,this.props.otherUserID,function(b,c){return a.setState({responses:b,supportedMacros:c,isLoadingResponses:!1})})};d.$5=function(a){if(this.props.initialViewType===b("SavedResponsesConstants").editPanelViewMode.CREATE){this.props.onClose();return}a&&this.$1();this.setState({responseToEdit:null,viewType:b("SavedResponsesConstants").editPanelViewMode.LIST})};d.$2=function(){this.setState({responseToEdit:null,viewType:b("SavedResponsesConstants").editPanelViewMode.CREATE})};d.$3=function(){this.props.onClose()};d.$6=function(){this.setState({viewType:b("SavedResponsesConstants").editPanelViewMode.PERSONALIZE})};d.$4=function(a){this.setState({responseToEdit:a,viewType:b("SavedResponsesConstants").editPanelViewMode.EDIT})};return c}(b("React").Component);c.propTypes={initialViewType:a.string,onClose:a.func.isRequired,otherUserID:a.string.isRequired,pageID:a.string.isRequired};c.defaultProps={initialViewType:b("SavedResponsesConstants").editPanelViewMode.LIST};e.exports=c}),null);
__d("PagesManagerInboxFilterStore",["invariant","FluxStore","MessageThreadViewSource","PageCommItemFolder","PageCommPlatform","PageCommSearchType","PagesManagerActionType","PagesManagerDispatcher","PagesManagerInboxCustomLabelSearchableEntry","PagesManagerMessagingLogger","PagesManagerMessagingNavigationUnitKey"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="CUSTOM_TAG_",i="OWNER_";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c;c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerInboxFilterStore1=b("PageCommItemFolder").TODO;c.$PagesManagerInboxFilterStore2={id:null,photoURL:null,name:null};c.$PagesManagerInboxFilterStore3=b("PageCommPlatform").MESSENGER;c.$PagesManagerInboxFilterStore4=!1;c.$PagesManagerInboxFilterStore5=!1;c.$PagesManagerInboxFilterStore6="";c.$PagesManagerInboxFilterStore7=b("PageCommSearchType").COSTUMER;c.$PagesManagerInboxFilterStore8=null;c.$PagesManagerInboxFilterStore9=[];return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE:var c=!1,d=!1;this.$PagesManagerInboxFilterStore3!==a.activeTypeFilter&&a.activeTypeFilter&&(c=!0);this.$PagesManagerInboxFilterStore3===b("PageCommPlatform").MESSENGER&&a.activeFolderFilter&&this.$PagesManagerInboxFilterStore1!==a.activeFolderFilter&&(d=!0);c&&b("PagesManagerMessagingLogger").logMessagesSectionViewEvent(a.pageID,null,a.activeTypeFilter);d&&a.activeFolderFilter!==b("PageCommItemFolder").FOLLOW_UP&&b("PagesManagerMessagingLogger").logPageViewFolderEventForInbox(a.pageID,a.activeFolderFilter,b("MessageThreadViewSource").NEW_MESSAGETAB);a.activeFolderFilter||a.activeTypeFilter||a.activeOwnerFilter||g(0,6210);a.activeFolderFilter&&(this.$PagesManagerInboxFilterStore1=a.activeFolderFilter,this.$PagesManagerInboxFilterStore3===b("PageCommPlatform").WEC&&this.$PagesManagerInboxFilterStore1!==b("PageCommItemFolder").TODO&&(this.$PagesManagerInboxFilterStore3=b("PageCommPlatform").MESSENGER));a.activeTypeFilter&&(this.$PagesManagerInboxFilterStore3=a.activeTypeFilter);a.activeOwnerFilter&&(this.$PagesManagerInboxFilterStore2=a.activeOwnerFilter);this.__emitChange();break;case b("PagesManagerActionType").SEARCH.CHANGE_SEARCH_TERM:this.$PagesManagerInboxFilterStore6=a.searchTerm;this.__emitChange();break;case b("PagesManagerActionType").SEARCH.SELECT_CUSTOMER:this.$PagesManagerInboxFilterStore8=a.pageCustomerID;this.__emitChange();break;case b("PagesManagerActionType").SEARCH.CLEAR:this.$PagesManagerInboxFilterStore6="";this.$PagesManagerInboxFilterStore8=null;this.$PagesManagerInboxFilterStore7=b("PageCommSearchType").COSTUMER;this.$PagesManagerInboxFilterStore2={id:null,photoURL:null,name:null};this.$PagesManagerInboxFilterStore9=[];this.__emitChange();break;case b("PagesManagerActionType").SEARCH.TOGGLE:this.$PagesManagerInboxFilterStore4=a.targetStatus;this.__emitChange();break;case b("PagesManagerActionType").SEARCH.CHANGE_TYPE:a.searchType!==b("PageCommSearchType").ADMIN&&(this.$PagesManagerInboxFilterStore2={id:null,photoURL:null,name:null});this.$PagesManagerInboxFilterStore7=a.searchType;this.__emitChange();break;case b("PagesManagerActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG:this.$PagesManagerInboxFilterStore6="";c=this.$PagesManagerInboxFilterStore9.findIndex(function(b){return b.name===a.label.name});c===-1&&this.$PagesManagerInboxFilterStore9.push(a.label);this.__emitChange();break;case b("PagesManagerActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG:d=this.$PagesManagerInboxFilterStore9.findIndex(function(b){return b.name===a.label.name});d!==-1&&(this.$PagesManagerInboxFilterStore9.splice(d,1),this.__emitChange());break;case b("PagesManagerActionType").LIST.TOGGLE_FOLDER_SELECTOR:this.$PagesManagerInboxFilterStore5=a.isFolderChangeActive;this.__emitChange();break;case b("PagesManagerActionType").NAV.CHANGE_NAV_MODE:this.$PagesManagerInboxFilterStore10=a.navMode;this.__emitChange();break}};d.getCurrentNavMode=function(){return this.$PagesManagerInboxFilterStore10};d.getCurrentSearchCustomLabels=function(){return this.$PagesManagerInboxFilterStore9.map(function(a){return new(b("PagesManagerInboxCustomLabelSearchableEntry"))(a)})};d.getIsFolderChangeActive=function(){return this.$PagesManagerInboxFilterStore5};d.getActiveType=function(){return this.$PagesManagerInboxFilterStore3};d.getActiveFolder=function(){return this.$PagesManagerInboxFilterStore1};d.getActiveOwner=function(){return this.$PagesManagerInboxFilterStore2};d.getActiveMessageFolder=function(){switch(this.$PagesManagerInboxFilterStore1){case b("PageCommItemFolder").FOLLOW_UP:case b("PageCommItemFolder").TODO:case b("PageCommItemFolder").UNREAD:return b("PagesManagerMessagingNavigationUnitKey").FOLDERS.INBOX;case b("PageCommItemFolder").SPAM:return b("PagesManagerMessagingNavigationUnitKey").FOLDERS.SPAM;case b("PageCommItemFolder").DONE:return b("PagesManagerMessagingNavigationUnitKey").FOLDERS.ARCHIVED;default:g(0,6211)}};d.$PagesManagerInboxFilterStore11=function(){switch(this.$PagesManagerInboxFilterStore1){case b("PageCommItemFolder").TODO:case b("PageCommItemFolder").SPAM:case b("PageCommItemFolder").DONE:case b("PageCommItemFolder").FOLLOW_UP:return b("PagesManagerMessagingNavigationUnitKey").FILTERS.ALL;case b("PageCommItemFolder").UNREAD:return b("PagesManagerMessagingNavigationUnitKey").FILTERS.UNREAD;default:g(0,6211)}};d.$PagesManagerInboxFilterStore12=function(){return this.$PagesManagerInboxFilterStore9.length===0?null:h+JSON.stringify(this.$PagesManagerInboxFilterStore9.map(function(a){return a.name}).sort())};d.$PagesManagerInboxFilterStore13=function(){return this.$PagesManagerInboxFilterStore2.id===null?null:i+String(this.$PagesManagerInboxFilterStore2.id)};d.getActiveFilter=function(){return this.$PagesManagerInboxFilterStore13()||this.$PagesManagerInboxFilterStore12()||this.$PagesManagerInboxFilterStore11()};d.getSearchTerm=function(){return this.$PagesManagerInboxFilterStore6};d.getPageCustomerID=function(){return this.$PagesManagerInboxFilterStore8};d.getIsSearchActive=function(){return this.$PagesManagerInboxFilterStore4};d.getSearchType=function(){return this.$PagesManagerInboxFilterStore7};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerInboxListAction",["PagesManagerActionType","PagesManagerDispatcher"],(function(a,b,c,d,e,f){"use strict";a={setInboxListResponseData:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.SET_RESPONSE_DATA,isReady:a})},itemFolderChange:function(a,c,d){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.ITEM_FOLDER_CHANGE,ids:a,newFolder:c,oldFolder:d})},removeMutatedItem:function(a){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.REMOVE_ITEM_FOLDER_CHANGE,ids:a})},banStatusChange:function(a,c){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.BAN_STATUS_CHANGE,isBanned:c,userName:a})},removeBanNotice:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").LIST.REMOVE_BAN_NOTICE})}};e.exports=a}),null);
__d("PagesManagerMessagesInterface",["Animation","Arbiter","AsyncRequest","MercuryThreadActions","MessagingTag","PageCommItemFolder","PageCommItemStatus","PagesManagerAction","PagesManagerInboxFilterStore","PagesManagerInboxListAction","XMessagingSetPreferencesController","ge"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="PagesManagerMessagesInterface";a={applyIfVisibleOnPage:function(a,c){a=b("ge")(a);a&&c(a)},changeThreadSpamStatus:function(a,c,d,e){d?b("MercuryThreadActions").getForFBID(a).markSpam(c,"PagesManagerInterface"):b("MercuryThreadActions").getForFBID(a).unmarkSpam(c,"PagesManagerInterface"),b("PagesManagerInboxListAction").itemFolderChange([c],d?b("PageCommItemStatus").SPAM:e,d?e:b("PageCommItemStatus").SPAM),b("PagesManagerAction").viewListItem(null)},changeThreadArchivedStatus:function(a,c,d,e){d?b("MercuryThreadActions").getForFBID(a).archive(c,g):b("MercuryThreadActions").getForFBID(a).unarchive(c,g)},changeThreadReadStatus:function(a,c,d){d?b("MercuryThreadActions").getForFBID(a).markRead(c,g):b("MercuryThreadActions").getForFBID(a).markUnread(c,g)},markThreadAsSpam:function(a,c,d,e,f,h,i){if(h===b("MessagingTag").OTHER||i)return;c.forEach(function(c){b("MercuryThreadActions").getForFBID(a).markSpam(c,g)});this._updateMercuryPayload(a,c,e,f)},unmarkThreadAsSpam:function(a,c,d,e){c.forEach(function(c){b("MercuryThreadActions").getForFBID(a).unmarkSpam(c,g)}),this._updateMercuryPayload(a,c,d,e)},markThreadAsFollowUp:function(a,c,d,e,f){d=e?b("PageCommItemStatus").FOLLOW_UP:b("PageCommItemStatus").TODO;var h=!0;b("PagesManagerInboxFilterStore").getActiveFolder()===b("PageCommItemFolder").TODO&&(h=!1);e?b("MercuryThreadActions").getForFBID(a).markPageFollowUp(c,g):b("MercuryThreadActions").getForFBID(a).unmarkPageFollowUp(c,g);this._updateMercuryPayload(a,[c],d,f,h)},changeThreadFolderToInbox:function(a,c,d,e,f){switch(e.toUpperCase()){case b("PageCommItemStatus").TODO:case b("PageCommItemStatus").DONE:f?b("MercuryThreadActions").getForFBID(a).changeFolder(c,b("MessagingTag").INBOX):b("MercuryThreadActions").getForFBID(a).unarchive(c,g);this._updateMercuryPayload(a,[c],b("PageCommItemStatus").TODO,e);break;case b("PageCommItemStatus").FOLLOW_UP:this.markThreadAsFollowUp(a,c,d,!1,b("PageCommItemStatus").FOLLOW_UP);break;case b("PageCommItemStatus").SPAM:this.unmarkThreadAsSpam(a,[c],b("PageCommItemStatus").TODO,b("PageCommItemStatus").SPAM);default:return}},changeThreadFolderToDone:function(a,c,d){b("MercuryThreadActions").getForFBID(a).archive(c,g),this._updateMercuryPayload(a,[c],b("PageCommItemStatus").DONE,d)},changeThreadFolderToBackground:function(a,c,d){b("MercuryThreadActions").getForFBID(a).changeFolder(c,b("MessagingTag").PAGE_BACKGROUND),this._updateMercuryPayload(a,[c],b("PageCommItemStatus").DONE,d)},markThreadAsDeleted:function(a,c,d){d!=null&&(a=d),b("MercuryThreadActions").getForFBID(a)["delete"](c,g)},_updateMercuryPayload:function(a,c,d,e,f){f===void 0&&(f=!0),b("MercuryThreadActions").getForFBID(a).updateCommStatus(c,d),b("PagesManagerInboxListAction").itemFolderChange(c,d,e),f&&b("PagesManagerAction").viewListItem(null)},hideElement:function(a){new(b("Animation"))(a).to("opacity",0).duration(150).hide().go()},notifyUpdateCompleted:function(){b("Arbiter").inform("PagesManagerLayout/refreshSection",{section:"messages"})},updateUnreadCount:function(a){b("Arbiter").inform("pagesManagerMessaging/messageUnreadCountUpdated",{metricCount:a}),b("Arbiter").inform("PagesManagerLayout/updateCount",{count:a,section:"messages"}),b("Arbiter").inform("PagesManagerLayout/updateCount",{count:a,section:"messages",subsection:"inbox"})},updatePreferences:function(a){a=b("XMessagingSetPreferencesController").getURIBuilder().setBool("send_on_enter",a.sendOnEnter).getURI();new(b("AsyncRequest"))(a).send()}};e.exports=a}),null);
__d("PagesManagerResizeListener",["EventEmitter"],(function(a,b,c,d,e,f){e.exports=new(b("EventEmitter"))()}),null);
__d("PagesManagerInboxFilterAction",["PagesManagerActionType","PagesManagerDispatcher","PagesManagerMessagingThreadlistAction"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a={changeFolder:function(a,c){b("PagesManagerDispatcher").dispatch({activeFolderFilter:c,pageID:a,type:b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE}),b("PagesManagerMessagingThreadlistAction").resetSearch(a)},changeOwner:function(a,c,d,e){b("PagesManagerDispatcher").dispatch({activeOwnerFilter:{id:c,photoURL:d,name:e},pageID:a,type:b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE}),b("PagesManagerMessagingThreadlistAction").resetSearch(a)},changeType:function(a,c){b("PagesManagerDispatcher").dispatch({activeTypeFilter:c,pageID:a,type:b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE}),b("PagesManagerMessagingThreadlistAction").resetSearch(a)},changeSearchTerm:function(a){b("PagesManagerDispatcher").dispatch({searchTerm:a,type:b("PagesManagerActionType").SEARCH.CHANGE_SEARCH_TERM})},selectCustomer:function(a){b("PagesManagerDispatcher").dispatch({pageCustomerID:a,type:b("PagesManagerActionType").SEARCH.SELECT_CUSTOMER})},clearSearch:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerActionType").SEARCH.CLEAR})},toggleSearch:function(a){b("PagesManagerDispatcher").dispatch({targetStatus:a,type:b("PagesManagerActionType").SEARCH.TOGGLE})},changeSearchType:function(a){b("PagesManagerDispatcher").dispatch({searchType:a,type:b("PagesManagerActionType").SEARCH.CHANGE_TYPE})},addCustomLabel:function(a,c){b("PagesManagerDispatcher").dispatch({label:a,pageID:c,type:b("PagesManagerActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG})},removeCustomLabel:function(a,c){b("PagesManagerDispatcher").dispatch({label:a,pageID:c,type:b("PagesManagerActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG})},toggleFolderSelector:function(a){b("PagesManagerDispatcher").dispatch({isFolderChangeActive:a,type:b("PagesManagerActionType").LIST.TOGGLE_FOLDER_SELECTOR})}};e.exports=a}),null);
__d("PagesManagerContentSearchContainer.react",["cx","fbt","FluxContainer","PagesManagerAction","PagesManagerInboxFilterAction","PagesManagerMessagingMessagelistAction","PagesManagerMessagingMessagelistStore","React","XUIButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=40;function j(a){return b("React").createElement("div",{className:"_6o3q"},a.totalCount===0?h._("No matched messages for \"{query_name}\"",[h._param("query_name",k(a.query,i))]):h._("{selected_index} of {total_count} matched messages for \"{query_name}\"",[h._param("selected_index",a.contentSearchSelectedIndex+1),h._param("total_count",a.totalCount),h._param("query_name",k(a.query,i))]))}function k(a,b){return a.length>b?a.slice(0,b)+"...":a}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(){b("PagesManagerMessagingMessagelistAction").contentSearchSelectedIndex(d.state.contentSearchSelectedIndex-1)},d.$2=function(){b("PagesManagerMessagingMessagelistAction").contentSearchSelectedIndex(d.state.contentSearchSelectedIndex+1)},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesManagerMessagingMessagelistStore")]};c.calculateState=function(a){return{contentSearchSelectedIndex:b("PagesManagerMessagingMessagelistStore").getContentSearchSelectedIndex()}};var d=c.prototype;d.$3=function(){b("PagesManagerInboxFilterAction").toggleSearch(!1),b("PagesManagerInboxFilterAction").clearSearch(),b("PagesManagerAction").clearViewListItem()};d.render=function(){var a=h._("Previous result"),c=h._("Next result"),d=h._("Clear search");return b("React").createElement("div",{className:"_6o3r"},b("React").createElement(b("XUIButton.react"),{"aria-label":a,className:"_6o3s",disabled:this.state.contentSearchSelectedIndex>=this.props.totalCount-1,label:"",onClick:this.$2,role:"button",tabIndex:0,title:a,type:"primary"}),b("React").createElement(b("XUIButton.react"),{"aria-label":c,className:"_6o3t",disabled:this.state.contentSearchSelectedIndex===0,label:"",onClick:this.$1,role:"button",tabIndex:0,title:c,type:"primary"}),this.props.query?b("React").createElement(j,{contentSearchSelectedIndex:this.state.contentSearchSelectedIndex,query:this.props.query,totalCount:this.props.totalCount}):null,b("React").createElement(b("XUIButton.react"),{"aria-label":d,className:"_6o3u",label:"",onClick:this.$3,role:"button",tabIndex:0,title:d,type:"primary"}))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("PageBroadcastUtils",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g="'operator'",h="'AND'",i="'OR'",j="'NOT'",k="'values'",l=":",m=",",n="{",o="}",p="[",q="]";function a(a){__p&&__p();var b=r(a.primarySelectedLabels),c=r(a.additionalSelectedLabels);a=s(a.excludeLabels);var d=[],e=[];b!==""&&d.push(b);c!==""&&d.push(c);a!==""&&d.push(a);if(d.length>1){e.push(n,g,l,h,m,k,l,p);d.forEach(function(a,b){a!==""&&(e.push(a),b!==d.length-1&&e.push(m))});e.push(q,o);return e.join("")}else if(d.length===1)return d[0];return"0"}function r(a){a=a?a.map(function(a){return a.getFBID()}):null;var b=a?[a.toString()]:[];a&&a.length>1&&(a.sort(),b=[n,g,l,i,m,k,l,p,a.toString(),q,o]);return b.join("")}function s(a){a=r(a);if(a!==""){var b=[];b.push(n,g,l,j,m,k,l,p,a,q,o);return b.join("")}return""}e.exports={convertTargetAudienceToJSONString:a}}),null);
__d("PagesManagerBroadcastActionTypes",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({RESET_STATE:null,SELECT_BROADCAST_ID:null,CREATING_NEW_BROADCAST:null,UPDATE_TEXT:null,UPDATE_ATTACHMENT_TYPE:null,UPDATE_MEDIA:null,UPDATE_CTAS:null,UPDATE_AUDIENCE:null,STORE_REFETCH_FUNCTION:null,REACH_ESTIMATION_FINISHED:null,REACH_ESTIMATION_ERROR:null,RESET_REACH_ESTIMATE:null});e.exports={ActionTypes:a}}),null);
__d("PagesManagerBroadcastDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("PagesBroadcastReachEstimationStore",["fbt","FluxLoadObjectStore","PageBroadcastReachEstimateMutation","PagesManagerBroadcastActionTypes","PagesManagerBroadcastDispatcher","gkx","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PagesManagerBroadcastActionTypes").ActionTypes,i=g._("Something went wrong with your request."),j=b("gkx")("779516");a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.__getActionTypes=function(){return j?[this.getActionTypeStartLoad(),h.REACH_ESTIMATION_ERROR,h.REACH_ESTIMATION_FINISHED,h.RESET_REACH_ESTIMATE]:null};d.reduce=function(a,c){__p&&__p();var d,e,f;f=(f=c)!=null?(f=f.payload)!=null?f.input:f:f;switch(c.type){case h.REACH_ESTIMATION_FINISHED:e=(e=c)!=null?(e=e.payload)!=null?e.estimatedReach:e:e;d=(d=c)!=null?(d=d.payload)!=null?d.estimatedReachIfPaid:d:d;if(!f)return a;if(e==null||d==null)return this.__handleOne(a,f,new Error(i));d={current_estimated_reach:d,total_estimated_reach:e};return this.__handleOne(a,f,d);case h.REACH_ESTIMATION_ERROR:e=c.payload.error;return f&&e?this.__handleOne(a,f,e):a;case h.RESET_REACH_ESTIMATE:return b("immutable").Map();default:return a}};d.setPageID=function(a){this.$PagesBroadcastReachEstimationStore1=a};d.__load=function(a){var c=this;if(this.$PagesBroadcastReachEstimationStore1===null||this.$PagesBroadcastReachEstimationStore1===void 0)return;b("PageBroadcastReachEstimateMutation").commit(this.$PagesBroadcastReachEstimationStore1,null,a,function(b){c.$PagesBroadcastReachEstimationStore2(b,a)},function(b){c.$PagesBroadcastReachEstimationStore3(b,a)})};d.$PagesBroadcastReachEstimationStore2=function(a,c){var d;d=(d=a)!=null?(d=d.broadcast_fetch_reach_estimate)!=null?d.reach_estimate:d:d;a=(a=a)!=null?(a=a.broadcast_fetch_reach_estimate)!=null?a.paid_reach_estimate:a:a;b("PagesManagerBroadcastDispatcher").dispatch({type:h.REACH_ESTIMATION_FINISHED,payload:{input:c,estimatedReach:d,estimatedReachIfPaid:a}})};d.$PagesBroadcastReachEstimationStore3=function(a,c){b("PagesManagerBroadcastDispatcher").dispatch({type:h.REACH_ESTIMATION_ERROR,payload:{input:c,error:a}})};return c}(b("FluxLoadObjectStore"));a.__moduleID=e.id;e.exports=new a(b("PagesManagerBroadcastDispatcher"))}),null);
__d("PageSendBroadcastMutation",["RelayFBEnvironment","RelayModern","PageSendBroadcastMutation.graphql"],(function(a,b,c,d,e,f){"use strict";var g=b("RelayModern").commitMutation;b("RelayModern").graphql;var h=function(){return b("PageSendBroadcastMutation.graphql")};function a(a,c,d,e,f,i,j){return g(b("RelayFBEnvironment"),{mutation:h,variables:{input:{text:a,attachment:c,ctas:d,audience:e==="0"?null:e,page_id:f}},onCompleted:i,onError:j})}e.exports={commit:a}}),null);
__d("PagesBroadcastAudienceLabelViewRenderer.react",["cx","React","TextSearchUtil","XUICard.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var c=a.entry,d=c.getColor();return b("React").createElement("li",{className:"_7ajm","data-testid":"labelsSection_search",key:c.getUniqueID(),onMouseDown:function(b){return a.onSelect(c,b)}},b("React").createElement(b("XUICard.react"),{className:"_ke0",style:{backgroundColor:d!==null&&d!==void 0?"#"+d.substring(2):""}}),b("React").createElement("span",{style:{flex:1}},a.renderHighlight(c.getTitle())))}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c=a;d.props.queryString&&(c=b("TextSearchUtil").getTokens(a,d.props.queryString).map(function(a,c){return a.isHighlighted?b("React").createElement("span",{className:"_lme",key:c},a.text):a.text}));return b("React").createElement("span",null,c)},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.render=function(){var a=this,c=[];this.props.entries.map(function(d){c.push(b("React").createElement(h,{entry:d,key:d.getUniqueID(),onSelect:a.props.onSelect,renderHighlight:a.$1}))});return b("React").createElement("div",{className:"_7ajn"},c)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PageBroadcastAudienceTokenizers.react",["ix","cx","fbt","FDSLink.react","FDSSimplePopover.react","FDSText.react","Image.react","PagesBroadcastAudienceLabelViewRenderer.react","PagesManagerInboxSearchTokenRenderer.react","React","SUIAudiencePlatformTheme","SUITokenizer.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=50;function k(a){return b("React").createElement("div",null,b("React").createElement("div",{className:"_7ajp"},b("React").createElement(b("FDSText.react"),{size:"body3"},a.label," ",b("React").createElement(b("FDSSimplePopover.react"),{content:a.tooltipContent})),a.onRemoveTokenizer?b("React").createElement(b("Image.react"),{onClick:a.onRemoveTokenizer,src:g("493872")}):null),b("React").createElement(b("SUITokenizer.react"),{alwaysShowPlaceholder:!0,entries:a.entries,isDisabled:a.disabled,maxEntries:j,onAddEntry:a.onAddEntry,onRemoveEntry:a.onRemoveEntry,placeholder:a.entries&&a.entries.length>0?i._("Add more labels..."):i._("Add labels..."),searchSource:a.searchSource,showEntriesOnFocus:!0,theme:b("SUIAudiencePlatformTheme"),tokenClassName:"_7ajq",tokenRenderer:b("PagesManagerInboxSearchTokenRenderer.react"),viewRenderer:b("PagesBroadcastAudienceLabelViewRenderer.react")}))}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){__p&&__p();var a=this,c,d,e;e=(e=this.props.audienceSelected)!=null?e.primarySelectedLabels:e;d=(d=this.props.audienceSelected)!=null?d.additionalSelectedLabels:d;c=(c=this.props.audienceSelected)!=null?c.excludeLabels:c;var f=null,g=b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("FDSLink.react"),{onClick:function(){a.props.toggleExcludeLabelSelector(!0)}},i._("Exclude Labels")));e&&e.length>0&&!this.props.showAdditionalLabelSelector&&(!this.props.showExcludeLabelSelector?g=b("React").createElement("div",{className:"_3-8x"},i._("{excludeLink} or {narrowLink}",[i._param("excludeLink",b("React").createElement(b("FDSLink.react"),{onClick:function(){a.props.toggleExcludeLabelSelector(!0)}},i._("Exclude Labels"))),i._param("narrowLink",b("React").createElement(b("FDSLink.react"),{onClick:function(){a.props.toggleAdditionalLabelSelector(!0)}},i._("Narrow Further")))])):f=b("React").createElement("div",{className:"_3-8x"},b("React").createElement(b("FDSLink.react"),{onClick:function(){a.props.toggleAdditionalLabelSelector(!0)}},i._("Narrow Further"))));this.props.showAdditionalLabelSelector&&(f=b("React").createElement(k,{disabled:this.props.disabled,entries:d,label:i._("and ALSO with ANY of the following labels"),onAddEntry:this.props.onAddAdditionalLabel,onRemoveEntry:this.props.onRemoveAdditionalLabel,onRemoveTokenizer:function(){a.props.toggleAdditionalLabelSelector(!1)},searchSource:this.props.searchSource,tooltipContent:i._("Choose additional Inbox labels to refine your audience from the labels included above. Adding one Inbox label will decrease the size of your audience, and each additional Inbox label will increase the size from there.")}));this.props.showExcludeLabelSelector&&(g=b("React").createElement(k,{disabled:this.props.disabled,entries:c,label:i._("DON'T send to people who have ANY of the following labels"),onAddEntry:this.props.onAddExcludeLabel,onRemoveEntry:this.props.onRemoveExcludeLabel,onRemoveTokenizer:function(){a.props.toggleExcludeLabelSelector(!1)},searchSource:this.props.searchSource,tooltipContent:i._("Choose Inbox labels to exclude people from the audience included above. Each new option will decrease the size of your audience.")}));return b("React").createElement("div",{className:"_3-8z"},b("React").createElement(b("FDSText.react"),{size:"body2",weight:"bold"},i._("Target by Inbox Label (Optional)")),b("React").createElement(b("FDSSimplePopover.react"),{content:i._("Narrow your audience by choosing to include or exclude people with certain Inbox labels. You can label conversations with people in the Page Inbox.")}),b("React").createElement(k,{disabled:this.props.disabled,entries:e,label:i._("Send to people with ANY of the following labels"),onAddEntry:this.props.onAddPrimaryLabel,onRemoveEntry:this.props.onRemovePrimaryLabel,searchSource:this.props.searchSource,tooltipContent:i._("Adding Inbox labels will expand your broadcast audience to include more people. Make your audience more specific by using labels to narrow your audience or exclude people.")}),f,g)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerInboxAccordion.react",["cx","Link.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.state={isExpanded:c.props.initalExpanded},c.$1=function(){(c.props.disableCollapse!==!0||!c.state.isExpanded)&&c.setState(function(a,b){return{isExpanded:!a.isExpanded}}),c.props.onClick&&c.props.onClick()},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.componentDidUpdate=function(a){a.forceOpen!==this.props.forceOpen&&this.props.forceOpen===!0&&this.state.isExpanded===!1&&this.setState({isExpanded:!0})};d.render=function(){var a=!this.state.isExpanded&&this.props.collapsedHeader!==void 0?this.props.collapsedHeader:this.props.header;return b("React").createElement("div",{className:this.props.className},b("React").createElement(b("Link.react"),{className:"_6q2e"+(this.props.useDefaultCursor===!0?" _6_nb":""),onClick:this.$1},a),this.state.isExpanded?this.props.children:null)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerComposerSectionCard.react",["ix","cx","FDSText.react","Image.react","PagesManagerInboxAccordion.react","React","asset"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();function i(a){return b("React").createElement("div",{className:"_6_od"},a.leftIcon,b("React").createElement("div",{className:"_6_oe"},b("React").createElement(b("FDSText.react"),{size:"header3",weight:"bold"},a.header),b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body1"},a.subtitle)),a.isCollapsible?b("React").createElement(b("Image.react"),{className:"_6vpp",src:a.isCollapsed?g("504840"):g("566392")}):null)}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_6arn"},b("React").createElement(b("PagesManagerInboxAccordion.react"),{children:this.props.body,collapsedHeader:b("React").createElement(i,{header:this.props.header,isCollapsed:!0,isCollapsible:this.props.isCollapsible,leftIcon:this.props.leftIcon,subtitle:this.props.collapsedSubtitle!==void 0?this.props.collapsedSubtitle:this.props.subtitle}),disableCollapse:!this.props.isCollapsible,forceOpen:!!this.props.forceOpen,header:b("React").createElement(i,{header:this.props.header,isCollapsed:!1,isCollapsible:this.props.isCollapsible,leftIcon:this.props.leftIcon,subtitle:this.props.subtitle}),initalExpanded:this.props.isCollapsible?!!this.props.initalExpanded:!0,useDefaultCursor:!this.props.isCollapsible}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesBroadcastAudienceSelector.react",["ix","cx","fbt","FDSLink.react","FDSSimplePopover.react","FDSSpinner.react","FDSText.react","Image.react","PageBroadcastAudienceTokenizers.react","PagesBusinessToolsCustomLabelSelectSource","PagesManagerBroadcastActionTypes","PagesManagerBroadcastDispatcher","PagesManagerComposerSectionCard.react","React","RelayModern","URI","XUINotice.react","XUIText.react","asset","formatNumber","suiMargin","PagesBroadcastAudienceSelector_data.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("PagesManagerBroadcastActionTypes").ActionTypes;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;function k(a){var c=new(b("URI"))("https://www.facebook.com/policies/pages_groups_events/"),d=new(b("URI"))("https://developers.facebook.com/docs/messenger-platform/policy/policy-overview"),e="notify",f=null,g=i._("Pages that are reported by users, or go against {facebook terms link in banner} or the {messenger policy link in banner} may lose access to this feature.",[i._param("facebook terms link in banner",b("React").createElement(b("FDSLink.react"),{href:c},i._("Facebook Pages Terms"))),i._param("messenger policy link in banner",b("React").createElement(b("FDSLink.react"),{href:d},i._("Messenger Platform Policy,")))]);a.isPageFlaggedAsSpam?(g=i._("Broadcast messaging has been disabled because your Page has gone against the {facebook terms link text in banner} \/ {messenger policy link text in banner}",[i._param("facebook terms link text in banner",b("React").createElement(b("FDSLink.react"),{href:c},i._("Facebook Pages Terms"))),i._param("messenger policy link text in banner",b("React").createElement(b("FDSLink.react"),{href:d},i._("Messenger Platform Policy")))]),e="warn",f=i._("Your Page can't send broadcasts.")):a.totalCapReached&&a.monthlyBroadcastLimit!==null&&(e="recommend",f=i._("Your Page can't send broadcasts right now."),g=i._({"*":"Your Page has sent everyone {number} broadcasts this month, the current maximum per month. You can send more broadcasts next month.","_1":"Your Page has sent everyone 1 broadcast this month, the current maximum per month. You can send more broadcasts next month."},[i._plural(a.monthlyBroadcastLimit,"number",b("formatNumber")(a.monthlyBroadcastLimit))]));return b("React").createElement(b("XUINotice.react"),{className:"_71hg",size:"medium",use:e},f?b("React").createElement(b("XUIText.react"),{className:"_3-95",display:"block",size:"header3",weight:"bold"},f):null,b("React").createElement(b("XUIText.react"),{display:"block",size:"body2"},g))}function l(a){__p&&__p();var c,d,e;if(!a.shouldshowErrors||a.monthlyBroadcastLimit===null||a.monthlyBroadcastLimit===void 0||!a.reachEstimationValue)return null;e=(e=a.audienceSelected)!=null?(e=e.primarySelectedLabels)!=null?e.length:e:e;d=(d=a.audienceSelected)!=null?(d=d.additionalSelectedLabels)!=null?d.length:d:d;c=(c=a.audienceSelected)!=null?(c=c.excludeLabels)!=null?c.length:c:c;if((e===void 0||e===null||e===0)&&(d===void 0||d===null||d===0)&&(c===void 0||c===null||c===0))return null;if(a.reachEstimationValue&&a.reachEstimationValue.current_estimated_reach===0)return b("React").createElement(b("XUINotice.react"),{className:"_3-8y",size:"medium",use:"warn"},b("React").createElement(b("XUIText.react"),{display:"block",size:"header3",weight:"bold"},i._("You Can't Send This Audience a Broadcast")),b("React").createElement(b("XUIText.react"),{className:"_3-8x",display:"block",size:"body2"},i._({"*":"Your Page might've sent this audience {number} broadcasts this month, the current maximum per month, or this audience might not include anyone who can receive a broadcast. Please choose another audience.","_1":"Your Page might've sent this audience 1 broadcast this month, the current maximum per month, or this audience might not include anyone who can receive a broadcast. Please choose another audience."},[i._plural(a.monthlyBroadcastLimit,"number",b("formatNumber")(a.monthlyBroadcastLimit))])));else if(a.reachEstimationValue&&a.reachEstimationValue.current_estimated_reach<a.reachEstimationValue.total_estimated_reach)return b("React").createElement(b("XUINotice.react"),{className:"_3-8y",size:"medium"},b("React").createElement(b("XUIText.react"),{display:"block",size:"header3",weight:"bold"},i._("Some People Can't Receive This Broadcast")),b("React").createElement(b("XUIText.react"),{className:"_3-8x",display:"block",size:"body2"},i._({"*":"This number is an estimate. Some people in this audience might have received {number} broadcasts this month, the current maximum per month, or might belong to another audience you've sent broadcasts to. These people have been excluded from the estimated reach.","_1":"This number is an estimate. Some people in this audience might have received 1 broadcast this month, the current maximum per month, or might belong to another audience you've sent broadcasts to. These people have been excluded from the estimated reach."},[i._plural(a.monthlyBroadcastLimit,"number",b("formatNumber")(a.monthlyBroadcastLimit))])));return null}c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={showAdditionalLabelSelector:!1,showExcludeLabelSelector:!1},d.$2=function(a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&c.primarySelectedLabels&&(c.primarySelectedLabels.push(a),b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))},d.$3=function(a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&c.additionalSelectedLabels&&(c.additionalSelectedLabels.push(a),b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))},d.$4=function(a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&c.excludeLabels&&(c.excludeLabels.push(a),b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))},d.$5=function(a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&c.primarySelectedLabels&&(c.primarySelectedLabels=c.primarySelectedLabels.filter(function(b){return b.getFBID()!==a.getFBID()}),b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))},d.$6=function(a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&c.additionalSelectedLabels&&(c.additionalSelectedLabels=c.additionalSelectedLabels.filter(function(b){return b.getFBID()!==a.getFBID()}),b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))},d.$7=function(a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&c.excludeLabels&&(c.excludeLabels=c.excludeLabels.filter(function(b){return b.getFBID()!==a.getFBID()}),b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))},d.$9=function(a){if(!a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&(c.excludeLabels=[],b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))}d.setState({showExcludeLabelSelector:a})},d.$10=function(a){if(!a){var c=babelHelpers["extends"]({},d.props.audienceSelected);c&&(c.additionalSelectedLabels=[],b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:c}))}d.setState({showAdditionalLabelSelector:a})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){if(!this.props.audienceSelected){var a={primarySelectedLabels:[],additionalSelectedLabels:[],excludeLabels:[]};b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:a})}};d.$1=function(){var a=this,b;b=((b=this.props.data)!=null?(b=b.custom_tags)!=null?b.edges:b:b)||[];return b.map(function(b){return b&&b.node?{id:b.node.id!==null&&b.node.id!==void 0?b.node.id:"",name:b.node.name!==null&&b.node.name!==void 0?b.node.name:"",page_id:a.props.pageID,color:b.node.color!==null&&b.node.color!==void 0?b.node.color:""}:{id:"",name:"",page_id:""}}).filter(function(a){return a!==null&&a!==void 0&&Object.keys(a).length!==0})};d.$8=function(a){return a.getFBID()==="0"?i._("Conversations occur between your Page and people in Messenger.").toString():null};d.render=function(){var a;a=(a=this.props.data)!=null?(a=a.broadcast_settings)!=null?a.monthly_broadcast_limit:a:a;var c=a!==null?i._("This number is an estimate. As we continue to try out this feature, which is free for a limited time, you can send people up to {broadcastCap} messages per month to ensure we continue to deliver great experiences to people.",[i._param("broadcastCap",a)]):"",d=b("React").createElement("div",{style:{display:"block"}},b("React").createElement(b("FDSSpinner.react"),null));this.props.reachEstimationValue&&(d=b("React").createElement(b("FDSText.react"),{display:"block",size:"header3",weight:"bold"},i._({"*":"{number} people","_1":"1 person"},[i._plural(this.props.reachEstimationValue.current_estimated_reach,"number",b("formatNumber")(this.props.reachEstimationValue.current_estimated_reach))])));var e=b("PagesBusinessToolsCustomLabelSelectSource").getInstance(this.$1());c=b("React").createElement("div",{className:"_6_oc"},b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-97",size:"body1"},i._("Choose who you want to send this broadcast to. You can send it to anyone who's messaged your Page in the past year but not in the past 24 hours.")),b("React").createElement("div",{className:"_7140"},b("React").createElement("div",null,b("React").createElement(b("FDSText.react"),null,i._("Estimated reach")),b("React").createElement(b("FDSSimplePopover.react"),{content:c,contentWidthUseSparingly:288})),d,b("React").createElement(b("FDSText.react"),{color:"placeholder",size:"body3"},i._("This estimate reflects everyone who's eligible to be sent a broadcast. When no Inbox labels are selected, the estimate shows the total number of people eligible. The estimate will change based on any Inbox labels you use to narrow your audience."))),b("React").createElement(b("PageBroadcastAudienceTokenizers.react"),{audienceSelected:this.props.audienceSelected,disabled:!this.props.totalAudienceReachObtained||this.props.totalCapReached,onAddAdditionalLabel:this.$3,onAddExcludeLabel:this.$4,onAddPrimaryLabel:this.$2,onRemoveAdditionalLabel:this.$6,onRemoveExcludeLabel:this.$7,onRemovePrimaryLabel:this.$5,searchSource:e,showAdditionalLabelSelector:this.state.showAdditionalLabelSelector,showExcludeLabelSelector:this.state.showExcludeLabelSelector,toggleAdditionalLabelSelector:this.$10,toggleExcludeLabelSelector:this.$9}),b("React").createElement(l,{audienceSelected:this.props.audienceSelected,monthlyBroadcastLimit:a,reachEstimationValue:this.props.reachEstimationValue,shouldshowErrors:this.props.shouldshowErrors}));return b("React").createElement("div",null,b("React").createElement(k,{isPageFlaggedAsSpam:this.props.isPageFlaggedAsSpam,monthlyBroadcastLimit:a,totalCapReached:this.props.totalCapReached}),b("React").createElement(b("PagesManagerComposerSectionCard.react"),{body:c,collapsedSubtitle:this.props.reachEstimationValue?i._("Estimated Reach: {reachEstimationValue}",[i._param("reachEstimationValue",this.props.reachEstimationValue.current_estimated_reach)]):i._("Estimated Reach: ..."),header:i._("Audience"),initalExpanded:!0,isCollapsible:!0,leftIcon:b("React").createElement("div",{className:"_6_ne _7142"},b("React").createElement(b("Image.react"),{src:g("480677")}))}))};return c}(b("React").PureComponent);e.exports=a(c,{data:function(){return b("PagesBroadcastAudienceSelector_data.graphql")}})}),null);
__d("PagesBroadcastLabelSelector.react",["ix","cx","fbt","FDSLink.react","FDSSimplePopover.react","FDSSpinner.react","FDSText.react","Image.react","PagesBusinessToolsCustomLabelSearchableEntry","PagesBusinessToolsCustomLabelSelectSource","PagesManagerBroadcastActionTypes","PagesManagerBroadcastDispatcher","PagesManagerComposerSectionCard.react","React","RelayModern","SUIAudiencePlatformTheme","SUISearchableSelector.react","URI","XUINotice.react","XUIText.react","asset","formatNumber","suiMargin","PagesBroadcastLabelSelector_data.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("PagesManagerBroadcastActionTypes").ActionTypes;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var k={name:i._("Total Conversations").toString(),id:"0",page_id:""};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){if(!this.props.labelSelected){var a=new(b("PagesBusinessToolsCustomLabelSearchableEntry"))(k);a={primarySelectedLabels:[a],additionalSelectedLabels:[],excludeLabels:[]};b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:a})}};d.$1=function(){var a=this,b;b=((b=this.props.data)!=null?(b=b.custom_tags)!=null?b.edges:b:b)||[];b=b.map(function(b){if(b&&b.node)return{id:b.node.id!==null&&b.node.id!==void 0?b.node.id:"",name:b.node.name!==null&&b.node.name!==void 0?b.node.name:"",page_id:a.props.pageID};else return k}).filter(function(a){return Object.keys(a).length!==0});b.unshift(k);return b};d.$2=function(a){a={primarySelectedLabels:[a]};b("PagesManagerBroadcastDispatcher").dispatch({type:j.UPDATE_AUDIENCE,audience:a})};d.$3=function(a){return a.getFBID()==="0"?i._("Conversations occur between your Page and people in Messenger.").toString():null};d.render=function(){__p&&__p();var a;a=(a=this.props.data)!=null?(a=a.broadcast_settings)!=null?a.monthly_broadcast_limit:a:a;var c=a!==null?i._("This number is an estimate. As we continue to test this feature, which is free for a limited time, the number of messages you can send people are limited to {broadcastCap} per month to ensure we're continuing to deliver great experiences for people.",[i._param("broadcastCap",a)]):"",d=b("React").createElement(b("FDSSpinner.react"),null),e=null,f=this.props.labelSelected;f&&this.props.reachEstimationValue&&(d=b("React").createElement(b("FDSText.react"),{display:"block",size:"header3",weight:"bold"},i._({"*":"{number} people","_1":"1 person"},[i._plural(this.props.reachEstimationValue.current_estimated_reach,"number",b("formatNumber")(this.props.reachEstimationValue.current_estimated_reach))])),this.props.reachEstimationValue.current_estimated_reach===0?f.getFBID()!=="0"&&a!==null&&(e=b("React").createElement(b("XUINotice.react"),{className:"_3-8y",size:"medium",use:"warn"},b("React").createElement(b("XUIText.react"),{display:"block",size:"header3",weight:"bold"},i._("You Can't Send This Audience a Broadcast")),b("React").createElement(b("XUIText.react"),{className:"_3-8x",display:"block",size:"body2"},i._({"*":"Your Page might've sent this audience {number} broadcasts this month, the current maximum per month, or this audience might not include anyone who can receive a broadcast. Please choose another audience.","_1":"Your Page might've sent this audience 1 broadcast this month, the current maximum per month, or this audience might not include anyone who can receive a broadcast. Please choose another audience."},[i._plural(a,"number",b("formatNumber")(a))])))):this.props.reachEstimationValue.current_estimated_reach<this.props.reachEstimationValue.total_estimated_reach&&a!==null&&(e=b("React").createElement(b("XUINotice.react"),{className:"_3-8y",size:"medium"},b("React").createElement(b("XUIText.react"),{display:"block",size:"header3",weight:"bold"},i._("Some People Can't Receive This Broadcast")),b("React").createElement(b("XUIText.react"),{className:"_3-8x",display:"block",size:"body2"},i._({"*":"This number is an estimate. Some people in this audience might have received {number} broadcasts this month, the current maximum per month, or might belong to another audience you've sent broadcasts to. These people have been excluded from the estimated reach.","_1":"This number is an estimate. Some people in this audience might have received 1 broadcast this month, the current maximum per month, or might belong to another audience you've sent broadcasts to. These people have been excluded from the estimated reach."},[i._plural(a,"number",b("formatNumber")(a))])))));f=new(b("URI"))("https://www.facebook.com/policies/pages_groups_events/");var h=new(b("URI"))("https://developers.facebook.com/docs/messenger-platform/policy/policy-overview"),j="notify",k=null,l=i._("Pages that are reported by users, or go against {facebook terms link in banner} or the {messenger policy link in banner} may lose access to this feature.",[i._param("facebook terms link in banner",b("React").createElement(b("FDSLink.react"),{href:f},i._("Facebook Pages Terms"))),i._param("messenger policy link in banner",b("React").createElement(b("FDSLink.react"),{href:h},i._("Messenger Platform Policy,")))]);this.props.isPageFlaggedAsSpam?(l=i._("Broadcast messaging has been disabled because your Page has gone against the {facebook terms link text in banner} \/ {messenger policy link text in banner}",[i._param("facebook terms link text in banner",b("React").createElement(b("FDSLink.react"),{href:f},i._("Facebook Pages Terms"))),i._param("messenger policy link text in banner",b("React").createElement(b("FDSLink.react"),{href:h},i._("Messenger Platform Policy")))]),j="warn",k=i._("Your Page can't send broadcasts.")):this.props.totalCapReached&&a!==null&&(j="recommend",k=i._("Your Page can't send broadcasts right now."),l=i._({"*":"Your Page has sent everyone {number} broadcasts this month, the current maximum per month. You can send more broadcasts next month.","_1":"Your Page has sent everyone 1 broadcast this month, the current maximum per month. You can send more broadcasts next month."},[i._plural(a,"number",b("formatNumber")(a))]));f=b("React").createElement(b("XUINotice.react"),{className:"_71hg",size:"medium",use:j},k?b("React").createElement(b("XUIText.react"),{className:"_3-95",display:"block",size:"header3",weight:"bold"},k):null,b("React").createElement(b("XUIText.react"),{display:"block",size:"body2"},l));h=b("PagesBusinessToolsCustomLabelSelectSource").getInstance(this.$1());a=b("React").createElement("div",{className:"_6_oc"},b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-97",size:"body1"},i._("Choose who you want to send this broadcast to. You can send it to anyone who's messaged your Page in the past year but not in the past 24 hours. Use Inbox labels to send a broadcast to a specific audience.")),b("React").createElement("div",{className:"_7140"},b("React").createElement("div",null,b("React").createElement(b("FDSText.react"),null,i._("Estimated reach")),b("React").createElement(b("FDSSimplePopover.react"),{content:c,contentWidthUseSparingly:288})),d),b("React").createElement("div",{className:"_3-8y"},b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body2",weight:"bold"},i._("Send to this Inbox label:")),b("React").createElement(b("SUISearchableSelector.react"),{className:"_7141",getTooltipForEntry:this.$3,isDisabled:!this.props.totalAudienceReachObtained||this.props.totalCapReached,onChange:this.$2,placeholder:this.props.labelSelected&&this.props.labelSelected.getData()?this.props.labelSelected.getName():i._("Total Conversations"),searchSource:h,theme:b("SUIAudiencePlatformTheme"),value:this.props.labelSelected,width:414}),e));return b("React").createElement("div",null,f,b("React").createElement(b("PagesManagerComposerSectionCard.react"),{body:a,collapsedSubtitle:this.props.reachEstimationValue?i._("Estimated Reach: {reachEstimationValue}",[i._param("reachEstimationValue",this.props.reachEstimationValue.current_estimated_reach)]):i._("Estimated Reach: ..."),header:i._("Audience"),initalExpanded:!0,isCollapsible:!0,leftIcon:b("React").createElement("div",{className:"_6_ne _7142"},b("React").createElement(b("Image.react"),{src:g("480677")}))}))};return c}(b("React").PureComponent);e.exports=a(c,{data:function(){return b("PagesBroadcastLabelSelector_data.graphql")}})}),null);
__d("PagesContentEditorMessageComposer.react",["cx","fbt","FDSText.react","FileInputUploader","PagesContentEditorAttachment.react","PagesContentEditorConstants","PagesContentEditorCTASection.react","PagesReplyComposerEditorContainer.react","PagesReplyComposerToolbarContainer.react","React","SUIBusinessTheme","SUIErrorComponentUtil","SUISimplePopover.react","SUITextArea.react","URI"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i="/ajax/mercury/upload.php",j=500,k=25;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={isLoading:!1,hasSizeError:!1},d.$3=function(a){d.setState({hasSizeError:!1,isLoading:!1}),d.props.onSelectAttachmentType(a)},d.$4=function(a){d.$2(a);var c=d.props.pageID?new(b("URI"))(i).addQueryData({request_user_id:d.props.pageID}).toString():new(b("URI"))(i).toString(),e=a.target;d.$1=new(b("FileInputUploader"))(e).setURI(c);d.$1.subscribe("success",d.$5);d.$1.subscribe("failure",d.$6);d.$1.send();d.props.onImageSelect&&d.props.onImageSelect(a)},d.$5=function(a,b){d.setState({isLoading:!1}),d.props.onUploadImageSuccess(b)},d.$6=function(){d.setState({isLoading:!1}),d.props.onUploadImageFailure&&d.props.onUploadImageFailure()},d.$7=function(a){d.$2(a);var c=d.props.pageID?new(b("URI"))(i).addQueryData({request_user_id:d.props.pageID}).toString():new(b("URI"))(i).toString(),e=a.target;d.$1=new(b("FileInputUploader"))(e).setURI(c);d.$1.subscribe("success",d.$8);d.$1.subscribe("failure",d.$9);d.$1.send();d.props.onVideoSelect&&d.props.onVideoSelect(a)},d.$8=function(a,b){d.setState({isLoading:!1}),d.props.onUploadVideoSuccess(b)},d.$9=function(){d.setState({isLoading:!1}),d.props.onUploadVideoFailure&&d.props.onUploadVideoFailure()},d.$10=function(){d.props.onCloseAttachment(),d.setState({hasSizeError:!1,isLoading:!1})},d.$3=function(a){d.props.onSelectAttachmentType(a),d.$1&&d.$1.abort(),d.setState({hasSizeError:!1,isLoading:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){a=a.currentTarget.files;a=a&&a[0];a=a.size/1024/1024;a>k?this.setState({hasSizeError:!0}):this.setState({hasSizeError:!1,isLoading:!0})};d.$11=function(){var a=this.props.errors&&this.props.errors.welcomeTextError,c={composerKey:"welcomeMessage",initialDisabled:this.props.disabled===!0,initialReply:this.props.text,isAdsInterfaceSource:!1,maxCharacterLength:j,pageID:this.props.pageID,placeholderText:null};return this.props.showPersonalization?b("React").createElement(l,{config:c,errorMessage:a,onMessageChange:this.props.onMessageChange,text:this.props.text}):b("React").createElement("span",null,b("React").createElement("div",{className:"_6-b0"},b("React").createElement(b("FDSText.react"),{size:"body2",weight:"bold"},h._("Text")),b("React").createElement(b("FDSText.react"),{color:"secondary",size:"meta1"},j-this.props.text.length)),b("React").createElement("div",{className:"_6-b1"},b("React").createElement(b("SUITextArea.react"),{disabled:this.props.disabled,errorMessage:a,maxLength:j,onChange:this.props.onMessageChange,placeholder:b("PagesContentEditorConstants"),shouldAutoGrow:!0,theme:b("SUIBusinessTheme"),value:this.props.text})))};d.$12=function(){return this.props.hideAttachmentSection?null:[b("React").createElement("div",{className:"_3-8z _3-95",key:"AttachmentTitle"},b("React").createElement(b("FDSText.react"),{size:"body2",weight:"bold"},h._("Attachment (Optional)")),b("React").createElement(b("SUISimplePopover.react"),{content:h._("Add an image or video to your message."),theme:b("SUIBusinessTheme")})),b("React").createElement(b("PagesContentEditorAttachment.react"),{attachmentType:this.props.attachmentType,disabled:this.props.disabled,errors:this.props.errors,hasSizeError:this.state.hasSizeError,isLoading:this.state.isLoading,key:"attachment",media:this.props.media,onAddAttachmentLinkPressed:this.props.onAddAttachmentLinkPressed,onClosePressed:this.$10,onImageSubtitleChange:this.props.onImageSubtitleChange,onImageTitleChange:this.props.onImageTitleChange,onImageUpload:this.$4,onSelectAttachmentType:this.$3,onVideoUpload:this.$7})]};d.$13=function(){return this.props.hideCTASection?null:[b("React").createElement("div",{className:"_3-8z _3-95",key:"ctaTitle"},b("React").createElement(b("FDSText.react"),{size:"body2",weight:"bold"},h._("Button (Optional)")),b("React").createElement(b("SUISimplePopover.react"),{content:h._("Add a button to send people to your website."),theme:b("SUIBusinessTheme")})),b("React").createElement(b("PagesContentEditorCTASection.react"),{ctas:this.props.ctas,disabled:this.props.disabled,errors:this.props.errors,key:"ctas",onAddCTA:this.props.onAddCTA,onCTATitleChange:this.props.onCTATitleChange,onCTAURLChange:this.props.onCTAURLChange,onRemoveCTA:this.props.onRemoveCTA})]};d.render=function(){return b("React").createElement("div",{className:"_6_oc _3-8-"},this.$11(),this.$12(),this.$13())};return c}(b("React").PureComponent);function l(a){var c=b("SUIErrorComponentUtil").getErrorIcon(a,b("SUIBusinessTheme")),d=b("SUIErrorComponentUtil").getErrorBorderColor(a,b("SUIBusinessTheme"));return b("React").createElement("span",null,b("React").createElement("div",{className:"_6-b0"},b("React").createElement(b("FDSText.react"),{size:"body2",weight:"bold"},h._("Text")),b("React").createElement(b("FDSText.react"),{color:"secondary",size:"meta1"},j-a.text.length)),b("React").createElement("div",{className:"_73t9",style:{borderColor:d}},c?b("React").cloneElement(c,babelHelpers["extends"]({},b("SUIErrorComponentUtil").getErrorTooltipProps(a),{className:"_73ta"})):null,b("React").createElement(b("PagesReplyComposerEditorContainer.react"),{className:"_3w-k",config:a.config,onReplyChange:a.onMessageChange,welcomeString:a.text}),b("React").createElement(b("PagesReplyComposerToolbarContainer.react"),{className:"_3w-l",config:a.config})))}l.defaultProps={errorTooltipPosition:"above"};e.exports=a}),null);
__d("PagesBroadcastMessageComposer.react",["PageContentEditorAttachment","PageContentEditorCTA","PagesContentEditorMessageComposer.react","PagesManagerBroadcastActionTypes","PagesManagerBroadcastDispatcher","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("PagesManagerBroadcastActionTypes").ActionTypes;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){var c;c=(c=a)!=null?(c=c.response)!=null?(c=c.payload)!=null?(c=c.metadata)!=null?(c=c[0])!=null?c.image_id:c:c:c:c:c;if(c){a=(a=a)!=null?(a=a.response)!=null?(a=a.payload)!=null?(a=a.metadata)!=null?(a=a[0])!=null?a.src:a:a:a:a:a;a&&b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_MEDIA,media:{id:c,url:a,type:b("PageContentEditorAttachment").IMAGE,"class":"EntBusinessMessageWithItems",title:d.props.media&&d.props.media.title,subtitle:d.props.media&&d.props.media.subtitle}})}},d.$7=function(a,c){if(!d.props.ctas)return;var e=d.props.ctas.slice();e[a].content=c;b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_CTAS,ctas:e})},d.$8=function(a,c){if(!d.props.ctas)return;var e=d.props.ctas.slice();e[a].url=c;b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_CTAS,ctas:e})},d.$9=function(a){if(!d.props.ctas)return;var c=d.props.ctas.slice(0);c.splice(a,1);b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_CTAS,ctas:c})},d.$10=function(){var a=d.props.ctas&&d.props.ctas.slice(),c={content:"",url:"",type:b("PageContentEditorCTA").BUTTON};a?(a.push(c),b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_CTAS,ctas:a})):b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_CTAS,ctas:[c]})},d.$11=function(a){var c=Object.assign({},d.props.media);c.subtitle=a;b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_MEDIA,media:c})},d.$12=function(a){var c=Object.assign({},d.props.media);c.title=a;b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_MEDIA,media:c})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){var c;c=(c=a)!=null?(c=c.response)!=null?(c=c.payload)!=null?(c=c.metadata)!=null?(c=c[0])!=null?c.video_id:c:c:c:c:c;if(c){a=(a=a)!=null?(a=a.response)!=null?(a=a.payload)!=null?(a=a.metadata)!=null?(a=a[0])!=null?a.thumbnail_src:a:a:a:a:a;a&&b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_MEDIA,media:{id:c,url:a,type:b("PageContentEditorAttachment").VIDEO,"class":"EntBusinessMessageWithItems"}})}};d.$3=function(){b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_ATTACHMENT_TYPE,currentAttachmentType:null}),b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_MEDIA,media:null})};d.$4=function(){b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_ATTACHMENT_TYPE,currentAttachmentType:b("PageContentEditorAttachment").IMAGE})};d.$5=function(a){b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_ATTACHMENT_TYPE,currentAttachmentType:a})};d.$6=function(a){b("PagesManagerBroadcastDispatcher").dispatch({type:g.UPDATE_TEXT,text:a})};d.render=function(){return b("React").createElement(b("PagesContentEditorMessageComposer.react"),{attachmentType:this.props.currentAttachmentType,ctas:this.props.ctas,disabled:this.props.disabled,errors:this.props.errors,hideCTASection:this.props.currentAttachmentType===b("PageContentEditorAttachment").VIDEO,media:this.props.media,onAddAttachmentLinkPressed:this.$4,onAddCTA:this.$10,onCloseAttachment:this.$3,onCTATitleChange:this.$7,onCTAURLChange:this.$8,onImageSubtitleChange:this.$11,onImageTitleChange:this.$12,onMessageChange:this.$6,onRemoveCTA:this.$9,onSelectAttachmentType:this.$5,onUploadImageSuccess:this.$1,onUploadVideoSuccess:this.$2,pageID:this.props.pageID,showPersonalization:!1,text:this.props.text})};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerBroadcastModal.react",["cx","fbt","Image.react","React","XUICard.react","XUICardSection.react","XUIDialog.react","XUIDialogBody.react","XUIDialogCloseButton.react","XUIDialogFooter.react","XUIDialogTitle.react"],(function(a,b,c,d,e,f,g,h){"use strict";function i(a){return b("React").createElement(b("XUIDialog.react"),{isStrictlyControlled:!0,label:"test",onHide:a.onHide,shown:a.shown,width:500},b("React").createElement(b("XUIDialogTitle.react"),null,a.dialogTitleText),b("React").createElement(b("XUIDialogBody.react"),null,a.dialogBody),b("React").createElement(b("XUIDialogFooter.react"),null,b("React").createElement(b("XUIDialogCloseButton.react"),{onClick:a.onHide}),a.dialogFooterButton))}function a(a){var c=b("React").createElement(b("XUICard.react"),{style:{border:"none"}},b("React").createElement(b("XUICardSection.react"),{className:"_1f02 _2f27 _2pio"},b("React").createElement(b("Image.react"),{src:"/images/p2p/checkmark-messenger.png"})),b("React").createElement(b("XUICardSection.react"),{className:"_1f02 _2f27"},h._("You can see all of the broadcasts you've sent in the Broadcasts tab. You'll only see broadcasts in your Page Inbox if someone replies to one.")));return b("React").createElement(i,{dialogBody:c,dialogTitleText:h._("Broadcast Sent"),onHide:a.onHide,shown:!0})}e.exports={PagesManagerBroadcastModal:i,PagesManagerBroadcastSuccessModal:a}}),null);
__d("PagesManagerComposerTopBar.react",["ix","cssVar","cx","fbt","ContextualLayer.react","FDSButton.react","FDSText.react","Image.react","React","asset"],(function(a,b,c,d,e,f,g,h,i,j){"use strict";__p&&__p();function k(a){var c=b("React").createElement("div",{className:"_4zss",style:{borderLeft:"4px solid"+a.color}},b("React").createElement("div",{className:"_75o0"},a.leftIcon),b("React").createElement(b("FDSText.react"),{size:"body3"},a.text));return b("React").createElement(b("ContextualLayer.react"),{alignment:a.alignment,contextRef:a.contextRef,offsetY:8,position:"below",shown:!0},c)}a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(a){c.$1=a},c.$4=function(){return c.$1},c.$5=function(a){c.$2=a},c.$6=function(){return c.$2},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=null,c=null,d=null,e="#FA383E",f=b("React").createElement(b("Image.react"),{className:"_2pih",src:g("494559")});this.props.primaryError!==null&&this.props.primaryError!==void 0?(c=this.props.primaryError,a=this.$4,d="right"):this.props.previewError!==null&&this.props.previewError!==void 0?(c=this.props.previewError,a=this.$6,d="left"):this.props.previewSuccessText!==null&&this.props.previewSuccessText!==void 0&&(c=this.props.previewSuccessText,a=this.$6,d="left",e="#00A400",f=b("React").createElement(b("Image.react"),{src:g("506114")}));return b("React").createElement("div",{className:"_4qd8"},b("React").createElement("span",{className:"_4qd9"},b("React").createElement(b("FDSText.react"),{size:"header3",weight:"bold"},this.props.headerContent)),b("React").createElement("div",{className:"_4qd7"},b("React").createElement("span",{className:"_2phz"},b("React").createElement(b("FDSButton.react"),{icon:b("React").createElement(b("Image.react"),{src:g("492063")}),label:this.props.previewButtonText,onClick:this.props.onPreviewClick,ref:this.$5})),b("React").createElement("span",{className:"_2phz"},b("React").createElement(b("FDSButton.react"),{isDisabled:this.props.cancelDisabled,label:j._("Cancel"),onClick:this.props.onCancel})),b("React").createElement("span",{className:"_2phz"},b("React").createElement(b("FDSButton.react"),{isDisabled:this.props.sendDisabled,label:this.props.primaryButtonText,onClick:this.props.onPrimaryClick,ref:this.$3,use:"primary"})),c!==null&&a&&d?b("React").createElement(k,{alignment:d,color:e,contextRef:a,leftIcon:f,text:c}):null))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerInboxActionType",["ImmutableObject","keyMirrorRecursive"],(function(a,b,c,d,e,f){a=new(b("ImmutableObject"))(b("keyMirrorRecursive")({COMMENT:"",CONFIG_SET:"",FACEBOOK_POST:{LOADED:""},LIST:{MORE_LOADED:""},NUX:{DISMISS:"",HIDE:"",VIEW:""},SWITCH_INTERFACE:{SWITCH_TO_OLD:""}}));e.exports=a}),null);
__d("PagesManagerStore",["FluxStore","PagesManagerActionType","PagesManagerDispatcher","immutable"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c){__p&&__p();c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerStore6=null;c.$PagesManagerStore1=0;c.$PagesManagerStore2=0;c.$PagesManagerStore3=0;c.$PagesManagerStore4=[];c.$PagesManagerStore5=new Map();c.$PagesManagerStore8=0;c.$PagesManagerStore9=0;c.$PagesManagerStore10=0;c.$PagesManagerStore11=null;return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerActionType").LIST.VIEW:this.$PagesManagerStore6=a.listItem;this.__emitChange();break;case b("PagesManagerActionType").LIST.SELECT:this.$PagesManagerStore12(a);this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.HEIGHT_CHANGE:this.$PagesManagerStore2=a.layoutHeight;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.LIST_HEIGHT_CHANGE:this.$PagesManagerStore3=a.height;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.FOOTER_HEIGHT_CHANGE:this.$PagesManagerStore8=a.height;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.HEADER_HEIGHT_CHANGE:this.$PagesManagerStore9=a.height;this.__emitChange();break;case b("PagesManagerActionType").LAYOUT.LIST_HEADER_HEIGHT_CHANGE:this.$PagesManagerStore10=a.height;this.__emitChange();break;case b("PagesManagerActionType").LIST.DESELECT_ALL:this.$PagesManagerStore12({selectedRowsMap:new Map()});this.__emitChange();break;case b("PagesManagerActionType").LIST.INITIAL_VIEW:this.$PagesManagerStore13(a.item);break;case b("PagesManagerActionType").LIST.CLEAR_INITIAL_VIEW:this.$PagesManagerStore7=null;break;case b("PagesManagerActionType").LIST.SET_THREAD_LABELS:var c=a.currentThreadID?a.currentThreadID:this.$PagesManagerStore6;if(c!==null&&c!==void 0)if(this.$PagesManagerStore11)this.$PagesManagerStore11=this.$PagesManagerStore11.set(c,a.selectedThreadLabels);else{var d={};d[c]=a.selectedThreadLabels;this.$PagesManagerStore11=b("immutable").Map(d)}this.__emitChange();break;default:return}};d.$PagesManagerStore13=function(a){this.$PagesManagerStore7=a,this.$PagesManagerStore6=a};d.$PagesManagerStore12=function(a){__p&&__p();var b=this;if(Object.prototype.hasOwnProperty.call(a,"selectedRowsMap")){this.$PagesManagerStore5=a.selectedRowsMap;this.$PagesManagerStore4=Array.from(this.$PagesManagerStore5.keys());return}this.$PagesManagerStore4=a.selectedRows;a.rowsAdded.forEach(function(a){b.$PagesManagerStore5.set(a,!0)});a.rowsRemoved.forEach(function(a){b.$PagesManagerStore5.set(a,!1)})};d.getThreadLabelMap=function(){return this.$PagesManagerStore11};d.getViewingListItem=function(){return this.$PagesManagerStore6};d.getInitialViewingItem=function(){return this.$PagesManagerStore7};d.getLayoutHeight=function(){return this.$PagesManagerStore2};d.getListNavigationHeight=function(){return this.$PagesManagerStore3};d.getFooterHeight=function(){return this.$PagesManagerStore8};d.getHeaderHeight=function(){return this.$PagesManagerStore9};d.getListHeaderHeight=function(){return this.$PagesManagerStore10};d.getIsRowSelected=function(a){return this.$PagesManagerStore5.has(a)?this.$PagesManagerStore5.get(a):!1};d.getSelectedRows=function(){return this.$PagesManagerStore4};d.isSelectionMode=function(){return this.$PagesManagerStore4.length!==0};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a(b("PagesManagerDispatcher"))}),null);
__d("PagesManagerInboxStore",["invariant","FluxStore","HistoryManager","PagesManagerActionType","PagesManagerDispatcher","PagesManagerInboxActionType","PagesManagerInboxFilterStore","PagesManagerInboxGK","PagesManagerInboxNUX","PagesManagerStore","URI"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h="selected_item_id",i="mailbox_id";a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerInboxStore3={};c.$PagesManagerInboxStore4=0;c.$PagesManagerInboxStore5=!1;return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerInboxActionType").CONFIG_SET:this.$PagesManagerInboxStore1=a.config;b("PagesManagerInboxGK").init(this.$PagesManagerInboxStore1);this.__emitChange();break;case b("PagesManagerInboxActionType").NUX.VIEW:this.$PagesManagerInboxStore2=a.nuxID;this.__emitChange();break;case b("PagesManagerInboxActionType").NUX.DISMISS:this.$PagesManagerInboxStore3[a.nuxID]=!0;this.$PagesManagerInboxStore2===a.nuxID&&(this.$PagesManagerInboxStore4++,this.$PagesManagerInboxStore2=null);this.__emitChange();break;case b("PagesManagerInboxActionType").NUX.HIDE:this.$PagesManagerInboxStore2=null;this.$PagesManagerInboxStore4++;this.__emitChange();break;case b("PagesManagerActionType").LIST.VIEW:b("PagesManagerDispatcher").waitFor([b("PagesManagerStore").getDispatchToken()]);this.$PagesManagerInboxStore6(a.listItem);break;case b("PagesManagerInboxActionType").COMMENT:this.$PagesManagerInboxStore5=!0;this.__emitChange();break}};d.hasCommented=function(){return this.$PagesManagerInboxStore5};d.getMailboxID=function(a){var b=this.getConfig();return b.platformConfigs[a].mailboxID};d.getConfig=function(){this.$PagesManagerInboxStore1||g(0,5991);return this.$PagesManagerInboxStore1};d.shouldShowNUX=function(a){var c=b("PagesManagerInboxNUX")[a];c||g(0,5992,a);var d=this.getConfig();return d.nuxConfig[a]&&!this.$PagesManagerInboxStore3[c]&&(!this.$PagesManagerInboxStore2||this.$PagesManagerInboxStore2===c)};d.$PagesManagerInboxStore6=function(a){var c=new(b("URI"))(window.location.href);if(a){b("PagesManagerDispatcher").waitFor([b("PagesManagerInboxFilterStore").getDispatchToken()]);var d=b("PagesManagerInboxFilterStore").getActiveType();d=this.getMailboxID(d);c.addQueryData(i,d).addQueryData(h,a)}else c.removeQueryData(h);b("HistoryManager").go(c.toString(),!1,!0)};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerBroadcastComposerView.react",["ix","cx","fbt","AsyncRequest","FDSText.react","Image.react","PageBroadcastUtils","PageCommPlatform","PageContentEditorAttachment","PagesBroadcastAudienceSelector.react","PagesBroadcastLabelSelector.react","PagesBroadcastMessageComposer.react","PagesContentEditorConstants","PageSendBroadcastMutation","PagesManagerAction","PagesManagerBroadcastActionTypes","PagesManagerBroadcastDispatcher","PagesManagerBroadcastModal.react","PagesManagerComposerSectionCard.react","PagesManagerComposerTopBar.react","PagesManagerInboxLogger","PagesManagerInboxQueryRenderer.react","PagesManagerInboxStore","PagesMessengerPreview.react","React","RelayModern","ResponsiveBlock.react","XPagesMessengerPreviewController","XUIDialogButton.react","asset","PagesManagerBroadcastComposerViewAudienceQuery.graphql"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j,k=b("PagesManagerBroadcastActionTypes").ActionTypes,l=b("PagesManagerBroadcastModal.react").PagesManagerBroadcastModal;b("RelayModern").graphql;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={sendHasBeenClicked:!1,showComposerErrorsForPreview:!1,isSendingPreview:!1,showPreviewSuccessText:!1,showPreviewSendErrors:!1,modal:null,sendingBroadcast:!1},d.$4=function(){__p&&__p();if(d.props.errors&&d.props.errors.errorText!==null){d.setState({showComposerErrorsForPreview:!0});d.$1=window.setTimeout(function(){d.setState({showComposerErrorsForPreview:!1})},3e3);return}d.setState({isSendingPreview:!0});var a={media:d.props.media,ctas:d.props.ctas,text:d.props.text.trim()};a=b("XPagesMessengerPreviewController").getURIBuilder().setString("json",JSON.stringify(a)).setInt("page_id",d.props.pageID).getURI();new(b("AsyncRequest"))().setURI(a).setMethod("POST").setHandler(d.$5).setErrorHandler(d.$6).send()},d.$5=function(){d.setState({showPreviewSuccessText:!0}),d.setState({isSendingPreview:!1}),d.setState({showComposerErrorsForPreview:!1}),d.$1=window.setTimeout(function(){d.setState({showPreviewSuccessText:!1})},3e3)},d.$6=function(){d.setState({showPreviewSendErrors:!0}),d.setState({isSendingPreview:!1}),d.setState({showComposerErrorsForPreview:!1}),d.$1=window.setTimeout(function(){d.setState({showPreviewSendErrors:!1})},3e3)},d.$7=function(){__p&&__p();b("PagesManagerInboxLogger").logBroadcastSendButtonClicked(d.props.selectedAudience?b("PageBroadcastUtils").convertTargetAudienceToJSONString(d.props.selectedAudience):void 0);d.state.sendHasBeenClicked||d.setState({sendHasBeenClicked:!0});if(!d.props.errors){var a,c,e;e=(e=d.props.selectedAudience)!=null?(e=e.primarySelectedLabels)!=null?e[0]:e:e;c=(c=d.props.selectedAudience)!=null?(c=c.additionalSelectedLabels)!=null?c[0]:c:c;a=(a=d.props.selectedAudience)!=null?(a=a.excludeLabels)!=null?a[0]:a:a;if(e&&e.getFBID()==="0"||!e&&!a&&!c){e=b("React").createElement(l,{dialogBody:i._("This broadcast will be sent to all people who have messaged your Page. If you want to reach a more specific group, you can send it to people with the same Page Inbox label."),dialogFooterButton:b("React").createElement(b("XUIDialogButton.react"),{label:i._("Send"),onClick:function(){b("PagesManagerInboxLogger").logBroadcastConfirmationButtonClicked(),d.$8()},use:"confirm"}),dialogTitleText:i._("Send This Broadcast?"),onHide:d.$9,shown:!0});d.setState({modal:e});return}d.$8()}},d.$10=function(){d.setState({sendingBroadcast:!1}),d.props.onBroadcastSuccess()},d.$11=function(){var a=b("React").createElement(l,{dialogBody:i._("Please try sending your message again."),dialogTitleText:i._("Broadcast Not Sent"),onHide:d.$9,shown:!0});d.setState({modal:a,sendingBroadcast:!1})},d.$9=function(){d.setState({modal:null})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentWillUnmount=function(){b("PagesManagerAction").setHeaderHeight(0),window.clearTimeout(this.$1)};d.$2=function(a,c){b("PagesManagerAction").setHeaderHeight(c)};d.$3=function(){b("PagesManagerBroadcastDispatcher").dispatch({type:k.CREATING_NEW_BROADCAST,isCreatingBroadcast:!1})};d.$8=function(){var a=this.props.selectedAudienceReach&&!this.props.selectedAudienceReach.isLoading()?this.props.selectedAudienceReach.getValue():null;if(a&&a.current_estimated_reach===0)return;this.setState({sendingBroadcast:!0});a=null;this.props.selectedAudience&&(a=b("PageBroadcastUtils").convertTargetAudienceToJSONString(this.props.selectedAudience));b("PagesManagerBroadcastDispatcher").dispatch({type:k.RESET_REACH_ESTIMATE});b("PageSendBroadcastMutation").commit(this.props.text,this.props.media,this.props.ctas,a,this.props.pageID,this.$10,this.$11)};d.$12=function(a,c){__p&&__p();var d=this;return b("React").createElement(b("PagesManagerInboxQueryRenderer.react"),{query:j||(j=function(){return b("PagesManagerBroadcastComposerViewAudienceQuery.graphql")}),render:function(e){var f;e.error;e=e.props;if(d.props.shouldShowBroadcastPredicate)return b("React").createElement(b("PagesBroadcastAudienceSelector.react"),{audienceSelected:d.props.selectedAudience,data:e&&e.page,isPageFlaggedAsSpam:c,pageID:d.props.pageID,reachEstimationValue:a,shouldshowErrors:d.state.sendHasBeenClicked,totalAudienceReachObtained:d.props.totalAudienceReachObtained,totalCapReached:d.props.totalCapReached});f=(f=d.props)!=null?(f=f.selectedAudience)!=null?(f=f.primarySelectedLabels)!=null?f[0]:f:f:f;return b("React").createElement(b("PagesBroadcastLabelSelector.react"),{data:e&&e.page,isPageFlaggedAsSpam:c,labelSelected:f,pageID:d.props.pageID,reachEstimationValue:a,totalAudienceReachObtained:d.props.totalAudienceReachObtained,totalCapReached:d.props.totalCapReached})},variables:{pageID:this.props.pageID}})};d.$13=function(a,c){var d=this.state.sendingBroadcast?i._("Sending..."):i._("Send"),e=this.state.sendingBroadcast,f=null;c?(e=!0,f=i._("Your Page can't send broadcasts.")):this.props.totalCapReached?(e=!0,f=i._("Your Page can't send broadcasts right now.")):!a?e=!0:a&&a.current_estimated_reach===0&&this.state.sendHasBeenClicked?(e=!0,f=i._("You Can't Send This Audience a Broadcast")):this.props.errors&&this.state.sendHasBeenClicked&&(e=!0,f=this.props.errors.errorText);c=this.state.showComposerErrorsForPreview&&this.props.errors&&this.props.errors.errorText!==null?i._("You must complete all required fields before previewing your message."):null;this.state.showPreviewSendErrors&&(c=i._("Please try previewing your message again."));a=this.state.isSendingPreview?i._("Preview in Messenger..."):i._("Preview in Messenger");return b("React").createElement(b("ResponsiveBlock.react"),{onResize:this.$2},b("React").createElement(b("PagesManagerComposerTopBar.react"),{headerContent:i._("Create a Broadcast"),onCancel:this.$3,onPreviewClick:this.$4,onPrimaryClick:this.$7,previewButtonText:a,previewError:c,previewSuccessText:this.state.showPreviewSuccessText?i._("A preview of your message has been sent. You can see it in Messenger."):null,primaryButtonText:d,primaryError:f,sendDisabled:e}))};d.render=function(){var a=this.props.selectedAudienceReach&&!this.props.selectedAudienceReach.isLoading()?this.props.selectedAudienceReach.getValue():null,c=b("PagesManagerInboxStore").getConfig().platformConfigs[b("PageCommPlatform").MESSENGER].isPageFlaggedAsSpam;return b("React").createElement("div",{className:"_6_ob"},this.$13(a,c),b("React").createElement("div",{className:"_6_nc",style:{height:this.props.height}},b("React").createElement("div",{className:"_6_nd"},this.$12(a,c),b("React").createElement(b("PagesManagerComposerSectionCard.react"),{body:b("React").createElement(b("PagesBroadcastMessageComposer.react"),{ctas:this.props.ctas,currentAttachmentType:this.props.currentAttachmentType,disabled:c||this.props.totalCapReached,errors:this.state.sendHasBeenClicked||this.state.showComposerErrorsForPreview?this.props.errors:null,media:this.props.media,pageID:this.props.pageID,text:this.props.text}),forceOpen:this.state.sendHasBeenClicked||this.state.showComposerErrorsForPreview?this.props.errors!==null:!1,header:i._("Message"),initalExpanded:!0,isCollapsible:!0,leftIcon:b("React").createElement("div",{className:"_6_ne _6_nf"},b("React").createElement(b("Image.react"),{src:g("561662")})),subtitle:i._("Customize the message you send.")})),b("React").createElement("div",{className:"_6_ng"},b("React").createElement(b("PagesMessengerPreview.react"),{attachmentType:this.props.currentAttachmentType,ctas:this.props.currentAttachmentType===b("PageContentEditorAttachment").VIDEO?null:this.props.ctas,media:this.props.media,pageID:this.props.pageID,pageName:this.props.pageName,pageProfileUrl:this.props.pageProfileUrl,text:this.props.text===""?b("PagesContentEditorConstants"):this.props.text}),b("React").createElement("div",{className:"_6_nh"},b("React").createElement(b("FDSText.react"),{color:"secondary",size:"header3"},i._("Message Preview"))))),this.state.modal)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerBroadcastDataStore",["fbt","FluxReduceStore","PageContentEditorAttachment","PagesManagerBroadcastActionTypes","PagesManagerBroadcastDispatcher","PagesManagerInboxUtils","immutable"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PagesManagerInboxUtils").getErrorSpecsForComposer,i=b("PagesManagerBroadcastActionTypes").ActionTypes;a={selectedBroadcastID:null,isCreatingBroadcast:!1,text:"",currentAttachmentType:b("PageContentEditorAttachment").IMAGE,media:null,ctas:null,hasComposerBeenEdited:!1,selectedAudience:null,totalAudienceReachObtained:!1,totalCapReached:!1,refetch:null};var j=function(b){babelHelpers.inheritsLoose(a,b);function a(){return b.apply(this,arguments)||this}return a}(b("immutable").Record(a));c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.getInitialState=function(){return new j()};d.reduce=function(a,b){__p&&__p();var c;switch(b.type){case i.SELECT_BROADCAST_ID:a=a.set("selectedBroadcastID",b.selectedBroadcastID);return a;case i.CREATING_NEW_BROADCAST:var d=this.getInitialState();d=d.set("totalAudienceReachObtained",a.get("totalAudienceReachObtained"));d=d.set("totalCapReached",a.get("totalCapReached"));d=d.set("refetch",a.get("refetch"));return d.set("isCreatingBroadcast",b.isCreatingBroadcast);case i.UPDATE_TEXT:a=a.set("text",b.text);return a.set("hasComposerBeenEdited",!0);case i.UPDATE_ATTACHMENT_TYPE:a=a.set("currentAttachmentType",b.currentAttachmentType);return a.set("hasComposerBeenEdited",!0);case i.UPDATE_MEDIA:a=a.set("media",b.media);return a.set("hasComposerBeenEdited",!0);case i.UPDATE_CTAS:a=a.set("ctas",b.ctas);return a.set("hasComposerBeenEdited",!0);case i.UPDATE_AUDIENCE:a=a.set("selectedAudience",b.audience);return a.set("hasComposerBeenEdited",!0);case i.REACH_ESTIMATION_FINISHED:d=(d=b)!=null?(d=d.payload)!=null?d.estimatedReachIfPaid:d:d;c=(c=b)!=null?(c=c.payload)!=null?c.input:c:c;c==="0"&&(a=a.set("totalAudienceReachObtained",!0),d===0&&(a=a.set("totalCapReached",!0)));return a;case i.STORE_REFETCH_FUNCTION:return a.set("refetch",b.refetch);default:return a}};d.getRefetchFunction=function(){return this.getState().refetch};d.getText=function(){return this.getState().text};d.getMedia=function(){return this.getState().media};d.getCurrentAttachmentType=function(){return this.getState().currentAttachmentType};d.getCTAs=function(){return this.getState().ctas};d.getSelectedAudience=function(){return this.getState().selectedAudience};d.getIfCreatingBroadcast=function(){return this.getState().isCreatingBroadcast};d.getSelectedBroadcastID=function(){return this.getState().selectedBroadcastID};d.getHasComposerBeenEdited=function(){return this.getState().hasComposerBeenEdited};d.getHasTotalAudienceReachObtained=function(){return this.getState().totalAudienceReachObtained};d.getHasReachedTotalCap=function(){return this.getState().totalCapReached};d.getErrors=function(){var a={mediaError:g._("Add an image or remove the attachment."),ctaErrors:[{buttonNumber:0,ctaLabelError:g._("Buttons must include text."),ctaURLError:g._("Buttons must include a website URL.")},{buttonNumber:0,ctaLabelError:null,ctaURLError:g._("Buttons must include a valid website URL.")}],welcomeTextError:g._("Broadcasts must include text."),imageTitleError:g._("Please enter a title for your image"),errorText:g._("Complete all required fields before saving your message.")};this.getState().currentAttachmentType===b("PageContentEditorAttachment").VIDEO&&(a.ctaErrors=[]);return h(this.getState().text,this.getState().ctas,this.getState().media,this.getState().currentAttachmentType,a)};return c}(b("FluxReduceStore"));c.__moduleID=e.id;e.exports=new c(b("PagesManagerBroadcastDispatcher"))}),null);
__d("PagesManagerBroadcastHistoryDetailView.react",["cx","fbt","AdsMessengerJSONTemplateType","BusinessToolsUtils","DateTime","FDSText.react","MNMessengerCommerceAttachmentType","PageContentEditorAttachment","PageContentEditorCTA","PagesMessengerPreview.react","React","RelayModern","Timezone","formatDate","formatNumber","suiMargin","PagesManagerBroadcastHistoryDetailView_broadcast.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("BusinessToolsUtils").parseBroadcastISODate;a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.$1=function(a){var b=a.attachment;if(!b)return null;a=this.$2(a);return{url:b.uri,type:a,"class":null,id:b.id,title:b.title,subtitle:b.subtitle}};d.$3=function(a){var c,d=a.attachment;if(!d)return null;c=((c=d)!=null?c.template_type:c)==="generic"?(c=d)!=null?c.buttons:c:(d=a)!=null?d.buttons:d;return!c?null:c.map(function(a){return{content:a?a.title:"",url:a&&a.url!==void 0?a.url:"",type:b("PageContentEditorCTA").BUTTON}})};d.$2=function(a){a=a.attachment;if(!a)return null;if(a.type===b("MNMessengerCommerceAttachmentType").VIDEO)return b("PageContentEditorAttachment").VIDEO;else if(a.type===b("MNMessengerCommerceAttachmentType").TEMPLATE&&a.template_type===b("AdsMessengerJSONTemplateType").GENERIC)return b("PageContentEditorAttachment").IMAGE;return null};d.$4=function(a){if(a===null||a===void 0)return null;a=b("DateTime").create(parseInt(a,10),b("Timezone").UTC);a=i(a.toISOString());var c=b("formatDate")(a,"M j, Y");a=b("formatDate")(a,"g:ia");return c+" "+h._("at").toString()+" "+a};d.$5=function(a){return Array.isArray(a)&&typeof a!=="string"&&a.values?a.join(", "):typeof a==="string"?a:""};d.$6=function(a,c,d,e){__p&&__p();var f=this,g=null,i=null,j=null;if(a!==null&&a!==void 0){a=JSON.parse(a);if(a===Object(a)){var k=a.operator,l=a.values;switch(k){case"AND":Array.isArray(l)&&l.forEach(function(a,b){if(b===0)j=f.$5(a.values?a.values:a);else if(a.operator==="NOT"){b=a.values[0];g=f.$5(b.values?b.values:b)}else i=f.$5(a.values?a.values:a)});break;case"OR":j=this.$5(l);break;case"NOT":l=l[0];g=this.$5(l.values?l.values:l);break}}else j=a}k=i!==null?b("React").createElement("div",null,b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-8y",size:"body2"},h._("Who also have any of the following labels:")),b("React").createElement(b("FDSText.react"),{display:"block",size:"body2"},h._("{includeLabels}",[h._param("includeLabels",i)]))):null;l=j!==null?b("React").createElement("div",null,b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-8y",size:"body2"},h._("Sent to people labeled as:")),b("React").createElement(b("FDSText.react"),{display:"block",size:"body2"},h._("{primaryLabels}",[h._param("primaryLabels",j)]))):null;a=g!==null?b("React").createElement("div",null,b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-8y",size:"body2"},h._("Excluding people labeled as:")),b("React").createElement(b("FDSText.react"),{display:"block",size:"body2"},h._("{excludeLabels}",[h._param("excludeLabels",g)]))):null;return b("React").createElement("div",{className:"_6yuc"},b("React").createElement("div",{className:"_6yud"},b("React").createElement(b("FDSText.react"),{size:"header2"},e!==null&&e!==void 0&&e>0?h._({"*":"To: {number} people","_1":"To: 1 person"},[h._plural(e,"number",b("formatNumber")(e))]):h._("To: Unavailable")),b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-8-",size:"body1",weight:"bold"},h._("Audience")),j===null&&g===null&&i===null?b("React").createElement(b("FDSText.react"),{margin:"_3-8y",size:"body2"},h._("Total Conversations")):null,l,k,a,b("React").createElement("div",{className:"_7cly"},b("React").createElement(b("FDSText.react"),{color:"placeholder",display:"block",size:"body2"},h._("{date}",[h._param("date",c)])),b("React").createElement(b("FDSText.react"),{color:"placeholder",display:"block",size:"body2"},h._("By {author}",[h._param("author",d)])))))};d.$7=function(a,c,d,e){return b("React").createElement("div",{className:"_6yuc"},b("React").createElement("div",{className:"_6yud"},b("React").createElement(b("FDSText.react"),{size:"header2"},h._("Broadcast Details")),b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body1"},h._("To: {audience}",[h._param("audience",a)])),b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body1"},h._("Sent: {author}",[h._param("author",c)])),b("React").createElement(b("FDSText.react"),{color:"secondary",size:"body1"},h._("By: {author}",[h._param("author",d)])),b("React").createElement(b("FDSText.react"),{color:"secondary",margin:"_3-8y",size:"body1"},e!==null&&e!==void 0&&e>0?h._("Messages Sent: {messageCount}",[h._param("messageCount",e)]):h._("Messages Sent: Unavailable"))))};d.render=function(){__p&&__p();var a,c,d,e=this.props.broadcast.first_message_text,f=this.props.broadcast.message_json;if(f===null||f===void 0)return b("React").createElement("div",null);f=JSON.parse(f).find(function(a){return Object.prototype.hasOwnProperty.call(a,"attachment")});var g=null,h=null,i=null;f!==null&&f!==void 0&&(g=this.$1(f),h=this.$2(f),i=this.$3(f));f=this.$4(this.props.broadcast.sent_time);d=(d=this.props)!=null?(d=d.broadcast)!=null?(d=d.target_info)!=null?(d=d.edges)!=null?(d=d[0])!=null?(d=d.node)!=null?d.target_predicate_audience_names:d:d:d:d:d:d;c=(c=this.props)!=null?(c=c.broadcast)!=null?c.message_delivered_count:c:c;a=(a=this.props)!=null?(a=a.broadcast)!=null?(a=a.creator_user)!=null?a.name:a:a:a;return b("React").createElement("div",{className:"_6yub"},this.props.shouldShowBroadcastPredicate?this.$6(d,f,a,c):this.$7(d,f,a,c),b("React").createElement("div",{className:"_6yue"},b("React").createElement(b("PagesMessengerPreview.react"),{attachmentType:h,ctas:i,media:g,pageID:this.props.pageID,pageName:this.props.pageName,pageProfileUrl:this.props.pageProfileUrl,text:e!==null&&e!==void 0?e:""})))};return c}(b("React").PureComponent);e.exports=e.exports=a(c,{broadcast:function(){return b("PagesManagerBroadcastHistoryDetailView_broadcast.graphql")}})}),null);
__d("PagesManagerBroadcastViewContainer.react",["cx","FluxContainer","PageBroadcastUtils","PagesBroadcastReachEstimationStore","PagesManagerBroadcastActionTypes","PagesManagerBroadcastComposerView.react","PagesManagerBroadcastDataStore","PagesManagerBroadcastDispatcher","PagesManagerBroadcastHistoryDetailView.react","PagesManagerBroadcastModal.react","PagesManagerInboxDetailLoading.react","PagesManagerInboxQueryRenderer.react","PagesManagerInboxStore","React","RelayModern","PagesManagerBroadcastViewContainerQuery.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=b("PagesManagerBroadcastActionTypes").ActionTypes,i=b("PagesManagerBroadcastModal.react").PagesManagerBroadcastSuccessModal;b("RelayModern").graphql;var j=function(){return b("PagesManagerBroadcastViewContainerQuery.graphql")};a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.onBroadcastSuccess=function(){var a=b("React").createElement(i,{onHide:d.$1});d.state.refetch(40,function(c){b("PagesManagerBroadcastDispatcher").dispatch({type:h.CREATING_NEW_BROADCAST,isCreatingBroadcast:!1}),d.setState({modal:a})})},d.$1=function(){d.setState({modal:null})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesBroadcastReachEstimationStore"),b("PagesManagerBroadcastDataStore")]};c.calculateState=function(a){var c=null,d=b("PagesManagerBroadcastDataStore").getSelectedAudience();d&&(c=b("PagesBroadcastReachEstimationStore").get(b("PageBroadcastUtils").convertTargetAudienceToJSONString(d)));return{broadcastID:b("PagesManagerBroadcastDataStore").getSelectedBroadcastID(),text:b("PagesManagerBroadcastDataStore").getText(),currentAttachmentType:b("PagesManagerBroadcastDataStore").getCurrentAttachmentType(),media:b("PagesManagerBroadcastDataStore").getMedia(),ctas:b("PagesManagerBroadcastDataStore").getCTAs(),hasComposerBeenEdited:b("PagesManagerBroadcastDataStore").getHasComposerBeenEdited(),selectedAudience:d,selectedAudienceReach:c,totalAudienceReachObtained:b("PagesManagerBroadcastDataStore").getHasTotalAudienceReachObtained(),totalCapReached:b("PagesManagerBroadcastDataStore").getHasReachedTotalCap(),refetch:b("PagesManagerBroadcastDataStore").getRefetchFunction(),errors:b("PagesManagerBroadcastDataStore").getErrors(),modal:a?a.modal:null}};var d=c.prototype;d.componentDidMount=function(){b("PagesManagerBroadcastDispatcher").explicitlyRegisterStore(b("PagesBroadcastReachEstimationStore")),b("PagesBroadcastReachEstimationStore").setPageID(this.props.pageID)};d.render=function(){__p&&__p();var a=this;if(this.state.broadcastID!==null)if(this.state.broadcastID===0){var c;c=(c=b("PagesManagerInboxStore").getConfig())!=null?(c=c.inboxRedesignConfig)!=null?c.shouldShowBroadcastPredicate:c:c;return b("React").createElement("div",null,this.state.modal,b("React").createElement(b("PagesManagerBroadcastComposerView.react"),{selectedAudience:this.state.selectedAudience,ctas:this.state.ctas,currentAttachmentType:this.state.currentAttachmentType,errors:this.state.errors,hasComposerBeenEdited:this.state.hasComposerBeenEdited,height:this.props.height,media:this.state.media,onBroadcastSuccess:this.onBroadcastSuccess,pageID:this.props.pageID,pageName:this.props.pageName,pageProfileUrl:this.props.pageProfileUrl,selectedAudienceReach:this.state.selectedAudienceReach,shouldShowBroadcastPredicate:!!c,text:this.state.text,totalAudienceReachObtained:this.state.totalAudienceReachObtained,totalCapReached:this.state.totalCapReached}))}else return b("React").createElement("div",{className:"_6yua",style:{height:this.props.height}},b("React").createElement(b("PagesManagerInboxQueryRenderer.react"),{query:j,render:function(c){var d;c.error;c=c.props;d=(d=b("PagesManagerInboxStore").getConfig())!=null?(d=d.inboxRedesignConfig)!=null?d.shouldShowBroadcastPredicate:d:d;return c?b("React").createElement(b("PagesManagerBroadcastHistoryDetailView.react"),babelHelpers["extends"]({broadcast:c.node,shouldShowBroadcastPredicate:!!d},a.props)):b("React").createElement(b("PagesManagerInboxDetailLoading.react"),{height:a.props.height})},variables:{broadcast_id:this.state.broadcastID}}),this.state.modal);else return b("React").createElement("div",null)};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("PagesManagerInboxAction",["PagesManagerInboxFilterStore","PagesManagerInboxStore","PagesManagerStore","PageCommItemFolder","PagesManagerAction","PagesManagerDispatcher","PagesManagerInboxActionType","PagesManagerInboxFilterAction"],(function(a,b,c,d,e,f){"use strict";b("PagesManagerInboxFilterStore");b("PagesManagerInboxStore");b("PagesManagerStore");a={initialConfig:function(a,c,d){b("PagesManagerDispatcher").dispatch({config:c,type:b("PagesManagerInboxActionType").CONFIG_SET}),d?(b("PagesManagerInboxFilterAction").changeType(a,d.platform),b("PagesManagerInboxFilterAction").changeFolder(a,d.folder),b("PagesManagerAction").viewListItem(d.id)):c.platformConfigs[c.defaultPlatform].defaultFolder===b("PageCommItemFolder").UNREAD&&b("PagesManagerInboxFilterAction").changeFolder(a,b("PageCommItemFolder").UNREAD)},comment:function(){b("PagesManagerDispatcher").dispatch({type:b("PagesManagerInboxActionType").COMMENT})}};e.exports=a}),null);
__d("PagesManagerInboxDetailView.react",["cx","CenteredContainer.react","React","ResponsiveBlock.react","ScrollableArea.react","joinClasses"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b;b=a.call(this)||this;b.$4=function(a,c){b.setState({composerHeight:c})};b.state={composerHeight:0,headerHeight:0};return b}var d=c.prototype;d.componentDidMount=function(){this.$2()};d.componentDidUpdate=function(a,b){this.props.token!==a.token&&this.$2();if(this.state.composerHeight!==b.composerHeight||this.state.headerHeight!==b.headerHeight||this.props.height!==a.height){b=this.props.onScrollHeightChange;b&&b(this.$3())}};d.$2=function(){if(this.$1){var a=this.$1.getArea();a&&a.scrollToBottom()}};d.$3=function(){return Math.max(this.props.height-this.state.headerHeight-this.state.composerHeight,0)};d.$5=function(){var a=this;if(this.props.useCustomScrollableArea)return b("React").createElement("div",{style:{height:this.$3(this.state.headerHeight,this.state.composerHeight)}},this.props.content);else return b("React").createElement(b("ScrollableArea.react"),{className:"_2pw6",height:this.$3(this.state.headerHeight,this.state.composerHeight),ref:function(b){return a.$1=b},shadow:!1},b("React").createElement(b("CenteredContainer.react"),null,this.props.content))};d.render=function(){return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_5n4i"),style:{height:this.props.height}},this.props.searchView,this.$5(),b("React").createElement(b("ResponsiveBlock.react"),{className:"_5n4j",onResize:this.$4,ref:"composerBlock",style:{paddingBottom:this.props.paddingBottom}},this.props.composer))};return c}(b("React").PureComponent);a.defaultProps={onScrollHeightChange:function(){},useCustomScrollableArea:!1};e.exports=a}),null);
__d("PagesManagerInboxFacebookPost.react",["DOMContainer.react","PagesManagerInboxLogger","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.componentDidMount=function(){b("PagesManagerInboxLogger").itemRendered(this.props.commItemID)};d.render=function(){return b("React").createElement(b("DOMContainer.react"),null,this.props.post)};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerInboxFacebookPostComposer.react",["cx","CenteredContainer.react","DOMContainer.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",null,b("React").createElement(b("CenteredContainer.react"),{className:"_2y_2",fullHeight:!0,horizontal:!1,vertical:!0},b("React").createElement(b("DOMContainer.react"),null,this.props.composer)))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerInboxFacebookPostStore",["invariant","ActorURI","AsyncRequest","FluxStore","LoadObject","PagesManagerDispatcher","PagesManagerInboxActionType","XPagesManagerInboxFacebookPostController"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerInboxFacebookPostStore1=new Map();return c}var d=c.prototype;d.__onDispatch=function(a){switch(a.type){case b("PagesManagerInboxActionType").FACEBOOK_POST.LOADED:this.$PagesManagerInboxFacebookPostStore1.set(a.data.commItemID,b("LoadObject").withValue(a.data));this.__emitChange();break}};d.get=function(a,c){this.$PagesManagerInboxFacebookPostStore1.has(a)||(this.$PagesManagerInboxFacebookPostStore1.set(a,b("LoadObject").loading()),this.$PagesManagerInboxFacebookPostStore2(a,c));c=this.$PagesManagerInboxFacebookPostStore1.get(a);c||g(0,693);return c};d.$PagesManagerInboxFacebookPostStore2=function(a,c){var d=b("XPagesManagerInboxFacebookPostController").getURIBuilder().getURI();new(b("AsyncRequest"))(d).setMethod("POST").setData((d={comm_item_id:a},d[b("ActorURI").PARAMETER_ACTOR]=c,d)).send()};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerInboxFacebookPostContainer.react",["FluxContainer","PageCommPlatform","PagesManagerInboxAction","PagesManagerInboxDetailLoading.react","PagesManagerInboxDetailViewContainer.react","PagesManagerInboxFacebookPost.react","PagesManagerInboxFacebookPostComposer.react","PagesManagerInboxFacebookPostStore","PagesManagerInboxLogger","React","RelayModern","UFIAddCommentActionType","UFIDispatcherBase","nullthrows","PagesManagerInboxFacebookPostContainer_commItem.graphql","PagesManagerInboxFacebookPostContainer_story.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerInboxFacebookPostStore")]};c.calculateState=function(a,c){return{post:b("PagesManagerInboxFacebookPostStore").get(b("nullthrows")(c.commItem.id),c.pageID)}};var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("UFIDispatcherBase").register(function(c){c.type===b("UFIAddCommentActionType").SUBMIT_NEW&&!c.replyCommentID&&(a.$3(),b("PagesManagerInboxLogger").logSendComment(b("PageCommPlatform").FACEBOOK,!!a.props.isInboxRedesign,a.props.pageID),b("PagesManagerInboxAction").comment())})};d.componentDidUpdate=function(a,b){a=b.post.getValue();b=a&&a.commItemID;a=this.state.post.getValue();a=a&&a.commItemID;if(b!==a){this.$3();return}};d.componentWillUnmount=function(){this.$1&&b("UFIDispatcherBase").unregister(this.$1)};d.$3=function(){var a=this.$2;a&&(a.scrollToBottom&&a.scrollToBottom())};d.$4=function(){var a=this.state.post.getValueEnforcing();return b("React").createElement(b("PagesManagerInboxFacebookPost.react"),{commItemID:b("nullthrows")(this.props.commItem.id),post:a.element})};d.$5=function(){var a=this.state.post.getValue();return this.state.post.isLoading()||!a?b("React").createElement("div",null):b("React").createElement(b("PagesManagerInboxFacebookPostComposer.react"),{composer:a.composer})};d.render=function(){var a=this;return this.state.post.isLoading()||this.state.post.isEmpty()?b("React").createElement(b("PagesManagerInboxDetailLoading.react"),{height:this.props.height}):b("React").createElement(b("PagesManagerInboxDetailViewContainer.react"),{componentRef:function(b){a.$2=b},composer:this.$5(),content:this.$4(),height:this.props.height,item:this.props.commItem,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID})};return c}(b("React").PureComponent);e.exports=a(b("FluxContainer").create(c,{withProps:!0}),{commItem:function(){return b("PagesManagerInboxFacebookPostContainer_commItem.graphql")},story:function(){return b("PagesManagerInboxFacebookPostContainer_story.graphql")}})}),null);
__d("PagesManagerInboxInstagramUserPhotoContainer.react",["cx","Image.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a="_2q1j"+(this.props.shape==="circle"?" _kpb":"");return b("React").createElement(b("Image.react"),{className:a,height:this.props.imageSize,src:this.props.imageURI,width:this.props.imageSize})};return c}(b("React").PureComponent);a.defaultProps={shape:"square"};e.exports=a}),null);
__d("PagesManagerInboxInstagramPostCommentRow.react",["cx","fbt","Layout.react","Link.react","PagesManagerInboxInstagramUserPhotoContainer.react","React","TextWithEntities.react","Timestamp.react","Tooltip","XUICard.react","XUIText.react","formatDate","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Layout.react").Column,j=b("Layout.react").FillColumn,k=600;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$3=function(){if(c.props.igUser===null||c.props.igUser===void 0)return;c.props.onReplyComment(c.props.igUser.username)},c.$2=function(){if(c.props.commentID===null||c.props.commentID===void 0)return;c.props.onDeleteComment(c.props.commentID)},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.$1=function(){return!this.props.showActions?null:b("React").createElement("div",{className:"_3i54"},b("React").createElement(b("Link.react"),{onClick:this.$2},b("React").createElement("div",babelHelpers["extends"]({className:"_3ybh"},b("Tooltip").propsFor(h._("Delete")),{"data-tooltip-delay":k}))),b("React").createElement(b("Link.react"),{onClick:this.$3},b("React").createElement("div",babelHelpers["extends"]({className:"_3ybi"},b("Tooltip").propsFor(h._("Reply")),{"data-tooltip-delay":k}))))};d.render=function(){var a;a=(a=this.props.igUser)!=null?(a=a.profile_picture_24)!=null?a.uri:a:a;return b("React").createElement(b("XUICard.react"),{className:b("joinClasses")(this.props.showActions?"_3i4z":"",this.props.className)},b("React").createElement(b("Layout.react"),{className:"_3i4-"},b("React").createElement(i,null,b("React").createElement(b("PagesManagerInboxInstagramUserPhotoContainer.react"),{imageSize:this.props.profilePhotoSize,imageURI:a,shape:"circle"})),b("React").createElement(j,null,b("React").createElement("div",{className:"_3i4_"},b("React").createElement(b("XUIText.react"),null,b("React").createElement("span",{className:"_3i53"},this.props.igUser&&this.props.igUser.username),b("React").createElement(b("TextWithEntities.react"),{renderEmoji:!0,text:this.props.message})))),b("React").createElement(i,null,this.$1(),b("React").createElement("div",{className:"_3i55"},b("React").createElement(b("Timestamp.react"),{text:b("formatDate")(this.props.creationTime,"M j"),time:Number(this.props.creationTime)})))))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerInboxInstagramPostCaptionContainer.react",["PagesManagerInboxInstagramPostCommentRow.react","React","RelayModern","emptyFunction","PagesManagerInboxInstagramPostCaptionContainer_igPost.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var g=24;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return!this.props.igPost.caption_text?null:b("React").createElement(b("PagesManagerInboxInstagramPostCommentRow.react"),{className:this.props.className,creationTime:this.props.igPost.creation_time,igUser:this.props.igPost.instagram_actor,message:this.props.igPost.caption_text,onDeleteComment:b("emptyFunction"),onReplyComment:b("emptyFunction"),profilePhotoSize:g,showActions:!1})};return c}(b("React").Component);e.exports=a(c,{igPost:function(){return b("PagesManagerInboxInstagramPostCaptionContainer_igPost.graphql")}})}),null);
__d("PagesManagerInboxInstagramCommentDeleteMutation",["RelayFBEnvironment","RelayModern","RelayRuntime","PagesManagerInboxInstagramCommentDeleteMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").ConnectionHandler,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=function(){return b("PagesManagerInboxInstagramCommentDeleteMutation.graphql")};function a(a,c){var d=function(b){b=b.get(a.instagram_media_id);if(!b)return;b=g.getConnection(b,"PagesManagerInboxInstagramPostCommentsContainer_instagram_comments");b&&g.deleteNode(b,a.instagram_comment_id)};return h(b("RelayFBEnvironment"),{mutation:i,optimisticUpdater:d,updater:d,variables:{input:{actor_id:a.actor_id,instagram_comment_id:a.instagram_comment_id}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("PagesManagerInboxInstagramPostComposerActionTypes",["keyMirrorRecursive"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirrorRecursive")({MESSAGE:{SET:"message/set",APPEND_USERNAME:"message/append_username",CLEAR:"message/clear"}});e.exports=a}),null);
__d("PagesManagerInboxInstagramPostComposerActions",["PagesManagerDispatcher","PagesManagerInboxInstagramPostComposerActionTypes"],(function(a,b,c,d,e,f){"use strict";a={setMessage:function(a){b("PagesManagerDispatcher").dispatch({actionType:b("PagesManagerInboxInstagramPostComposerActionTypes").MESSAGE.SET,message:a})},appendMessage:function(a){b("PagesManagerDispatcher").dispatch({actionType:b("PagesManagerInboxInstagramPostComposerActionTypes").MESSAGE.APPEND_USERNAME,usernameToAppend:a})},clearMessage:function(){b("PagesManagerDispatcher").dispatch({actionType:b("PagesManagerInboxInstagramPostComposerActionTypes").MESSAGE.CLEAR})}};e.exports=a}),null);
__d("PagesManagerInboxInstagramPostCommentRowContainer.react",["PagesManagerInboxInstagramCommentDeleteMutation","PagesManagerInboxInstagramPostCommentRow.react","PagesManagerInboxInstagramPostComposerActions","React","RelayModern","PagesManagerInboxInstagramPostCommentRowContainer_item.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var g=24;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=function(a){b("PagesManagerInboxInstagramCommentDeleteMutation").commit({actor_id:d.props.pageID,instagram_comment_id:a,instagram_media_id:d.props.instagram_media_id})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.$2=function(a){b("PagesManagerInboxInstagramPostComposerActions").appendMessage(a)};d.render=function(){var a=this,c;c=((c=this.props.item)!=null?c.replies:c)||[];c=c.map(function(c){return b("React").createElement(b("PagesManagerInboxInstagramPostCommentRow.react"),{commentID:c.id,creationTime:c.creation_time,igUser:c.instagram_actor,message:c.text,onDeleteComment:a.$1,onReplyComment:a.$2,profilePhotoSize:g,showActions:!0})});return b("React").createElement("div",null,b("React").createElement(b("PagesManagerInboxInstagramPostCommentRow.react"),{commentID:this.props.item.id,creationTime:this.props.item.creation_time,igUser:this.props.item.instagram_actor,message:this.props.item.text,onDeleteComment:this.$1,onReplyComment:this.$2,profilePhotoSize:g,showActions:!0}),c)};return c}(b("React").PureComponent);e.exports=a(c,{item:function(){return b("PagesManagerInboxInstagramPostCommentRowContainer_item.graphql")}})}),null);
__d("PagesManagerInboxInstagramPostCommentsContainer.react",["cx","fbt","Link.react","List.react","PagesManagerInboxInstagramPostCaptionContainer.react","PagesManagerInboxInstagramPostCommentRowContainer.react","PagesManagerInboxLogger","PagesManagerPageCommItemEditSubscriptionHandler","React","RelayModern","emptyFunction","PagesManagerInboxInstagramPostCommentsContainer_igPost.graphql","PagesManagerInboxInstagramPostCommentsContainer_item.graphql","PagesManagerInboxInstagramPostCommentsContainerPaginationQuery.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("RelayModern").createPaginationContainer;b("RelayModern").graphql;var i=10;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$4=function(){d.props.relay.loadMore(i,b("emptyFunction"))},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){var a=this;this.$1=b("PagesManagerPageCommItemEditSubscriptionHandler").addCallback(function(c){return a.props.relay.refetchConnection(a.props.igPost.instagram_comments.edges.length,b("emptyFunction"))});b("PagesManagerInboxLogger").itemRendered(this.props.item.id)};d.componentWillUnmount=function(){this.$1&&b("PagesManagerPageCommItemEditSubscriptionHandler").removeCallback(this.$1)};d.$2=function(){return this.props.relay.hasMore()};d.$3=function(){return!this.$2()?null:b("React").createElement("div",{className:"_13ze"},b("React").createElement(b("Link.react"),{className:"_2nye",onClick:this.$4},h._("Load more comments")))};d.render=function(){var a=this;return b("React").createElement("div",null,b("React").createElement(b("PagesManagerInboxInstagramPostCaptionContainer.react"),{className:(this.$2()?"_3-96":"")+(this.$2()?"":" _3-95"),igPost:this.props.igPost}),this.$3(),b("React").createElement(b("List.react"),null,this.props.igPost.instagram_comments.edges.map(function(c){return b("React").createElement(b("PagesManagerInboxInstagramPostCommentRowContainer.react"),{instagram_media_id:a.props.igPost.id,item:c.node,key:c.node.id,pageID:a.props.pageID})})))};return c}(b("React").Component);e.exports=a(c,{igPost:function(){return b("PagesManagerInboxInstagramPostCommentsContainer_igPost.graphql")},item:function(){return b("PagesManagerInboxInstagramPostCommentsContainer_item.graphql")}},{direction:"backward",getConnectionFromProps:function(a){return(a=a)!=null?(a=a.igPost)!=null?a.instagram_comments:a:a},getFragmentVariables:function(a,b){return babelHelpers["extends"]({},a,{count:b})},getVariables:function(a,b){var c=b.count;b=b.cursor;return{cursor:b,count:c,instagramMediaID:a.igPost.id}},query:function(){return b("PagesManagerInboxInstagramPostCommentsContainerPaginationQuery.graphql")}})}),null);
__d("PagesManagerInboxInstagramCommentCreateMutation",["ClientIDs","RelayFBEnvironment","RelayModern","RelayRuntime","PagesManagerInboxInstagramCommentCreateMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").ConnectionHandler,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=function(){return b("PagesManagerInboxInstagramCommentCreateMutation.graphql")};function a(a,c){__p&&__p();var d=function(b){var c=b.get(a.instagram_media.id);if(!c)return;c=g.getConnection(c,"PagesManagerInboxInstagramPostCommentsContainer_instagram_comments");b=b.getRootField("instagram_comment_create");if(!b)return;b=b.getLinkedRecord("instagram_media_comment_edge");c&&b&&g.insertEdgeAfter(c,b)},e=function(){var c=a.instagram_media.instagram_actor;return{instagram_comment_create:{instagram_media_comment_edge:{node:{id:b("ClientIDs").getNewClientID(),creation_time:Math.round(Date.now()/1e3),text:a.text,instagram_actor:{id:c.id,username:c.username,profile_picture:{uri:c.profile_picture_24.uri}}}}}}};return h(b("RelayFBEnvironment"),{mutation:i,optimisticResponse:e,optimisticUpdater:d,updater:d,variables:{input:{actor_id:a.actor_id,instagram_media_id:a.instagram_media.id,text:a.text}},onCompleted:c&&c.onSuccess,onError:c&&c.onFailure})}e.exports={commit:a}}),null);
__d("PagesManagerInboxInstagramPostComposer.react",["cx","fbt","CenteredContainer.react","Layout.react","PagesManagerInboxInstagramUserPhotoContainer.react","React","ShimButton.react","XUITextInput.react","setImmediate"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i=b("Layout.react").Column,j=b("Layout.react").FillColumn,k=32;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.UNSAFE_componentWillReceiveProps=function(a){if(a.comment!==this.props.comment&&a.comment!==""){var c=this.$1;c&&b("setImmediate")(function(){return c.focusInput()})}};d.render=function(){var a=this,c;c=(c=this.props.igUser)!=null?(c=c.profile_picture_32)!=null?c.uri:c:c;return b("React").createElement(b("Layout.react"),{className:"_1fn3"},b("React").createElement(i,{className:"_1fn4"},b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!1,vertical:!0},b("React").createElement(b("PagesManagerInboxInstagramUserPhotoContainer.react"),{imageURI:c,imageSize:k}))),b("React").createElement(j,null,b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!1,vertical:!0},b("React").createElement(b("XUITextInput.react"),{className:"_1fn5",ref:function(b){return a.$1=b},onChange:this.props.onCommentChange,onEnter:this.props.handleComment,placeholder:h._("Add a comment..."),value:this.props.comment}))),b("React").createElement(i,null,b("React").createElement("div",{className:"_45d7"},b("React").createElement("div",{className:"_45d8"}))),b("React").createElement(i,null,this.$2()))};d.$2=function(){var a=this.props.comment==="",c=b("React").createElement("div",{className:"_1fn8"+(a?" _45df":"")+(a?"":" _45dg")});a||(c=b("React").createElement(b("ShimButton.react"),{onClick:this.props.handleComment},c));return b("React").createElement(b("CenteredContainer.react"),{className:a?"":"_45d5",fullHeight:!0,horizontal:!1,vertical:!0},c)};return c}(b("React").Component);e.exports=a}),null);
__d("PagesManagerInboxInstagramPostComposerStore.react",["FluxStore","PagesManagerDispatcher","PagesManagerInboxInstagramPostComposerActionTypes"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesManagerDispatcher"))||this;c.$PagesManagerInboxInstagramPostComposerStore1="";return c}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();switch(a.actionType){case b("PagesManagerInboxInstagramPostComposerActionTypes").MESSAGE.SET:this.$PagesManagerInboxInstagramPostComposerStore2(a.message);this.__emitChange();break;case b("PagesManagerInboxInstagramPostComposerActionTypes").MESSAGE.APPEND_USERNAME:this.$PagesManagerInboxInstagramPostComposerStore3(a.usernameToAppend);this.__emitChange();break;case b("PagesManagerInboxInstagramPostComposerActionTypes").MESSAGE.CLEAR:this.$PagesManagerInboxInstagramPostComposerStore1="";this.__emitChange();break}};d.getMessage=function(){return this.$PagesManagerInboxInstagramPostComposerStore1};d.$PagesManagerInboxInstagramPostComposerStore2=function(a){this.$PagesManagerInboxInstagramPostComposerStore1=a};d.$PagesManagerInboxInstagramPostComposerStore3=function(a){var b=this.$PagesManagerInboxInstagramPostComposerStore1===""||this.$PagesManagerInboxInstagramPostComposerStore1.slice(-1)===" "?"":" ";this.$PagesManagerInboxInstagramPostComposerStore1=this.$PagesManagerInboxInstagramPostComposerStore1.concat(b+"@").concat(a).concat(" ")};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=new a()}),null);
__d("PagesManagerInboxInstagramPostComposerContainer.react",["FluxContainer","PageCommPlatform","PagesManagerInboxAction","PagesManagerInboxInstagramCommentCreateMutation","PagesManagerInboxInstagramPostComposer.react","PagesManagerInboxInstagramPostComposerActions","PagesManagerInboxInstagramPostComposerStore.react","PagesManagerInboxLogger","React","RelayModern","PagesManagerInboxInstagramPostComposerContainer_igPost.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={comment:""},d.$1=function(){b("PagesManagerInboxInstagramCommentCreateMutation").commit({actor_id:d.props.pageID,instagram_media:d.props.igPost,text:d.state.comment}),b("PagesManagerInboxInstagramPostComposerActions").clearMessage(),b("PagesManagerInboxAction").comment(),b("PagesManagerInboxLogger").logSendComment(b("PageCommPlatform").INSTAGRAM,!!d.props.isInboxRedesign,d.props.pageID),d.props.onCreateComment()},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("PagesManagerInboxInstagramPostComposerStore.react")]};c.calculateState=function(a){return{comment:b("PagesManagerInboxInstagramPostComposerStore.react").getMessage()}};var d=c.prototype;d.render=function(){return b("React").createElement(b("PagesManagerInboxInstagramPostComposer.react"),{onCommentChange:c.$2,handleComment:this.$1,comment:this.state.comment,igUser:this.props.igPost.instagram_actor})};return c}(b("React").Component);c.$2=function(a){b("PagesManagerInboxInstagramPostComposerActions").setMessage(a.target.value)};e.exports=a(b("FluxContainer").create(c),{igPost:function(){return b("PagesManagerInboxInstagramPostComposerContainer_igPost.graphql")}})}),null);
__d("PagesManagerInboxInstagramPostCarouselDots.react",["cx","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=[];for(var c=0;c<this.props.length;c++)a.push(b("React").createElement("td",{key:c.toString()},b("React").createElement("div",{className:"_2nqj"+(c===this.props.index?" _2nqk":"")})));return b("React").createElement("table",{className:this.props.className},b("React").createElement("tbody",null,b("React").createElement("tr",null,a)))};return c}(b("React").Component);e.exports=a}),null);
__d("PagesManagerInboxInstagramPostPhotoContainer.react",["ix","cx","CenteredContainer.react","Image.react","PagesManagerInboxInstagramPostCarouselDots.react","React","RelayModern","fbglyph","PagesManagerInboxInstagramPostPhotoContainer_igPost.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var b;b=a.call(this)||this;b.$2=function(){b.setState({selectedMediaIndex:b.state.selectedMediaIndex+1})};b.$3=function(){b.setState({selectedMediaIndex:b.state.selectedMediaIndex-1})};b.$4=function(){b.$1&&(b.props.onImageInitialLoad&&b.props.onImageInitialLoad(),b.$1=!1)};b.state={selectedMediaIndex:0};b.$1=!0;return b}var d=c.prototype;d.render=function(){var a,c;c=(c=this.props.igPost)!=null?(c=c.child_medias)!=null?(c=c[this.state.selectedMediaIndex])!=null?(c=c.image)!=null?c.uri:c:c:c:c;a=(a=this.props.igPost)!=null?(a=a.image)!=null?a.uri:a:a;var d=b("React").createElement(b("Image.react"),{className:"_2v6z _2v6-",onClick:this.$2,src:g("114597")}),e=b("React").createElement(b("Image.react"),{className:"_2v6z _2v6_",onClick:this.$3,src:g("114587")});return b("React").createElement("div",{className:"_2v70"},b("React").createElement(b("Image.react"),{height:this.props.imageSize,onLoad:this.$4,src:this.props.igPost.has_multiple_media?c:a,width:this.props.imageSize}),this.props.igPost.has_multiple_media&&this.state.selectedMediaIndex>0?e:null,this.props.igPost.has_multiple_media&&this.state.selectedMediaIndex<this.props.igPost.child_medias.length-1?d:null,this.props.igPost.has_multiple_media&&b("React").createElement(b("CenteredContainer.react"),{className:"_2qws"},b("React").createElement(b("PagesManagerInboxInstagramPostCarouselDots.react"),{index:this.state.selectedMediaIndex,length:this.props.igPost.child_medias.length})))};return c}(b("React").Component);e.exports=a(c,{igPost:function(){return b("PagesManagerInboxInstagramPostPhotoContainer_igPost.graphql")}})}),null);
__d("PagesManagerInboxInstagramPostSummaryContainer.react",["cx","fbt","CenteredContainer.react","React","RelayModern","PagesManagerInboxInstagramPostSummaryContainer_igPost.graphql"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){return b("React").createElement("div",{className:"_2p4t"},b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!1,vertical:!0,className:"_2p4w"},b("React").createElement("div",{className:"_u84"})),b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!1,vertical:!0,className:"_2p4x"},this.props.igPost.like_sentence.text),this.$1())};d.$1=function(){var a=this.props.igPost.comment_count;return!a?null:b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!1,vertical:!0,className:"_2p4y"},h._({"*":"{number} comments","_1":"1 comment"},[h._plural(a,"number")]))};return c}(b("React").Component);e.exports=a(c,{igPost:function(){return b("PagesManagerInboxInstagramPostSummaryContainer_igPost.graphql")}})}),null);
__d("PagesManagerInboxInstagramPostPhotoCardContainer.react",["cx","ImageBlock.react","PagesManagerInboxInstagramPostPhotoContainer.react","PagesManagerInboxInstagramPostSummaryContainer.react","PagesManagerInboxInstagramUserPhotoContainer.react","React","RelayModern","Timestamp.react","XUICard.react","XUICardSection.react","formatDate","PagesManagerInboxInstagramPostPhotoCardContainer_igPost.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var h=476,i=32;c=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;a=(a=this.props.igPost)!=null?(a=a.instagram_actor)!=null?(a=a.profile_picture_32)!=null?a.uri:a:a:a;return b("React").createElement(b("XUICard.react"),{className:"_4cye"},b("React").createElement(b("XUICardSection.react"),null,b("React").createElement(b("ImageBlock.react"),{spacing:"medium"},b("React").createElement("div",{className:"_4cyf"},b("React").createElement(b("PagesManagerInboxInstagramUserPhotoContainer.react"),{imageURI:a,imageSize:i})),b("React").createElement("div",{className:"_4cyg"},b("React").createElement("div",{className:"_4cyh"},this.props.igPost.instagram_actor.username),b("React").createElement("div",{className:"_4cyi"},b("React").createElement(b("Timestamp.react"),{text:b("formatDate")(this.props.igPost.creation_time,"M j"),time:this.props.igPost.creation_time})))),b("React").createElement("div",{className:"_4cyk"},b("React").createElement(b("PagesManagerInboxInstagramPostPhotoContainer.react"),{igPost:this.props.igPost,imageSize:h,onImageInitialLoad:this.props.onImageInitialLoad}))),b("React").createElement(b("XUICardSection.react"),{background:"light-wash"},b("React").createElement(b("PagesManagerInboxInstagramPostSummaryContainer.react"),{igPost:this.props.igPost})))};return c}(b("React").Component);e.exports=a(c,{igPost:function(){return b("PagesManagerInboxInstagramPostPhotoCardContainer_igPost.graphql")}})}),null);
__d("PagesManagerInboxInstagramPostContainer.react",["cx","PagesManagerInboxDetailViewContainer.react","PagesManagerInboxInstagramPostCommentsContainer.react","PagesManagerInboxInstagramPostComposerContainer.react","PagesManagerInboxInstagramPostPhotoCardContainer.react","React","RelayModern","PagesManagerInboxInstagramPostContainer_igPost.graphql","PagesManagerInboxInstagramPostContainer_item.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var b,c;for(var d=arguments.length,e=new Array(d),f=0;f<d;f++)e[f]=arguments[f];return(b=c=a.call.apply(a,[this].concat(e))||this,c.$4=function(){var a=c.$1;a&&(a.scrollToBottom&&a.scrollToBottom())},b)||babelHelpers.assertThisInitialized(c)}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement(b("PagesManagerInboxDetailViewContainer.react"),{composer:this.$2(),content:this.$3(),height:this.props.height,item:this.props.item,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,componentRef:function(b){a.$1=b}})};d.$3=function(){return b("React").createElement("div",{className:"_hbt"},b("React").createElement(b("PagesManagerInboxInstagramPostPhotoCardContainer.react"),{igPost:this.props.igPost,onImageInitialLoad:this.$4}),b("React").createElement(b("PagesManagerInboxInstagramPostCommentsContainer.react"),{igPost:this.props.igPost,item:this.props.item,pageID:this.props.pageID}))};d.$2=function(){return b("React").createElement(b("PagesManagerInboxInstagramPostComposerContainer.react"),{igPost:this.props.igPost,isInboxRedesign:this.props.isInboxRedesign,onCreateComment:this.$4,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,ref:"composer"})};return c}(b("React").PureComponent);e.exports=a(c,{igPost:function(){return b("PagesManagerInboxInstagramPostContainer_igPost.graphql")},item:function(){return b("PagesManagerInboxInstagramPostContainer_item.graphql")}})}),null);
__d("PagesManagerDisableComposerView.react",["cx","fbt","PagesManagerInboxComposerStateReasonType","React"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){if(this.props.composerStateReason===b("PagesManagerInboxComposerStateReasonType").DISABLE_LEFT_GROUP)return b("React").createElement("div",null,b("React").createElement("span",{className:"_73d5"},h._("You can't send messages to this group because you're no longer a participant.")));else return b("React").createElement("div",null,b("React").createElement("span",{className:"_73d5"},h._("You can't send messages. Message composer has been disabled.")))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerInstagramDirectMessagingComposerView.react",["ix","cx","fbt","Image.react","Link.react","MercuryDragDropPrompt.react","PagesManagerMessagingComposerAttachmentList.react","PagesMessengerTextInput.react","React","Tooltip.react","XUIButton.react","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=500;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){var c;c=a.call(this,b)||this;c.$1=function(){var a=Date.now();c.props.onSend(a)};c.state={placeholder:""};return c}var d=c.prototype;d.InputBox=function(){var a=this.state.placeholder||i._("Type a message..."),c="textInput";return b("React").createElement("div",{className:"_4dv-"},b("React").createElement(b("PagesMessengerTextInput.react"),{className:"_1p7p _5id1 _4dv_",maxLength:j,onChange:this.props.onInputChange,onNoShiftEnter:this.props.isQuickReplyMode?this.$1:null,placeholder:a,ref:c,value:this.props.message}))};d.SenderIcon=function(){return b("React").createElement("div",{className:"_4dw0"},b("React").createElement(b("Image.react"),{className:"_1cjc",src:this.props.profileIcon}))};d.HeartIcon=function(){return b("React").createElement("div",{className:"_6wbu"+(this.props.isHidden?" hidden_elem":"")},b("React").createElement(b("Link.react"),{href:"#",onClick:this.props.onHeartClick},b("React").createElement(b("Tooltip.react"),{tooltip:"Send a like"},b("React").createElement(b("Image.react"),{src:g("560775")}))))};d.PhotoIcon=function(){var a=b("React").createElement(b("Tooltip.react"),{tooltip:"Send a photo"},b("React").createElement(b("Image.react"),{src:g("676607")}));return b("React").createElement("div",{className:"_6wbv"+(this.props.isHidden?" hidden_elem":"")},b("React").createElement("input",{accept:".png, .jpg, .jpeg",id:"file-input",multiple:!0,onChange:this.props.photoSelectedHandler,style:{display:"none"},type:"file"}),b("React").createElement("label",{htmlFor:"file-input"},a))};d.SendButton=function(){var a=i._("Send");return b("React").createElement("div",{className:"_4dw3"+(this.props.isHidden?"":" hidden_elem")},b("React").createElement(b("XUIButton.react"),{label:a,onClick:this.$1,use:"confirm"}))};d.showAttachmentList=function(){__p&&__p();var a=[],c=this.props.attachments;for(var c=c,d=Array.isArray(c),e=0,c=d?c:c[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var f;if(d){if(e>=c.length)break;f=c[e++]}else{e=c.next();if(e.done)break;f=e.value}f=f;var g=f.file;if(g===null||g===void 0)return;g={id:"",isUploading:!1,name:g.name,type:g.type,uploadID:f.fileID};a.push(g)}return b("React").createElement(b("PagesManagerMessagingComposerAttachmentList.react"),{attachments:a,onDetach:this.props.onAttachmentDetach})};d.render=function(){return b("React").createElement("div",{className:"__1d"},b("React").createElement(b("MercuryDragDropPrompt.react"),null),b("React").createElement("div",{className:"_4dw9"},this.SenderIcon(),this.InputBox(),b("React").createElement("div",{className:"_3-8o _4dwa"},this.PhotoIcon(),this.HeartIcon(),this.SendButton())),this.showAttachmentList())};return c}(b("React").PureComponent);a.defaultProps={onInputChange:function(){},onSend:function(){}};e.exports=a}),null);
__d("GraphQLSubscribeModes",[],(function(a,b,c,d,e,f){"use strict";a={SUBSCRIBE:"subscribe",UNSUBSCRIBE:"unsubscribe"};e.exports=a}),null);
__d("GraphQLMutationDataHandler",["invariant"],(function(a,b,c,d,e,f,g){"use strict";a={getMutationType:function(a){!!a&&Object.keys(a).length===1||g(0,3445);return Object.keys(a)[0]}};e.exports=a}),null);
__d("GraphQLSubscriptionTracker",[],(function(a,b,c,d,e,f){"use strict";var g={};a={trackSubscription:function(a,b){g[b]=a},getSubscription:function(a){return g[a]},removeSubscription:function(a){delete g[a]}};e.exports=a}),null);
__d("RelayGraphQLSubscriptionNetworkLayer",["invariant"],(function(a,b,c,d,e,f,g){"use strict";var h;a={injectGraphQLSubscriber:function(a){h=a},sendSubscribeRequest:function(a){h||g(0,1910),h.sendSubscribeRequest(a)}};e.exports=a}),null);
__d("RQLSubscription",["invariant","GraphQLMutationDataHandler","GraphQLSubscribeModes","GraphQLSubscriptionTracker","RelayGraphQLSubscriptionNetworkLayer"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a={sendSubscribe:function(a,c,d,e,f){b("RelayGraphQLSubscriptionNetworkLayer").sendSubscribeRequest({mode:b("GraphQLSubscribeModes").SUBSCRIBE,subscription:a,subscriptionQueryID:e,params:c,clientSubscriptionID:d,topic:f})},sendUnsubscribe:function(a,c,d,e,f){b("RelayGraphQLSubscriptionNetworkLayer").sendSubscribeRequest({mode:b("GraphQLSubscribeModes").UNSUBSCRIBE,subscription:a,subscriptionQueryID:e,params:c,clientSubscriptionID:d,topic:f})},handleSubscriptionPayload:function(a){var c=b("GraphQLMutationDataHandler").getMutationType(a);a[c]||g(0,5237);var d="client_subscription_id"in a[c];if(!d)return;d=a[c].client_subscription_id;d||g(0,5238);c=b("GraphQLSubscriptionTracker").getSubscription(d);c&&c.handlePayload(a)}};e.exports=a}),null);
__d("RelayGraphQLSubscriber",["Promise","GraphQLSubscribeModes","GraphQLSubscriptionsLoggerEvent","GraphQLSubscriptionsMechanism","GraphQLSubscriptionsTypedLogger","RelayRTIGraphQLSubscriberUtils","RQLSubscription","SkywalkerManager","nullthrows","react-relay-deprecated/classic/query/RelayQuery","react-relay-deprecated/classic/route/RelayMetaRoute","react-relay-deprecated/classic/traversal/flattenRelayQuery","react-relay-deprecated/classic/traversal/printRelayQuery"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRTIGraphQLSubscriberUtils").getTopicAndTransformContext,h={},i=155160167952447;function a(a){__p&&__p();return{sendSubscribeRequest:function(c){var d=this,e,f=this._prepareData(c);c.mode===b("GraphQLSubscribeModes").SUBSCRIBE?e=g(a,f.queryText,f.queryID,f.queryParams,f.topic).then(function(a){var b=a.topic;a=a.transformContext;f.topic=b;a.appID=i;return d._subscribe(f,a)}):c.mode===b("GraphQLSubscribeModes").UNSUBSCRIBE?e=this._unsubscribe(f):e=b("Promise").reject("invalid mode");e["catch"](function(a){return!1})},_prepareData:function(a){var c={input:JSON.stringify(babelHelpers["extends"]({},a.params,{client_subscription_id:a.clientSubscriptionID}))},d=b("react-relay-deprecated/classic/query/RelayQuery").Subscription.create(a.subscription,b("react-relay-deprecated/classic/route/RelayMetaRoute").get("$GraphQLSubscriber"),c),e=b("react-relay-deprecated/classic/traversal/printRelayQuery")(b("nullthrows")(b("react-relay-deprecated/classic/traversal/flattenRelayQuery")(d))).text;return{queryText:e,queryID:a.subscriptionQueryID!=null?Number(a.subscriptionQueryID):null,queryParams:c,topic:a.topic!=null?String(a.topic):null,tokenKey:JSON.stringify({params:a.params,text:e}),logger:new(b("GraphQLSubscriptionsTypedLogger"))().setSubscriptionCall(d.getCall().name).setQueryParams(c).setMechanism(b("GraphQLSubscriptionsMechanism").SKYWALKER)}},_subscribe:function(a,c){var d=a.topic,e=a.tokenKey,f=a.logger;return new(b("Promise"))(function(a){var g={context:{transformContext:JSON.stringify(c)}};h[e]=b("SkywalkerManager").subscribe(b("nullthrows")(d),function(a){a=JSON.parse(a.payload);f.setEvent(b("GraphQLSubscriptionsLoggerEvent").RECEIVEPAYLOAD).log();b("RQLSubscription").handleSubscriptionPayload(a)},g);f.setEvent(b("GraphQLSubscriptionsLoggerEvent").CLIENT_SUBSCRIBE).log();a()})},_unsubscribe:function(a){var c=a.tokenKey,d=a.logger;return new(b("Promise"))(function(a){h[c].unsubscribe(),delete h[c],d.setEvent(b("GraphQLSubscriptionsLoggerEvent").CLIENT_UNSUBSCRIBE).log(),a()})}}}e.exports=a}),null);
__d("PagesManagerInboxMessengerContainer.react",["cx","BootloadOnRender.react","ChatAppointmentUtil","FluxContainer","ImmutableObject","Instant","JSResource","LazyComponent.react","MercuryIDs","MercuryMessageStore","MercuryPageMessageActions","MercuryPayloadSource","MercuryServerPayloadPreprocessor","MercuryWECMessageActions","MessengerConfig","MessengerHotLikePreviewEvents","MessengerMessageTransformer.bs","MessengerReadReceipt.bs","MessengerState.bs","PageCommPlatform","PageCommSearchType","PagesManagerContentSearchContainer.react","PagesManagerInboxAction","PagesManagerInboxDetailViewContainer.react","PagesManagerInboxFilterStore","PagesManagerInboxGK","PagesManagerInboxGKName","PagesManagerInboxLogger","PagesManagerMessagingComposerContainer.react","PagesManagerMessagingMessageList.react","PagesManagerMessagingMessagelistAction","PagesManagerMessagingMessagelistStore","PagesManagerOmniMActions","PagesManagerOmniMStore","PagesManagerOmniMUtils","PagesMessagingPerfLoggerEvent","PagesMessagingPerfTypedLogger","QE2Logger","React","RelayModern","SubscriptionsHandler","immutable","nullthrows","PagesManagerInboxMessengerContainer_commItem.graphql","PagesManagerInboxMessengerContainer_messageThread.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;var h=5,i="services_thread_intent_improvement",j=4e3,k=0,l=0,m="inbox",n=function(a){return a&&a.thread_key&&a.thread_key.other_user_id};c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(c,d){var e;e=a.call(this,c)||this;e.$6=function(){e.state.isLoadingMore||e.getMessageStore().fetchMoreMessages()&&(b("PagesManagerMessagingMessagelistAction").setIsLoading(!1),b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!0))};e.$3=!1;e.$4=Date.now();b("PagesManagerOmniMActions").init(c.commItem.id,c.pageID);return e}c.getStores=function(){return[b("PagesManagerMessagingMessagelistStore"),b("PagesManagerOmniMStore")]};c.calculateState=function(a,c){a=[];var d=n(c.messageThread),e=null,f=null,g=null,h=!1;d&&(d=b("MercuryIDs").getThreadIDFromUserID(d),a=b("PagesManagerMessagingMessagelistStore").getMessagelist(c.pageID,d),e=b("MessengerState.bs").getThreadMetaNow(c.pageID,d),f=b("PagesManagerOmniMStore").getQuickScheduleStartTime(),g=b("PagesManagerOmniMStore").getSuggestions(),h=b("PagesManagerOmniMStore").getShowSuggestionBar()&&!!f&&!!g&&Object.keys(g).length>0);return{isLoadingMore:b("PagesManagerMessagingMessagelistStore").isLoadingMore(),messagelist:a,scrollHeight:b("PagesManagerMessagingMessagelistStore").getScrollHeight(),showSuggestionBar:h,startTime:f,suggestions:g,thread:e,contentSearchSelectedIndex:b("PagesManagerMessagingMessagelistStore").getContentSearchSelectedIndex()}};var d=c.prototype;d.componentDidMount=function(){var a=n(this.props.messageThread);a&&this.$5(b("MercuryIDs").getThreadIDFromUserID(a));this.$4=Date.now();new(b("PagesMessagingPerfTypedLogger"))().setPageID(this.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").MESSAGELIST_LOAD_START).setThreadOffset(0).log()};d.componentWillUnmount=function(){this.$2&&this.$2.destroy(),this.$1&&this.$1.release(),b("PagesManagerOmniMActions").dismissSuggestionBar()};d.UNSAFE_componentWillReceiveProps=function(a){a=n(a.messageThread);var c=n(this.props.messageThread);a&&a!==c&&this.$5(b("MercuryIDs").getThreadIDFromUserID(a))};d.getMessageStore=function(){return this.$2};d.$7=function(a){b("PagesManagerMessagingMessagelistAction").setScrollAreaHeight(a)};d.$8=function(a){if(this.props.activeCommPlatform!==b("PageCommPlatform").MESSENGER)return;a=this.$9(a);if(!a)return;var c=a.startTime;a=a.suggestions;a&&Object.keys(a).length>0?(b("PagesManagerOmniMActions").setQuickScheduleStartTime(c),b("PagesManagerOmniMActions").showSuggestionBar(a)):b("PagesManagerOmniMActions").dismissSuggestionBar()};d.$5=function(a){__p&&__p();var c=this;this.$2&&this.$2.destroy();this.$1&&this.$1.release();this.$2=new(b("MercuryMessageStore"))(a,b("MessengerConfig").MessageLoadCount,this.props.pageID);var d=b("PagesManagerMessagingMessagelistStore").getMessagelist(this.props.pageID,a);d.length===0&&(b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!1),b("PagesManagerMessagingMessagelistAction").setIsLoading(!0));this.$1=new(b("SubscriptionsHandler"))();this.$1.addSubscriptions(this.$2.subscribe(function(d){c.$3||(c.$3=!0,new(b("PagesMessagingPerfTypedLogger"))().setPageID(c.props.pageID).setEventName(b("PagesMessagingPerfLoggerEvent").MESSAGELIST_LOAD_END).setPerfTime(Date.now()-c.$4).log()),b("PagesManagerMessagingMessagelistAction").setIsLoading(!1),b("PagesManagerMessagingMessagelistAction").setIsLoadingMore(!1),b("PagesManagerMessagingMessagelistAction").updateMessagelist(c.props.pageID,a,d),b("PagesManagerInboxLogger").itemRendered(c.props.commItem.id),c.$8(d)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").START,function(c,d){a==d&&b("PagesManagerMessagingMessagelistAction").setHotLikeStart(c)}),b("MessengerHotLikePreviewEvents").addListener(b("MessengerHotLikePreviewEvents").STOP,function(c){a==c&&b("PagesManagerMessagingMessagelistAction").setHotLikeEnd()}))};d.$10=function(a,c,d){__p&&__p();d=b("MessengerReadReceipt.bs").getSeenTimestamps(d,a);var e=new Set(d.keys());return d.withMutations(function(a){b("immutable").Seq(c).reverse().forEach(function(b){if(e.size===0)return!1;if(!e.has(b.author))return!0;a.update(b.author,function(a){return!a||a.watermark<=b.timestamp?{watermark:b.timestamp,action:b.timestamp}:a});e["delete"](b.author);return!0})})};d.$9=function(a){__p&&__p();a=a.messages;if(!a||a.length===0)return null;var c=this.state.messagelist.length===0;for(var d=a.length-1;d>=0;d--){var e=a[d];if(d===a.length-1||c&&d>=a.length-h||e.is_unread){e=e.meta_ranges;if(!e||e.length===0)continue;e=e[0].data;var f=b("ChatAppointmentUtil").parseJSON(e.m_suggestion_data);if(!f)continue;f=b("PagesManagerOmniMUtils").filterValidOmniMSuggestions(f);if(Object.keys(f).length===0)continue;e=e.start_time;!e||e<=b("Instant").now()?f=b("PagesManagerOmniMUtils").getFallbackSuggestions():(b("QE2Logger").logExposureForPage(i,this.props.pageID),f=b("PagesManagerOmniMUtils").replaceCreateAppointmentDirectText(f,e));return{startTime:e,suggestions:f}}else break}return null};d.$11=function(){if(b("PagesManagerInboxFilterStore").getSearchType()===b("PageCommSearchType").CONTENT){var a;a=b("nullthrows")((a=this.props.inThreadSearchResults)!=null?(a=a.messenger_messages_search)!=null?(a=a.results)!=null?a.edges:a:a:a).length;var c=b("PagesManagerInboxFilterStore").getSearchTerm();return b("React").createElement(b("PagesManagerContentSearchContainer.react"),{query:c,totalCount:a})}return null};d.render=function(){b("PagesManagerInboxGK").check(this.props.pageID,b("PagesManagerInboxGKName").www_comms_hub_multi_admin);var a=n(this.props.messageThread);a=a!==null?b("MercuryIDs").getThreadIDFromUserID(b("nullthrows")(a)):null;var c=this.state.thread;c=c!==void 0&&c!==null?c.unread_count===0:!1;return b("React").createElement(b("PagesManagerInboxDetailViewContainer.react"),{className:"_9h3",composer:this.$12(),content:this.$13(),height:this.props.height,isRead:c,item:this.props.commItem,onScrollHeightChange:this.$7,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,searchView:this.$11(),threadID:a,useCustomScrollableArea:!0})};d.$13=function(){__p&&__p();var a=this,c=n(this.props.messageThread),d=c?b("MercuryIDs").getThreadIDFromUserID(c):null,e=this.state.messagelist;if(d===null)return null;else{var f=null,g=null;this.state.showSuggestionBar&&(f=b("React").createElement("div",{className:"_1i7b"},b("React").createElement("div",{className:"_1i7g"})),g=b("React").createElement(b("BootloadOnRender.react"),{component:b("React").createElement(b("LazyComponent.react"),{pageID:this.props.pageID,recipientID:c,startTime:this.state.startTime,suggestions:this.state.suggestions,threadID:d}),loader:b("JSResource")("PagesManagerMessagingMSuggestionView.react").__setRef("PagesManagerInboxMessengerContainer.react"),placeholder:b("React").createElement("div",null)}));this.props.activeCommPlatform===b("PageCommPlatform").WEC&&(e=this.state.messagelist.map(function(c){var d,e="fbid:"+a.props.pageID;if(((d=c.attachments[0])==null?void 0:(d=d.share)==null?void 0:d.style_list[0])==="wec_message"&&e!==c.author&&c.attachments!=null&&c.attachments.length>0&&c.attachments[0].share!=null&&((d=c.attachments[0])==null?void 0:d.share.target)!=null){e=c.attachments[0].share.target.sender_wec_number;d=(d=c.attachments[0])==null?void 0:(d=d.share)==null?void 0:(d=d.target)==null?void 0:d.sender_wec_number_fbid;return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{author:d!=null?d:"fbid:"+e}))}return c}));if(b("PagesManagerInboxFilterStore").getSearchType()===b("PageCommSearchType").CONTENT){var h,i,j=this.state.contentSearchSelectedIndex;i=b("nullthrows")((i=this.props.messageContextResults)!=null?(i=i.messenger_message_context)!=null?(i=i.messages)!=null?i.nodes:i:i:i);var o=b("nullthrows")((h=this.props.inThreadSearchResults)!=null?(h=h.messenger_messages_search)!=null?(h=h.results)!=null?(h=h.edges)!=null?(h=h[j])!=null?(h=h.node)!=null?h.message_id:h:h:h:h:h:h);h=i.map(function(a){return b("nullthrows")((a=a)!=null?a.message_id:a)});var p={folder:m,other_user_fbid:c,thread_fbid:d,thread_id:d};c=i.map(function(c){return b("MessengerMessageTransformer.bs").transformMessage(d,c,p,a.props.pageID)});b("MercuryServerPayloadPreprocessor").getForFBID(this.props.pageID).handleUpdate({actions:c,payload_source:b("MercuryPayloadSource").SERVER_SEARCH});e=b("MessengerState.bs").getMessagesFromIDs(this.props.pageID,h.reverse()).map(function(c){if(c&&c.message_id===o){var d,e=b("nullthrows")((d=a.props.inThreadSearchResults)!=null?(d=d.messenger_messages_search)!=null?(d=d.results)!=null?(d=d.edges)!=null?(d=d[j])!=null?(d=d.content_search_result_context)!=null?d.match_ranges:d:d:d:d:d:d);if(e.length!==l){d=Object.keys(e[k]).map(function(a){return{offset:e[k].offset,length:e[k].length,entity:{url:""},className:"__in"}});return new(b("ImmutableObject"))(babelHelpers["extends"]({},c,{ranges:c.ranges?c.ranges.concat(d):d}))}}return c})}return b("React").createElement(b("MessengerState.bs").jsComponent,{fbid:this.props.pageID},function(c){return b("React").createElement(b("PagesManagerMessagingMessageList.react"),{commPlatform:a.props.activeCommPlatform,deliveryReceipts:b("MessengerState.bs").deliveryReceipts(c),fetchEarlierMessages:a.$6,footerChildren:g,footerChildrenSpacer:f,initLoading:!1,isLoadingMore:a.state.isLoadingMore,messagelist:b("immutable").List(e),pageID:a.props.pageID,readReceipts:a.$10(d,a.state.messagelist,b("MessengerState.bs").readReceiptsPerThread(c)),scrollHeight:a.state.scrollHeight,threadID:d})})}};d.$12=function(){var a=n(this.props.messageThread);a=a?b("MercuryIDs").getThreadIDFromUserID(a):null;var c=this.props.config.platformConfigs[this.props.activeCommPlatform],d=null;switch(this.props.activeCommPlatform){case b("PageCommPlatform").WEC:d=b("MercuryWECMessageActions").getForFBID(this.props.pageID);break;default:d=b("MercuryPageMessageActions").getForFBID(this.props.pageID)}if(d!=null)return b("React").createElement(b("PagesManagerMessagingComposerContainer.react"),{accessToken:this.props.config.pageAccessToken,canAttachFiles:c.canAttachFiles,canCreateAppointment:c.ShouldShowPMAAdminComposer,canUseHotLike:c.canUseHotLike,canUseSavedReplies:c.canUseSavedReplies,canUseStickers:c.canUseStickers,commPlatform:this.props.activeCommPlatform,creatorInfo:this.props.config.creatorInfo,defaultCurrency:this.props.config.defaultCurrency,isInboxDetailView:!0,isInboxRedesign:this.props.config.inboxRedesignConfig.shouldShowRedesign,maxLength:this.props.activeCommPlatform===b("PageCommPlatform").WEC?j:null,messageActions:d,onSendMessage:b("PagesManagerInboxAction").comment,persona:this.props.activeCommPlatform===b("PageCommPlatform").MESSENGER?this.props.config.messengerAdminPersona:null,recipientID:n(this.props.messageThread),shouldShowPaymentOnboarding:c.shouldShowPaymentOnboarding,shouldShowBonusTracker:this.props.config.shouldShowBonusTracker,shouldShowCommerceInvoiceButton:c.shouldShowCommerceInvoiceButton,shouldShowCommerceInvoiceButtonPUX:c.shouldShowCommerceInvoiceButtonPUX,shouldShowCommerceInvoiceSimplifiedFlow:c.shouldShowCommerceInvoiceSimplifiedFlow,shouldShowConfirmPayment:c.shouldShowConfirmPayment,shouldShowInvoiceShippingNUX:c.shouldShowInvoiceShippingNUX,shouldShowRequestPayment:c.shouldShowRequestPayment,thread:this.props.messageThread,threadElementID:a,threadID:a,userID:this.props.pageID})};return c}(b("React").Component);e.exports=a(b("FluxContainer").create(c,{withProps:!0}),{commItem:function(){return b("PagesManagerInboxMessengerContainer_commItem.graphql")},messageThread:function(){return b("PagesManagerInboxMessengerContainer_messageThread.graphql")}})}),null);
__d("PagesManagerInboxMessageBasicContainer.react",["FluxContainer","PageCommSearchType","PageManagerInboxInThreadContentSearchRelayResults.react","PagesManagerInboxFilterStore","PagesManagerInboxMessengerContainer.react","PagesManagerInboxStore","React","RelayModern","PagesManagerInboxMessageBasicContainer_commItem.graphql","PagesManagerInboxMessageBasicContainer_messageThread.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=b("RelayModern").createFragmentContainer;b("RelayModern").graphql;c=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerInboxStore"),b("PagesManagerInboxFilterStore")]};c.calculateState=function(a,c){return{config:b("PagesManagerInboxStore").getConfig(),activeType:b("PagesManagerInboxFilterStore").getActiveType()}};var d=c.prototype;d.render=function(){return b("PagesManagerInboxFilterStore").getSearchType()===b("PageCommSearchType").CONTENT?b("React").createElement(b("PageManagerInboxInThreadContentSearchRelayResults.react"),{activeCommPlatform:this.state.activeType,commItem:this.props.commItem,commSourceID:this.props.commSourceID,config:this.state.config,height:this.props.height,messageThread:this.props.messageThread,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID,searchTerm:b("PagesManagerInboxFilterStore").getSearchTerm()}):b("React").createElement(b("PagesManagerInboxMessengerContainer.react"),{activeCommPlatform:this.state.activeType,commItem:this.props.commItem,config:this.state.config,height:this.props.height,messageThread:this.props.messageThread,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID})};return c}(b("React").Component);e.exports=a(b("FluxContainer").create(c,{withProps:!0}),{commItem:function(){return b("PagesManagerInboxMessageBasicContainer_commItem.graphql")},messageThread:function(){return b("PagesManagerInboxMessageBasicContainer_messageThread.graphql")}})}),null);
__d("AbstractPagesManagerListStore",["invariant","FluxStore","PagesManagerActionType","nullthrows"],(function(a,b,c,d,e,f,g){__p&&__p();a=function(a){"use strict";__p&&__p();babelHelpers.inheritsLoose(c,a);function c(b){b=a.call(this,b)||this;b.__hasMoreItem=new Map();b.__isLoading=!1;b.__areThreadsFetchedUpdated=!1;return b}var d=c.prototype;d.__onDispatch=function(a){__p&&__p();switch(a.type){case b("PagesManagerActionType").LIST.FETCH:this.__handleListFetch(a);break;case b("PagesManagerActionType").LIST.FETCHED:case b("PagesManagerActionType").LIST.UPDATED:this.__areThreadsFetchedUpdated=!0;this.__emitChange();break;case b("PagesManagerActionType").LIST.LOADING:this.__isLoading=!0;this.__emitChange();break;case b("PagesManagerActionType").NAVIGATION_UNIT.CHANGE:case b("PagesManagerActionType").SEARCH.ADD_SEARCH_CUSTOM_TAG:case b("PagesManagerActionType").SEARCH.REMOVE_SEARCH_CUSTOM_TAG:this.__handleNavigationUnitChange(a);break;default:return}};d.__handleListFetch=function(a){g(0,2593)};d.__handleNavigationUnitChange=function(a){g(0,2594)};d.hasMoreItem=function(a){return this.__hasMoreItem.has(a)?b("nullthrows")(this.__hasMoreItem.get(a)):!1};d.getItemList=function(a,b){g(0,2595)};d.isLoading=function(){return this.__isLoading};d.areThreadsFetchedUpdated=function(){return this.__areThreadsFetchedUpdated};return c}(b("FluxStore"));a.__moduleID=e.id;e.exports=a}),null);
__d("PagesManagerInboxListStore",["AbstractPagesManagerListStore","MercuryPageOrderedThreadlist","MercuryThreadlistConstants","MessengerState.bs","PageCommItemFolder","PageCommOwnerFilter","PagesManagerActionType","PagesManagerDispatcher","PagesManagerInboxFilterStore","PagesManagerInboxMercuryUtil","PagesManagerMessagingNavigationUnitKey"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c;c=a.call(this,b("PagesManagerDispatcher"))||this;c.__isLoading=!0;return c}var d=c.prototype;d.__onDispatch=function(c){__p&&__p();this.__areThreadsFetchedUpdated=!1;switch(c.type){case b("PagesManagerActionType").LIST.SET_RESPONSE_DATA:this.__isLoading=!c.isReady;this.__emitChange();break;case b("PagesManagerActionType").LIST.ITEM_FOLDER_CHANGE:this.$PagesManagerInboxListStore6(c.ids,c.newFolder,c.oldFolder);this.__emitChange();break;case b("PagesManagerActionType").LIST.REMOVE_ITEM_FOLDER_CHANGE:this.$PagesManagerInboxListStore1&&this.$PagesManagerInboxListStore1.id===c.ids[0]&&(this.$PagesManagerInboxListStore1=null);this.__emitChange();break;case b("PagesManagerActionType").LIST.BAN_STATUS_CHANGE:this.$PagesManagerInboxListStore5=c.isBanned;this.$PagesManagerInboxListStore4=c.userName;this.__emitChange();break;case b("PagesManagerActionType").LIST.REMOVE_BAN_NOTICE:this.$PagesManagerInboxListStore5=null;this.$PagesManagerInboxListStore4=null;this.__emitChange();break;case b("PagesManagerActionType").LIST.FETCH:this.__handleListFetch(c);break;default:a.prototype.__onDispatch.call(this,c)}};d.getLastMutatedItem=function(){return this.$PagesManagerInboxListStore1};d.hasMutatedItem=function(){return this.$PagesManagerInboxListStore2};d.getUserName=function(){return this.$PagesManagerInboxListStore4};d.getIsUserBanned=function(){return this.$PagesManagerInboxListStore5};d.$PagesManagerInboxListStore6=function(a,b,c){this.$PagesManagerInboxListStore1={id:a[0],oldFolder:c,newFolder:b},this.$PagesManagerInboxListStore2=!0};d.__handleListFetch=function(a){var c=a.pageID,d=a.offset;a=a.limit;this.__isLoading=!0;var e=this.$PagesManagerInboxListStore7(c,d+a);e?this.$PagesManagerInboxListStore8(this.hasMoreItem(b("PagesManagerInboxFilterStore").getActiveFolder())):this.$PagesManagerInboxListStore9(c,d,a);this.__emitChange()};d.$PagesManagerInboxListStore7=function(a,c){a=b("MercuryPageOrderedThreadlist").getForFBID(a);var d=b("PagesManagerInboxFilterStore").getActiveMessageFolder(),e=a.hasLoadedThreadlist(d,b("PagesManagerInboxFilterStore").getActiveFilter());e=d===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.ARCHIVED?e&&a.hasLoadedThreadlist(b("PagesManagerMessagingNavigationUnitKey").FOLDERS.PAGE_BACKGROUND,b("PagesManagerInboxFilterStore").getActiveFilter()):e;a=a.getThreadCount(d,b("PagesManagerInboxFilterStore").getActiveFilter())>=c;return e||a};d.$PagesManagerInboxListStore9=function(a,c,d){__p&&__p();var e=this,f=b("PagesManagerInboxFilterStore").getActiveMessageFolder(),g=b("PagesManagerInboxFilterStore").getActiveFilter(),h=b("MercuryPageOrderedThreadlist").getForFBID(a);h.getFilteredThreadlist(c,d+1,f,g,function(i){__p&&__p();if(f===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.ARCHIVED)h.getFilteredThreadlist(c,d+1,b("PagesManagerMessagingNavigationUnitKey").FOLDERS.PAGE_BACKGROUND,g,function(f){f=i.concat(f);var c=f.length>d;e.$PagesManagerInboxListStore3=b("MessengerState.bs").getMultiThreadMeta(a,f,function(a){e.$PagesManagerInboxListStore8(c)},null)});else{var j=i.length>d;e.$PagesManagerInboxListStore3=b("MessengerState.bs").getMultiThreadMeta(a,i,function(a){e.$PagesManagerInboxListStore8(j)},null)}})};d.$PagesManagerInboxListStore10=function(a){a=b("MercuryPageOrderedThreadlist").getForFBID(a);var c=b("PagesManagerInboxFilterStore").getActiveMessageFolder(),d=b("PagesManagerInboxFilterStore").getActiveFilter();if(c===b("PagesManagerMessagingNavigationUnitKey").FOLDERS.ARCHIVED){a.getThreadlistOrderMap(c,d).addResources(a.getThreadlistOrderMap(b("PagesManagerMessagingNavigationUnitKey").FOLDERS.PAGE_BACKGROUND,d).getAllResources());return a.getAvailableThreadlistNow(c,d)}else return a.getAvailableThreadlistNow(c,d)};d.$PagesManagerInboxListStore8=function(a){this.__isLoading=!1,this.__hasMoreItem.set(b("PagesManagerInboxFilterStore").getActiveFolder(),a),this.__dispatcher.isDispatching()||this.__dispatcher.dispatch({type:b("PagesManagerActionType").LIST.FETCHED})};d.getItemList=function(a){var c=this.$PagesManagerInboxListStore10(a),d=b("PagesManagerInboxFilterStore").getActiveMessageFolder();d=this.hasMoreItem(d)&&c.length>0?c.slice(0,c.length-1):c;var e=[];d.forEach(function(c){c=b("MessengerState.bs").getThreadMetaNow(a,c);c&&e.push(c)});return e};d.getItemsForAdmin=function(a,c){a=this.getItemList(a);var d=b("PagesManagerInboxFilterStore").getActiveFolder();d===b("PageCommItemFolder").FOLLOW_UP&&(a=a.filter(function(a){return a.comm_status&&a.comm_status.toUpperCase()===b("PageCommItemFolder").FOLLOW_UP}));c===b("PageCommOwnerFilter").NONE?a=a.filter(function(a){return a.comm_item_owners&&!a.comm_item_owners.nodes[0]}):c&&(a=a.filter(function(a){return((a=a)!=null?(a=a.comm_item_owners)!=null?(a=a.nodes)!=null?(a=a[0])!=null?(a=a.admin)!=null?a.id:a:a:a:a:a)===c}));return a};d.getThreadSubscription=function(){return this.$PagesManagerInboxListStore3};d.__handleNavigationUnitChange=function(a){b("PagesManagerDispatcher").waitFor([b("PagesManagerInboxFilterStore").getDispatchToken()]);if(!b("PagesManagerInboxMercuryUtil").shouldUseMercury())return;this.__handleListFetch({pageID:a.pageID,offset:0,limit:b("MercuryThreadlistConstants").WEBMESSENGER_THREAD_COUNT})};return c}(b("AbstractPagesManagerListStore"));e.exports=new a()}),null);
__d("PagesManagerInboxDetailContainer.react",["FluxContainer","JSResource","PageCommPlatform","PagesManagerBroadcastViewContainer.react","PagesManagerInboxCommItemBasicInfoRoot.react","PagesManagerInboxDetailLoading.react","PagesManagerInboxFilterStore","PagesManagerInboxListStore","PagesManagerInboxSection","PagesManagerInboxStore","PagesManagerStore","PagesMarketingAutomationContentView.react","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("UnifiedInboxIGMessageDetailRootContainer.react").__setRef("PagesManagerInboxDetailContainer.react"));a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}c.getStores=function(){return[b("PagesManagerStore"),b("PagesManagerInboxFilterStore"),b("PagesManagerInboxListStore"),b("PagesManagerInboxStore"),b("PagesManagerStore")]};c.calculateState=function(a){var c=b("PagesManagerStore").getLayoutHeight()-b("PagesManagerStore").getHeaderHeight();return{commItemFolder:b("PagesManagerInboxFilterStore").getActiveFolder(),commPlatform:b("PagesManagerInboxFilterStore").getActiveType(),isListLoading:b("PagesManagerInboxListStore").isLoading(),isInboxRedesign:b("PagesManagerInboxStore").getConfig().inboxRedesignConfig.shouldShowRedesign,navMode:b("PagesManagerInboxFilterStore").getCurrentNavMode(),height:a?c:0,viewingListItem:b("PagesManagerStore").getViewingListItem()}};var d=c.prototype;d.render=function(){var a=b("PagesManagerInboxStore").getMailboxID(this.state.commPlatform);switch(this.state.navMode){case b("PagesManagerInboxSection").AUTOMATED_RESPONSES:return b("React").createElement(b("PagesMarketingAutomationContentView.react"),{height:this.state.height,isInboxRedesign:!0,pageID:this.props.pageID,pageName:this.props.pageName!==void 0?this.props.pageName:"",pageProfileUrl:this.props.pageProfileURI});case b("PagesManagerInboxSection").BROADCAST:return b("React").createElement(b("PagesManagerBroadcastViewContainer.react"),{height:this.state.height,pageID:this.props.pageID,pageName:this.props.pageName!==void 0?this.props.pageName:"",pageProfileUrl:this.props.pageProfileURI});default:return this.state.commPlatform===b("PageCommPlatform").INSTAGRAM_DIRECT?b("React").createElement(b("React").Suspense,{fallback:b("React").createElement(b("PagesManagerInboxDetailLoading.react"),{height:this.state.height})},b("React").createElement(g,{height:this.state.height,mailboxID:a,paddingBottom:this.props.paddingBottom,viewingItemToken:this.state.viewingListItem})):b("React").createElement(b("PagesManagerInboxCommItemBasicInfoRoot.react"),{commItemFolder:this.state.commItemFolder,commPlatform:this.state.commPlatform,height:this.state.height,isInboxRedesign:this.state.isInboxRedesign,isListLoading:this.state.isListLoading,listItemKey:this.state.viewingListItem,mailboxID:a,paddingBottom:this.props.paddingBottom,pageID:this.props.pageID})}};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a)}),null);
__d("IGDirectMessageGroupProfilePic.react",["cx","Image.react","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=3/4;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a=this;return b("React").createElement("div",{className:"_73qb"},this.props.imageURIs.filter(function(a){return a!==null}).map(function(c,d){return b("React").createElement(b("Image.react"),{className:"_1-3q _73qa",height:a.props.imageSize*h,key:d,src:c,width:a.props.imageSize*h})}))};return c}(b("React").PureComponent);e.exports=a}),null);
__d("PagesManagerIGConversationDeleteConfirmationDialog.react",["fbt","FDSButton.react","FDSModal.react","FDSModalFooter.react","FDSModalHeader.react","FDSSection.react","React"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return b("React").createElement(b("FDSModal.react"),{footer:b("React").createElement(b("FDSModalFooter.react"),{primaryButton:b("React").createElement(b("FDSButton.react"),{label:g._("Delete"),onClick:a.onConfirm,use:"primary"}),secondaryButton:b("React").createElement(b("FDSButton.react"),{label:g._("Cancel"),onClick:a.onHide})}),header:b("React").createElement(b("FDSModalHeader.react"),{title:g._("Delete Conversation?")}),isShown:a.shown,label:"Delete Modal",onHide:a.onHide},b("React").createElement(b("FDSSection.react"),null,g._("Deleting removes the conversation from your inbox, but no one else's inbox.")))}e.exports=a}),null);
__d("PagesManagerInboxPicSize",[],(function(a,b,c,d,e,f){"use strict";e.exports={DetailViewHeaderPicSize:32,ListRowProPicSize:40,IGDirectContextCardProfileSize:52}}),null);
__d("PagesManagerInboxIGDirectHeaderContainer.react",["ix","cx","fbt","CenteredContainer.react","ErrorBoundary.react","FluxContainer","IGDirectMessageGroupProfilePic.react","IGMessageInboxStore","IGMessageServerActions","Image.react","Layout.react","Link.react","LoadObject","PageCommPlatform","PagesManagerAction","PagesManagerIGConversationDeleteConfirmationDialog.react","PagesManagerInboxHeaderLoading.react","PagesManagerInboxLogger","PagesManagerInboxPicSize","PagesMessagingInboxActionLogger","PageWebdriverTestActionID","React","Tooltip","asset"],(function(a,b,c,d,e,f,g,h,i){"use strict";__p&&__p();var j=b("Layout.react").Column,k=b("Layout.react").FillColumn,l=57;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){__p&&__p();var c,d;for(var e=arguments.length,f=new Array(e),g=0;g<e;g++)f[g]=arguments[g];return(c=d=a.call.apply(a,[this].concat(f))||this,d.state={thread:b("LoadObject").empty(),shouldShowDeleteThreadDialog:!1},d.$1=function(){d.setState({shouldShowDeleteThreadDialog:!0})},d.$2=function(){d.setState({shouldShowDeleteThreadDialog:!1})},d.$3=function(){var a=b("IGMessageServerActions").getForFBID(d.props.mailboxID);b("PagesMessagingInboxActionLogger").logDeleteThreadClicked(b("PageCommPlatform").INSTAGRAM_DIRECT);a.deleteThread(d.props.threadID);d.setState({shouldShowDeleteThreadDialog:!1})},c)||babelHelpers.assertThisInitialized(d)}c.getStores=function(){return[b("IGMessageInboxStore")]};c.calculateState=function(a,c){c=b("IGMessageInboxStore").getThread(c.mailboxID,c.threadID);a=a!==null&&a!==void 0?a.shouldShowDeleteThreadDialog:!1;return{thread:c,shouldShowDeleteThreadDialog:a}};var d=c.prototype;d.render=function(){__p&&__p();var a,c;b("PagesManagerAction").setHeaderHeight(l);var d=this.state.thread.getValue();if(!d)return b("React").createElement(b("PagesManagerInboxHeaderLoading.react"),null);c=(c=d)!=null?(c=c.thread_users)!=null?c.nodes:c:c;if(!c)return null;var e=b("IGMessageInboxStore").getInboxIGID(this.props.mailboxID),f=c.filter(function(a){return a.instagram_user_id!==e});f.length===0&&f.push(c[0]);if(!f)return null;c=(c=f)!=null?(c=c[0])!=null?(c=c.profile_picture)!=null?c.uri:c:c:c;a=f.length>1?b("React").createElement("div",{className:"_7fjz"},b("React").createElement(b("IGDirectMessageGroupProfilePic.react"),{imageSize:b("PagesManagerInboxPicSize").ListRowProPicSize,imageURIs:[c,(a=f)!=null?(a=a[1])!=null?(a=a.profile_picture)!=null?a.uri:a:a:a]})):b("React").createElement(b("Image.react"),{className:"_1-3q",height:b("PagesManagerInboxPicSize").ListRowProPicSize,key:c,src:c,width:b("PagesManagerInboxPicSize").ListRowProPicSize});return b("React").createElement(b("ErrorBoundary.react"),{onHandleError:b("PagesManagerInboxLogger").logErrorJS},b("React").createElement(b("Layout.react"),{className:"_iyn","data-testid":b("PageWebdriverTestActionID").HEADER_CONTAINER},b("React").createElement(j,null,b("React").createElement(b("CenteredContainer.react"),{className:"_iyp _5m0-",fullHeight:!0,horizontal:!1,vertical:!0},a)),b("React").createElement(k,null,b("React").createElement(b("CenteredContainer.react"),{fullHeight:!0,horizontal:!1,vertical:!0},b("React").createElement("div",{className:"_iyo"},((c=d.is_group)!=null?c:!1)?d.thread_title:f[0].username))),b("React").createElement(j,null,b("React").createElement(b("CenteredContainer.react"),{className:"_suc",fullHeight:!0,horizontal:!1,vertical:!0},b("React").createElement(b("Link.react"),babelHelpers["extends"]({onClick:this.$1},b("Tooltip").propsFor(i._("Delete conversation"),"below")),b("React").createElement(b("Image.react"),{src:g("773389")})),b("React").createElement(b("PagesManagerIGConversationDeleteConfirmationDialog.react"),{onConfirm:this.$3,onHide:this.$2,shown:this.state.shouldShowDeleteThreadDialog})))))};return c}(b("React").PureComponent);e.exports=b("FluxContainer").create(a,{withProps:!0})}),null);
__d("PageCommItemActionType",["keyMirror"],(function(a,b,c,d,e,f){"use strict";a=b("keyMirror")({DONE:null,FOLLOW_UP:null,UN_FOLLOW_UP:null,INBOX:null,MARK_READ:null,MARK_UNREAD:null,SPAM:null,APPOINTMENT:null,DELETE:null});e.exports=a}),null);
__d("PagesManagerInboxProfilePic.react",["cx","FBLoadShimmer.react","Image.react","PageCommItemType","PageCommItemTypeUtil","PageCommPlatform","React"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){return!a.showPlatformBadge?null:b("React").createElement("div",{className:"_5m17"},b("React").createElement("div",{className:"_5m18"}))}function i(a){if(a.imageURI)return b("React").createElement(b("Image.react"),{className:b("PageCommItemTypeUtil").isUserCreated(a.commType)?"_1-3q":"",height:a.imageSize,src:a.imageURI,width:a.imageSize});return a.showPlaceholder?b("React").createElement(b("FBLoadShimmer.react"),{height:a.imageSize,style:{borderRadius:a.imageSize+"px"},width:a.imageSize}):null}a=function(a){babelHelpers.inheritsLoose(c,a);function c(){return a.apply(this,arguments)||this}var d=c.prototype;d.render=function(){var a;return b("React").createElement("div",{className:"_5m0-"+(this.props.commPlatform===b("PageCommPlatform").MESSENGER?" _5m10":"")+(this.props.commPlatform===b("PageCommPlatform").WEC?" _4pra":"")+(this.props.commPlatform===b("PageCommPlatform").FACEBOOK?" _5m15":"")+(this.props.commPlatform===b("PageCommPlatform").INSTAGRAM?" _5m16":"")+(this.props.commPlatform===b("PageCommPlatform").INSTAGRAM_DIRECT?" _6wkq":"")+(this.props.commType===b("PageCommItemType").FB_GROUP_POST?" _3pik":""),style:{width:this.props.imageSize,height:this.props.imageSize}},((a=this.props)!=null?a.profileElement:a)||b("React").createElement(i,{commType:this.props.commType,imageSize:this.props.imageSize,imageURI:this.props.imageURI,showPlaceholder:this.props.showPlaceholder}),b("React").createElement(h,{showPlatformBadge:this.props.showPlatformBadge}))};return c}(b("React").PureComponent);a.defaultProps={showPlaceholder:!1};e.exports=a}),null);